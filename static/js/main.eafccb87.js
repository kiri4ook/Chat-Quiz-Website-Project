/*! For license information please see main.eafccb87.js.LICENSE.txt */
!function(){var e={954:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var u in n)r.call(n,u)&&n[u]&&e.push(u)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},804:function(e,t,n){"use strict";var r=n(55),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=h(n,y);try{c(t,y,g)}catch(k){}}}}return t}},899:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||w(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},55:function(e,t,n){"use strict";e.exports=n(899)},449:function(e,t,n){var r=1/0,i="[object Symbol]",a=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,u="\\ud800-\\udfff",s="\\u0300-\\u036f\\ufe20-\\ufe23",c="\\u20d0-\\u20f0",l="\\u2700-\\u27bf",f="a-z\\xdf-\\xf6\\xf8-\\xff",h="A-Z\\xc0-\\xd6\\xd8-\\xde",d="\\ufe0e\\ufe0f",p="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",v="['\u2019]",m="["+u+"]",y="["+p+"]",g="["+s+c+"]",k="\\d+",b="["+l+"]",w="["+f+"]",_="[^"+u+p+k+l+f+h+"]",x="\\ud83c[\\udffb-\\udfff]",S="[^"+u+"]",E="(?:\\ud83c[\\udde6-\\uddff]){2}",I="[\\ud800-\\udbff][\\udc00-\\udfff]",T="["+h+"]",C="\\u200d",N="(?:"+w+"|"+_+")",R="(?:"+T+"|"+_+")",A="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",O="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",P="(?:"+g+"|"+x+")"+"?",D="["+d+"]?",L=D+P+("(?:"+C+"(?:"+[S,E,I].join("|")+")"+D+P+")*"),M="(?:"+[b,E,I].join("|")+")"+L,F="(?:"+[S+g+"?",g,E,I,m].join("|")+")",U=RegExp(v,"g"),j=RegExp(g,"g"),z=RegExp(x+"(?="+x+")|"+F+L,"g"),V=RegExp([T+"?"+w+"+"+A+"(?="+[y,T,"$"].join("|")+")",R+"+"+O+"(?="+[y,T+N,"$"].join("|")+")",T+"?"+N+"+"+A,T+"+"+O,k,M].join("|"),"g"),B=RegExp("["+C+u+s+c+d+"]"),q=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,H="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,W="object"==typeof self&&self&&self.Object===Object&&self,G=H||W||Function("return this")();var Z=function(e){return function(t){return null==e?void 0:e[t]}}({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"ss"});function K(e){return B.test(e)}function Q(e){return K(e)?function(e){return e.match(z)||[]}(e):function(e){return e.split("")}(e)}var Y=Object.prototype.toString,X=G.Symbol,J=X?X.prototype:void 0,$=J?J.toString:void 0;function ee(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&Y.call(e)==i}(e))return $?$.call(e):"";var t=e+"";return"0"==t&&1/e==-r?"-0":t}function te(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}(e,t,n)}function ne(e){return null==e?"":ee(e)}var re,ie=(re=function(e,t,n){return t=t.toLowerCase(),e+(n?function(e){return oe(ne(e).toLowerCase())}(t):t)},function(e){return function(e,t,n,r){var i=-1,a=e?e.length:0;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}(function(e,t,n){return e=ne(e),void 0===(t=n?void 0:t)?function(e){return q.test(e)}(e)?function(e){return e.match(V)||[]}(e):function(e){return e.match(a)||[]}(e):e.match(t)||[]}(function(e){return(e=ne(e))&&e.replace(o,Z).replace(j,"")}(e).replace(U,"")),re,"")});var ae,oe=(ae="toUpperCase",function(e){var t=K(e=ne(e))?Q(e):void 0,n=t?t[0]:e.charAt(0),r=t?te(t,1).join(""):e.slice(1);return n[ae]()+r});e.exports=ie},251:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return w(e)===f}t.isMemo=function(e){return w(e)===v}},468:function(e,t,n){"use strict";e.exports=n(251)},166:function(e,t,n){"use strict";var r=n(381),i=n(46);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function z(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Se=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ie(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Te(){if(xe){var e=xe,t=Se;if(Se=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Re=!1;function Ae(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ce(e,t,n)}finally{Re=!1,(null!==xe||null!==Se)&&(Ne(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,ze={onError:function(e){Me=!0,Fe=e}};function Ve(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(ze,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ze=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,St,Et,It=!1,Tt=[],Ct=null,Nt=null,Rt=null,At=new Map,Ot=new Map,Pt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function zt(){It=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==Rt&&Ut(Rt)&&(Rt=null),At.forEach(jt),Ot.forEach(jt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return Vt(t,e)}if(0<Tt.length){Vt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==Nt&&Vt(Nt,e),null!==Rt&&Vt(Rt,e),At.forEach(t),Ot.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Zt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Zt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Zt(e,t,n,r){if(Ht){var i=Qt(e,t,n,r);if(null===i)Hr(e,t,r,Kt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Rt=Mt(Rt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Mt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Qt(e,t,n,r))&&Hr(e,t,r,Kt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Qt(e,t,n,r){if(Kt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,$t=null;function en(){if($t)return $t;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return Sn}var In=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(In),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Rn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(An),Pn=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ie(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Zn=null;function Kn(e){Ur(e,0)}function Qn(e){if(Z(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Jn=$n}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Zn=Gn=null)}function nr(e){if("value"===e.propertyName&&Qn(Zn)){var t=[];Wn(t,Zn,e,we(e)),Ae(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Zn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Zn)}function ar(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==K(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Sr={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Ir=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),Rr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Rr.set(e,t),s(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Dr=Ar[Pr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Ir,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Zt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=we(n),o=[];e:{var u=Rr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Ir:case Tr:case Cr:s=yn;break;case Nr:s=Rn;break;case"scroll":s=hn;break;case"wheel":s=On;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Oe(p,h))&&l.push(Wr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Zr(d))p++;for(d=0,v=h;v;v=Zr(v))d++;for(;0<p-d;)l=Zr(l),p--;for(;0<d-p;)h=Zr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Zr(l),h=Zr(h)}l=null}else l=null;null!==s&&Kr(o,u,s,l,!1),null!==c&&null!==f&&Kr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(Hn(u))if(Xn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Gr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Vn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&zn(e,t)?(e=en(),$t=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Zr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Oe(n,a))&&o.unshift(Wr(n,s,u)):i||null!=(s=Oe(n,a))&&o.push(Wr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Si(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ii(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Si(Ti),Ni=Si(!1),Ri=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ei(Ni),Ei(Ci)}function Di(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ii(Ci,t),Ii(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ri=Ci.current,Ii(Ci,e),Ii(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Ii(Ci,e)):Ei(Ni),Ii(Ni,n)}var Ui=null,ji=!1,zi=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!zi&&null!==Ui){zi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ze($e,Bi),i}finally{kt=t,zi=!1}}return null}var qi=[],Hi=0,Wi=null,Gi=0,Zi=[],Ki=0,Qi=null,Yi=1,Xi="";function Ji(e,t){qi[Hi++]=Gi,qi[Hi++]=Wi,Wi=e,Gi=t}function $i(e,t,n){Zi[Ki++]=Yi,Zi[Ki++]=Xi,Zi[Ki++]=Qi,Qi=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Yi=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),$i(e,1,0))}function ta(e){for(;e===Wi;)Wi=qi[--Hi],qi[Hi]=null,Gi=qi[--Hi],qi[Hi]=null;for(;e===Qi;)Qi=Zi[--Ki],Zi[Ki]=null,Xi=Zi[--Ki],Zi[Ki]=null,Yi=Zi[--Ki],Zi[Ki]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Si(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ya.current;Ei(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ia=null;function Ta(e){null===Ia?Ia=[e]:Ia.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Ra=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Ra=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function za(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Va={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Oi(t)?Ri:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Oi(t)?Ri:Ci.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(za(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Va.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Za(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ka(e){return(0,e._init)(e._payload)}function Qa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Ka(a)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case _:return(t=jc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Za(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Za(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Za(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Ka(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ga(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ga(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(o,r.mode,s)).return=r,r=a}return u(r);case O:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Za(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=Qa(!0),Xa=Qa(!1),Ja={},$a=Si(Ja),eo=Si(Ja),to=Si(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii($a,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei($a),Ii($a,t)}function io(){Ei($a),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no($a.current),n=se(t,e.type);t!==n&&(Ii(eo,e),Ii($a,n))}function oo(e){eo.current===e&&(Ei($a),Ei(eo))}var uo=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ro(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Oo(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ho(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Do.bind(null,n,r,i,t),void 0,null),null===Rs)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return To().memoizedState}function Vo(e,t,n,r){var i=Io();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function qo(e,t){return Vo(8390656,8,e,t)}function Ho(e,t){return Bo(2048,8,e,t)}function Wo(e,t){return Bo(4,2,e,t)}function Go(e,t){return Bo(4,4,e,t)}function Zo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Zo.bind(null,t,e),n)}function Qo(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function $o(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Zo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:Uo,useDebugValue:Qo,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=$o.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Io();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Rs)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Rs.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Ho,useImperativeHandle:Ko,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Xo,useReducer:No,useRef:zo,useState:function(){return No(Co)},useDebugValue:Qo,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Ho,useImperativeHandle:Ko,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Xo,useReducer:Ro,useRef:zo,useState:function(){return Ro(Co)},useDebugValue:Qo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Ro(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Zs?Zs=new Set([this]):Zs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Ya(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Ds,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Ds,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ii(Ds,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ii(Ds,Ps),Ps|=r;return wu(e,t,i,n),t.child}function Iu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Oi(n)?Ri:Ci.current;return a=Ai(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Cu(e,t,n,r,i){if(Oi(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Hu(e,t),qa(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Ai(t,c=Oi(n)?Ri:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ha(t,o,r,c),Ra=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Ra?("function"===typeof l&&(za(t,n,l,r),s=t.memoizedState),(u=Ra||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Ai(t,s=Oi(n)?Ri:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ha(t,o,r,s),Ra=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Ra?("function"===typeof d&&(za(t,n,d,r),p=t.memoizedState),(c=Ra||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Iu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ru(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Au(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ou,Pu,Du,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):ju(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,zu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return zu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,zu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Rs)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),zu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Zi[Ki++]=Yi,Zi[Ki++]=Xi,Zi[Ki++]=Qi,Yi=e.id,Xi=e.overflow,Qi=t),t=ju(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Dc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Dc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ju(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zu(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=ju(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ku(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zu(t),null;case 1:case 17:return Oi(t.type)&&Pi(),Zu(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Pu(e,t),Zu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Du(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Zu(t),null}if(e=no($a.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":G(r),$(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ou(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":G(e),$(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Zu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no($a.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Zu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Zu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Zu(t),null);case 4:return io(),Pu(e,t),null===e&&Br(t.stateNode.containerInfo),Zu(t),null;case 10:return _a(t.type._context),Zu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Zu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Zu(t),null}else 2*Xe()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ii(uo,r?1&n|2:1&n),t):(Zu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Zu(t),6&t.subtreeFlags&&(t.flags|=8192)):Zu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ou=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(){},Du=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($a.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Xu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,$u=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Xu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,ds(e,t,n),Xu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Ec(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Xe())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||f,ms(t,e),Xu=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for($u=e,f=e.child;null!==f;){for(h=$u=f;null!==$u;){switch(p=(d=$u).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==p?(p.return=d,$u=p):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){$u=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==$u;){var i=$u,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=Yu;var c=Xu;if(Yu=o,(Xu=s)&&!c)for($u=i;null!==$u;)s=(o=$u).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,$u=s):xs(i);for(;null!==a;)$u=a,bs(a,t,n),a=a.sibling;$u=i,Yu=u,Xu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,$u=a):ws(e)}}function ws(e){for(;null!==$u;){var t=$u;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&as(t)}catch(d){Ec(t,t.return,d)}}if(t===e){$u=null;break}if(null!==(n=t.sibling)){n.return=t.return,$u=n;break}$u=t.return}}function _s(e){for(;null!==$u;){var t=$u;if(t===e){$u=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$u=n;break}$u=t.return}}function xs(e){for(;null!==$u;){var t=$u;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){$u=null;break}var u=t.sibling;if(null!==u){u.return=t.return,$u=u;break}$u=t.return}}var Ss,Es=Math.ceil,Is=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,Ns=0,Rs=null,As=null,Os=0,Ps=0,Ds=Si(0),Ls=0,Ms=null,Fs=0,Us=0,js=0,zs=null,Vs=null,Bs=0,qs=1/0,Hs=null,Ws=!1,Gs=null,Zs=null,Ks=!1,Qs=null,Ys=0,Xs=0,Js=null,$s=-1,ec=0;function tc(){return 0!==(6&Ns)?Xe():-1!==$s?$s:$s=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Os?Os&-Os:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Xs)throw Xs=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&Ns)&&e===Rs||(e===Rs&&(0===(2&Ns)&&(Us|=n),4===Ls&&sc(e,Os)),ic(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(qs=Xe()+500,ji&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Rs?Os:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){ji=!0,Vi(e)}(cc.bind(null,e)):Vi(cc.bind(null,e)),oi((function(){0===(6&Ns)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if($s=-1,ec=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Rs?Os:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Ns;Ns|=2;var o=vc();for(Rs===e&&Os===t||(Hs=null,qs=Xe()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Is.current=o,Ns=i,null!==As?t=0:(Rs=null,Os=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,Vs,Hs);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Vs,Hs),t);break}_c(e,Vs,Hs);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Vs,Hs),r);break}_c(e,Vs,Hs);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=zs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Vs,Vs=n,null!==t&&uc(t)),e}function uc(e){null===Vs?Vs=e:Vs.push.apply(Vs,e)}function sc(e,t){for(t&=~js,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ns))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Vs,Hs),ic(e,Xe()),null}function lc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(qs=Xe()+500,ji&&Bi())}}function fc(e){null!==Qs&&0===Qs.tag&&0===(6&Ns)&&xc();var t=Ns;Ns|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ns=t))&&Bi()}}function hc(){Ps=Ds.current,Ei(Ds)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ei(Ni),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Rs=e,As=e=Dc(e.current,null),Os=Ps=t,Ls=0,Ms=null,js=Us=Fs=0,Vs=zs=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ia=null}return e}function pc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Os,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===zs?zs=[o]:zs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Zs||!Zs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function vc(){var e=Is.current;return Is.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Rs||0===(268435455&Fs)&&0===(268435455&Us)||sc(Rs,Os)}function yc(e,t){var n=Ns;Ns|=2;var r=vc();for(Rs===e&&Os===t||(Hs=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Ns=n,Is.current=r,null!==As)throw Error(a(261));return Rs=null,Os=0,Ls}function gc(){for(;null!==As;)bc(As)}function kc(){for(;null!==As&&!Qe();)bc(As)}function bc(e){var t=Ss(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?wc(e):As=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ku(n,t,Ps)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ls=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ls&&(Ls=5)}function _c(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qs);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Rs&&(As=Rs=null,Os=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ks||(Ks=!0,Rc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ns;Ns|=4,Ts.current=null,function(e,t){if(ei=Ht,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,$u=t;null!==$u;)if(e=(t=$u).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$u=e;else for(;null!==$u;){t=$u;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$u=e;break}$u=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Ye(),Ns=s,kt=u,Cs.transition=o}else e.current=n;if(Ks&&(Ks=!1,Qs=e,Ys=i),o=e.pendingLanes,0===o&&(Zs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Gs,Gs=null,e;0!==(1&Ys)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Js?Xs++:(Xs=0,Js=e):Xs=0,Bi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function xc(){if(null!==Qs){var e=bt(Ys),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Ys=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,$u=e.current;null!==$u;){var o=$u,u=o.child;if(0!==(16&$u.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for($u=l;null!==$u;){var f=$u;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,$u=h;else for(;null!==$u;){var d=(f=$u).sibling,p=f.return;if(os(f),f===l){$u=null;break}if(null!==d){d.return=p,$u=d;break}$u=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}$u=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,$u=u;else e:for(;null!==$u;){if(0!==(2048&(o=$u).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,$u=g;break e}$u=o.return}}var k=e.current;for($u=k;null!==$u;){var b=(u=$u).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,$u=b;else e:for(u=k;null!==$u;){if(0!==(2048&(s=$u).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Ec(s,s.return,_)}if(s===u){$u=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,$u=w;break e}$u=s.return}}if(Ns=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Sc(e,t,n){e=Da(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Zs||!Zs.has(r))){t=Da(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Rs===e&&(Os&n)===n&&(4===Ls||3===Ls&&(130023424&Os)===Os&&500>Xe()-Bs?dc(e,0):js|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Rc(e,t){return Ze(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Ac(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case S:u=8,i|=8;break;case E:return(e=Oc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Oc(13,n,t,i)).elementType=N,e.lanes=o,e;case R:return(e=Oc(19,n,t,i)).elementType=R,e.lanes=o,e;case P:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:u=10;break e;case T:u=9;break e;case C:u=11;break e;case A:u=14;break e;case O:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Oc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new zc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Oc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Pa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Hc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Zc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Ss=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Ru(t),da();break;case 5:ao(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Ii(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Ii(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Wu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&$i(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hu(e,t),e=t.pendingProps;var i=Ai(t,Ci.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=Va,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Ru(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Au(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Au(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Iu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ii(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xu(e,t,r,i=ma(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Hu(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),qa(t,r,i),Wa(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Wc(o);u.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Wc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Hc(t,s,n,r)})),s}(n,t,e,i,r);return Wc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Hc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Xe()),0===(6&Ns)&&(qs=Xe()+500,Bi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Zc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Zc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Zc(e,t)}},St=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));Z(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ie,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},781:function(e,t,n){"use strict";var r=n(412);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},412:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(166)},358:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.isContextConsumer=function(e){return y(e)===c}},353:function(e,t,n){"use strict";e.exports=n(358)},853:function(e,t,n){"use strict";var r=n(381),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},113:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function R(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},P={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:P,ReactCurrentOwner:x};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},381:function(e,t,n){"use strict";e.exports=n(113)},343:function(e,t,n){"use strict";e.exports=n(853)},155:function(e,t,n){"use strict";var r=n(479).qC;t.Uo="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?r:r.apply(null,arguments)},"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__},479:function(e,t,n){"use strict";n.d(t,{MT:function(){return c},UY:function(){return l},md:function(){return h},qC:function(){return f}});var r=n(413);function i(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var a="function"===typeof Symbol&&Symbol.observable||"@@observable",o=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function s(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(i(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(i(1));return n(c)(e,t)}if("function"!==typeof e)throw new Error(i(2));var o=e,l=t,f=[],h=f,d=!1;function p(){h===f&&(h=f.slice())}function v(){if(d)throw new Error(i(3));return l}function m(e){if("function"!==typeof e)throw new Error(i(4));if(d)throw new Error(i(5));var t=!0;return p(),h.push(e),function(){if(t){if(d)throw new Error(i(6));t=!1,p();var n=h.indexOf(e);h.splice(n,1),f=null}}}function y(e){if(!s(e))throw new Error(i(7));if("undefined"===typeof e.type)throw new Error(i(8));if(d)throw new Error(i(9));try{d=!0,l=o(l,e)}finally{d=!1}for(var t=f=h,n=0;n<t.length;n++){(0,t[n])()}return e}return y({type:u.INIT}),(r={dispatch:y,subscribe:m,getState:v,replaceReducer:function(e){if("function"!==typeof e)throw new Error(i(10));o=e,y({type:u.REPLACE})}})[a]=function(){var e,t=m;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(i(11));function n(){e.next&&e.next(v())}return n(),{unsubscribe:t(n)}}})[a]=function(){return this},e},r}function l(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r];0,"function"===typeof e[a]&&(n[a]=e[a])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:u.INIT}))throw new Error(i(12));if("undefined"===typeof n(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw new Error(i(13))}))}(n)}catch(c){o=c}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,a={},u=0;u<s.length;u++){var c=s[u],l=n[c],f=e[c],h=l(f,t);if("undefined"===typeof h){t&&t.type;throw new Error(i(14))}a[c]=h,r=r||h!==f}return(r=r||s.length!==Object.keys(e).length)?a:e}}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),a=function(){throw new Error(i(15))},o={getState:n.getState,dispatch:function(){return a.apply(void 0,arguments)}},u=t.map((function(e){return e(o)}));return a=f.apply(void 0,u)(n.dispatch),(0,r.Z)((0,r.Z)({},n),{},{dispatch:a})}}}},22:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,P(_);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(I),I=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&D(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,E=null,I=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function R(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(S=!1,E=null)}}else S=!1}if("function"===typeof k)x=function(){k(R)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=R,x=function(){O.postMessage(null)}}else x=function(){y(R,0)};function P(e){E=e,S||(S=!0,x())}function D(e,n){I=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(I),I=-1):m=!0,D(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},46:function(e,t,n){"use strict";e.exports=n(22)},441:function(e,t,n){"use strict";var r=n(381);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},471:function(e,t,n){"use strict";var r=n(381),i=n(305);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},305:function(e,t,n){"use strict";e.exports=n(441)},631:function(e,t,n){"use strict";e.exports=n(471)},942:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(142);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},413:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(942);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},142:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},2:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Chat-Quiz-Website-Project/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return gi},SDK_VERSION:function(){return ja},_DEFAULT_ENTRY_NAME:function(){return _a},_addComponent:function(){return Ta},_addOrOverwriteComponent:function(){return Ca},_apps:function(){return Sa},_clearComponents:function(){return Da},_components:function(){return Ia},_getProvider:function(){return Ra},_isFirebaseApp:function(){return Oa},_isFirebaseServerApp:function(){return Pa},_registerComponent:function(){return Na},_removeServiceInstance:function(){return Aa},_serverApps:function(){return Ea},deleteApp:function(){return Ha},getApp:function(){return Ba},getApps:function(){return qa},initializeApp:function(){return za},initializeServerApp:function(){return Va},onLog:function(){return Za},registerVersion:function(){return Ga},setLogLevel:function(){return Ka}});var t=n(381),r=n.t(t,2),i=n(781),a=n(305),o=n(631),u=n(412),s=n.t(u,2);var c=function(e){e()},l=function(){return c},f=Symbol.for("react-redux-context"),h="undefined"!==typeof globalThis?globalThis:{};function d(){var e;if(!t.createContext)return{};var n=null!=(e=h[f])?e:h[f]=new Map,r=n.get(t.createContext);return r||(r=t.createContext(null),n.set(t.createContext,r)),r}var p=d();function v(e){if(Array.isArray(e))return e}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){if(e){if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,t){return v(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||y(e,t)||g()}function b(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function w(e){return function(e){if(Array.isArray(e))return m(e)}(e)||b(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}function x(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var S=n(804),E=n.n(S),I=n(353),T=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function C(e,t,n,r,i){var a,o,u,s,c,l=i.areStatesEqual,f=i.areOwnPropsEqual,h=i.areStatePropsEqual,d=!1;function p(i,d){var p=!f(d,o),v=!l(i,a,d,o);return a=i,o=d,p&&v?(u=e(a,o),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):p?(e.dependsOnOwnProps&&(u=e(a,o)),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):v?function(){var t=e(a,o),r=!h(t,u);return u=t,r&&(c=n(u,s,o)),c}():c}return function(i,l){return d?p(i,l):(u=e(a=i,o=l),s=t(r,o),c=n(u,s,o),d=!0,c)}}function N(e){return function(t){var n=e(t);function r(){return n}return r.dependsOnOwnProps=!1,r}}function R(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function A(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e,void 0)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=R(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=R(i),i=r(t,n)),i},r}}function O(e,t){return function(n,r){throw new Error("Invalid value of type ".concat(typeof e," for ").concat(t," argument when connecting component ").concat(r.wrappedComponentName,"."))}}function P(e,t,n){return _({},n,e,t)}var D={notify:function(){},get:function(){return[]}};function L(e,t){var n,r=D;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=l(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=D)},getListeners:function(){return r}};return o}var M=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;function F(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function U(e,t){if(F(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!F(e[n[i]],t[n[i]]))return!1;return!0}var j=["reactReduxForwardedRef"],z=function(){throw new Error("uSES not initialized!")},V=[null,null];function B(e,t,n,r,i,a){e.current=r,n.current=!1,i.current&&(i.current=null,a())}function q(e,t){return e===t}var H=function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(i.pure,i.areStatesEqual),o=void 0===a?q:a,u=i.areOwnPropsEqual,s=void 0===u?U:u,c=i.areStatePropsEqual,l=void 0===c?U:c,f=i.areMergedPropsEqual,h=void 0===f?U:f,d=i.forwardRef,v=void 0!==d&&d,m=i.context,y=void 0===m?p:m,g=function(e){return e?"function"===typeof e?A(e):O(e,"mapStateToProps"):N((function(){return{}}))}(e),b=function(e){return e&&"object"===typeof e?N((function(t){return function(e,t){var n={},r=function(){var r=e[i];"function"===typeof r&&(n[i]=function(){return t(r.apply(void 0,arguments))})};for(var i in e)r();return n}(e,t)})):e?"function"===typeof e?A(e):O(e,"mapDispatchToProps"):N((function(e){return{dispatch:e}}))}(n),S=function(e){return e?"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.areMergedPropsEqual,a=!1;return function(t,n,o){var u=e(t,n,o);return a?i(u,r)||(r=u):(a=!0,r=u),r}}}(e):O(e,"mergeProps"):function(){return P}}(r),R=Boolean(e);return function(e){var n=e.displayName||e.name||"Component",r="Connect(".concat(n,")"),i={shouldHandleStateChanges:R,displayName:r,wrappedComponentName:n,WrappedComponent:e,initMapStateToProps:g,initMapDispatchToProps:b,initMergeProps:S,areStatesEqual:o,areStatePropsEqual:l,areOwnPropsEqual:s,areMergedPropsEqual:h};function a(n){var r=t.useMemo((function(){var e=n.reactReduxForwardedRef,t=x(n,j);return[n.context,e,t]}),[n]),a=k(r,3),o=a[0],u=a[1],s=a[2],c=t.useMemo((function(){return o&&o.Consumer&&(0,I.isContextConsumer)(t.createElement(o.Consumer,null))?o:y}),[o,y]),l=t.useContext(c),f=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch),h=Boolean(l)&&Boolean(l.store);var d=f?n.store:l.store,p=h?l.getServerState:d.getState,v=t.useMemo((function(){return function(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=x(t,T);return C(n(e,a),r(e,a),i(e,a),e,a)}(d.dispatch,i)}),[d]),m=t.useMemo((function(){if(!R)return V;var e=L(d,f?void 0:l.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[d,f,l]),g=k(m,2),b=g[0],S=g[1],E=t.useMemo((function(){return f?l:_({},l,{subscription:b})}),[f,l,b]),N=t.useRef(),A=t.useRef(s),O=t.useRef(),P=t.useRef(!1),D=(t.useRef(!1),t.useRef(!1)),F=t.useRef();M((function(){return D.current=!0,function(){D.current=!1}}),[]);var U,q,H,W,G=t.useMemo((function(){return function(){return O.current&&s===A.current?O.current:v(d.getState(),s)}}),[d,s]),Z=t.useMemo((function(){return function(e){return b?function(e,t,n,r,i,a,o,u,s,c,l){if(!e)return function(){};var f=!1,h=null,d=function(){if(!f&&u.current){var e,n,d=t.getState();try{e=r(d,i.current)}catch(p){n=p,h=p}n||(h=null),e===a.current?o.current||c():(a.current=e,s.current=e,o.current=!0,l())}};return n.onStateChange=d,n.trySubscribe(),d(),function(){if(f=!0,n.tryUnsubscribe(),n.onStateChange=null,h)throw h}}(R,d,b,v,A,N,P,D,O,S,e):function(){}}}),[b]);U=B,q=[A,N,P,s,O,S],M((function(){return U.apply(void 0,w(q))}),H);try{W=z(Z,G,p?function(){return v(p(),s)}:G)}catch(Q){throw F.current&&(Q.message+="\nThe error may be correlated with this previous error:\n".concat(F.current.stack,"\n\n")),Q}M((function(){F.current=void 0,O.current=void 0,N.current=W}));var K=t.useMemo((function(){return t.createElement(e,_({},W,{ref:u}))}),[u,e,W]);return t.useMemo((function(){return R?t.createElement(c.Provider,{value:E},K):K}),[c,K,E])}var u=t.memo(a);if(u.WrappedComponent=e,u.displayName=a.displayName=r,v){var c=t.forwardRef((function(e,n){return t.createElement(u,_({},e,{reactReduxForwardedRef:n}))})),f=c;return f.displayName=r,f.WrappedComponent=e,E()(f,e)}return E()(u,e)}};var W=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=e.stabilityCheck,u=void 0===o?"once":o,s=e.noopCheck,c=void 0===s?"once":s,l=t.useMemo((function(){var e=L(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0,stabilityCheck:u,noopCheck:c}}),[n,a,u,c]),f=t.useMemo((function(){return n.getState()}),[n]);M((function(){var e=l.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),f!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[l,f]);var h=r||p;return t.createElement(h.Provider,{value:l},i)};var G,Z;G=o.useSyncExternalStoreWithSelector,function(e){z=e}(a.useSyncExternalStore),Z=u.unstable_batchedUpdates,c=Z;var K=n(479),Q=n(155),Y=function(e){return"@@redux-saga/"+e},X=Y("CANCEL_PROMISE"),J=Y("CHANNEL_END"),$=Y("IO"),ee=Y("MATCH"),te=Y("MULTICAST"),ne=Y("SAGA_ACTION"),re=Y("SELF_CANCELLATION"),ie=Y("TASK"),ae=Y("TASK_CANCEL"),oe=Y("TERMINATE"),ue=Y("LOCATION"),se=function(e){return null===e||void 0===e},ce=function(e){return null!==e&&void 0!==e},le=function(e){return"function"===typeof e},fe=function(e){return"string"===typeof e},he=Array.isArray,de=function(e){return e&&le(e.then)},pe=function(e){return e&&le(e.next)&&le(e.throw)},ve=function e(t){return t&&(fe(t)||ge(t)||le(t)||he(t)&&t.every(e))},me=function(e){return e&&le(e.take)&&le(e.close)},ye=function(e){return le(e)&&e.hasOwnProperty("toString")},ge=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},ke=function(e){return me(e)&&e[te]};var be=function(e,t){var n;void 0===t&&(t=!0);var r=new Promise((function(r){n=setTimeout(r,Math.min(2147483647,e),t)}));return r[X]=function(){clearTimeout(n)},r},we=function(e){return function(){return e}},_e=we(!0),xe=function(){};var Se=function(e){return e};"function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var Ee=function(e,t){_(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))};function Ie(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function Te(e){var t=!1;return function(){t||(t=!0,e())}}var Ce=function(e){throw e},Ne=function(e){return{value:e,done:!0}};function Re(e,t,n){void 0===t&&(t=Ce),void 0===n&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:Ne,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function Ae(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var Oe=function(e){return Array.apply(null,new Array(e))},Pe=function(e){return function(t){return e(Object.defineProperty(t,ne,{value:!0}))}},De=function(e){return e===oe},Le=function(e){return e===ae},Me=function(e){return De(e)||Le(e)};function Fe(e,t){var n=Object.keys(e),r=n.length;var i,a=0,o=he(e)?Oe(r):{},u={};return n.forEach((function(e){var n=function(n,u){i||(u||Me(n)?(t.cancel(),t(n,u)):(o[e]=n,++a===r&&(i=!0,t(o))))};n.cancel=xe,u[e]=n})),t.cancel=function(){i||(i=!0,n.forEach((function(e){return u[e].cancel()})))},u}function Ue(e){return{name:e.name||"anonymous",location:je(e)}}function je(e){return e[ue]}var ze={isEmpty:_e,put:xe,take:xe};function Ve(e,t){void 0===e&&(e=10);var n=new Array(e),r=0,i=0,a=0,o=function(t){n[i]=t,i=(i+1)%e,r++},u=function(){if(0!=r){var t=n[a];return n[a]=null,r--,a=(a+1)%e,t}},s=function(){for(var e=[];r;)e.push(u());return e};return{isEmpty:function(){return 0==r},put:function(u){var c;if(r<e)o(u);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[i]=u,a=i=(i+1)%e;break;case 4:c=2*e,n=s(),r=n.length,i=n.length,a=0,n.length=c,e=c,o(u)}},take:u,flush:s}}var Be=function(){return ze},qe=function(e){return Ve(e,4)},He="TAKE",We="PUT",Ge="ALL",Ze="RACE",Ke="CALL",Qe="CPS",Ye="FORK",Xe="JOIN",Je="CANCEL",$e="SELECT",et="ACTION_CHANNEL",tt="CANCELLED",nt="FLUSH",rt="GET_CONTEXT",it="SET_CONTEXT",at=function(e,t){var n;return(n={})[$]=!0,n.combinator=!1,n.type=e,n.payload=t,n};function ot(e,t){return void 0===e&&(e="*"),ve(e)?(ce(t)&&console.warn("take(pattern) takes one argument but two were provided. Consider passing an array for listening to several action types"),at(He,{pattern:e})):ke(e)&&ce(t)&&ve(t)?at(He,{channel:e,pattern:t}):me(e)?(ce(t)&&console.warn("take(channel) takes one argument but two were provided. Second argument is ignored."),at(He,{channel:e})):void 0}function ut(e,t){return se(t)&&(t=e,e=void 0),at(We,{channel:e,action:t})}function st(e){var t=at(Ge,e);return t.combinator=!0,t}function ct(e,t){var n,r=null;return le(e)?n=e:(he(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&fe(n)&&le(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}function lt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return at(Ke,ct(e,n))}function ft(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return at(Ye,ct(e,n))}function ht(e){void 0===e&&(e=Se);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return at($e,{selector:e,args:n})}var dt=lt.bind(null,be);function pt(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}var vt=pt,mt=[],yt=0;function gt(e){try{wt(),e()}finally{_t()}}function kt(e){mt.push(e),yt||(wt(),xt())}function bt(e){try{return wt(),e()}finally{xt()}}function wt(){yt++}function _t(){yt--}function xt(){var e;for(_t();!yt&&void 0!==(e=mt.shift());)gt(e)}var St=function(e){return function(t){return e.some((function(e){return Nt(e)(t)}))}},Et=function(e){return function(t){return e(t)}},It=function(e){return function(t){return t.type===String(e)}},Tt=function(e){return function(t){return t.type===e}},Ct=function(){return _e};function Nt(e){var t="*"===e?Ct:fe(e)?It:he(e)?St:ye(e)?It:le(e)?Et:ge(e)?Tt:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var Rt={type:J},At=function(e){return e&&e.type===J};function Ot(e){void 0===e&&(e=qe());var t=!1,n=[];return{take:function(r){t&&e.isEmpty()?r(Rt):e.isEmpty()?(n.push(r),r.cancel=function(){Ie(n,r)}):r(e.take())},put:function(r){if(!t){if(0===n.length)return e.put(r);n.shift()(r)}},flush:function(n){t&&e.isEmpty()?n(Rt):n(e.flush())},close:function(){if(!t){t=!0;var e=n;n=[];for(var r=0,i=e.length;r<i;r++){(0,e[r])(Rt)}}}}}function Pt(){var e=function(){var e,t=!1,n=[],r=n,i=function(){r===n&&(r=n.slice())},a=function(){t=!0;var e=n=r;r=[],e.forEach((function(e){e(Rt)}))};return(e={})[te]=!0,e.put=function(e){if(!t)if(At(e))a();else for(var i=n=r,o=0,u=i.length;o<u;o++){var s=i[o];s[ee](e)&&(s.cancel(),s(e))}},e.take=function(e,n){void 0===n&&(n=Ct),t?e(Rt):(e[ee]=n,i(),r.push(e),e.cancel=Te((function(){i(),Ie(r,e)})))},e.close=a,e}(),t=e.put;return e.put=function(e){e[ne]?t(e):kt((function(){t(e)}))},e}var Dt=0,Lt=1,Mt=2,Ft=3;function Ut(e,t){var n=e[X];le(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var jt,zt=0,Vt=function(){return++zt};function Bt(e){e.isRunning()&&e.cancel()}var qt=((jt={})[He]=function(e,t,n){var r=t.channel,i=void 0===r?e.channel:r,a=t.pattern,o=t.maybe,u=function(e){e instanceof Error?n(e,!0):!At(e)||o?n(e):n(oe)};try{i.take(u,ce(a)?Nt(a):null)}catch(s){return void n(s,!0)}n.cancel=u.cancel},jt[We]=function(e,t,n){var r=t.channel,i=t.action,a=t.resolve;kt((function(){var t;try{t=(r?r.put:e.dispatch)(i)}catch(YC){return void n(YC,!0)}a&&de(t)?Ut(t,n):n(t)}))},jt[Ge]=function(e,t,n,r){var i=r.digestEffect,a=zt,o=Object.keys(t);if(0!==o.length){var u=Fe(t,n);o.forEach((function(e){i(t[e],a,u[e],e)}))}else n(he(t)?[]:{})},jt[Ze]=function(e,t,n,r){var i=r.digestEffect,a=zt,o=Object.keys(t),u=he(t)?Oe(o.length):{},s={},c=!1;o.forEach((function(e){var t=function(t,r){c||(r||Me(t)?(n.cancel(),n(t,r)):(n.cancel(),c=!0,u[e]=t,n(u)))};t.cancel=xe,s[e]=t})),n.cancel=function(){c||(c=!0,o.forEach((function(e){return s[e].cancel()})))},o.forEach((function(e){c||i(t[e],a,s[e],e)}))},jt[Ke]=function(e,t,n,r){var i=t.context,a=t.fn,o=t.args,u=r.task;try{var s=a.apply(i,o);if(de(s))return void Ut(s,n);if(pe(s))return void en(e,s,u.context,zt,Ue(a),!1,n);n(s)}catch(YC){n(YC,!0)}},jt[Qe]=function(e,t,n){var r=t.context,i=t.fn,a=t.args;try{var o=function(e,t){se(e)?n(t):n(e,!0)};i.apply(r,a.concat(o)),o.cancel&&(n.cancel=o.cancel)}catch(YC){n(YC,!0)}},jt[Ye]=function(e,t,n,r){var i=t.context,a=t.fn,o=t.args,u=t.detached,s=r.task,c=function(e){var t=e.context,n=e.fn,r=e.args;try{var i=n.apply(t,r);if(pe(i))return i;var a=!1;return Re((function(e){return a?{value:e,done:!0}:(a=!0,{value:i,done:!de(i)})}))}catch(o){return Re((function(){throw o}))}}({context:i,fn:a,args:o}),l=function(e,t){return e.isSagaIterator?{name:e.meta.name}:Ue(t)}(c,a);bt((function(){var t=en(e,c,s.context,zt,l,u,void 0);u?n(t):t.isRunning()?(s.queue.addTask(t),n(t)):t.isAborted()?s.queue.abort(t.error()):n(t)}))},jt[Xe]=function(e,t,n,r){var i=r.task,a=function(e,t){if(e.isRunning()){var n={task:i,cb:t};t.cancel=function(){e.isRunning()&&Ie(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(he(t)){if(0===t.length)return void n([]);var o=Fe(t,n);t.forEach((function(e,t){a(e,o[t])}))}else a(t,n)},jt[Je]=function(e,t,n,r){var i=r.task;t===re?Bt(i):he(t)?t.forEach(Bt):Bt(t),n()},jt[$e]=function(e,t,n){var r=t.selector,i=t.args;try{n(r.apply(void 0,[e.getState()].concat(i)))}catch(YC){n(YC,!0)}},jt[et]=function(e,t,n){var r=t.pattern,i=Ot(t.buffer),a=Nt(r),o=function t(n){At(n)||e.channel.take(t,a),i.put(n)},u=i.close;i.close=function(){o.cancel(),u()},e.channel.take(o,a),n(i)},jt[tt]=function(e,t,n,r){n(r.task.isCancelled())},jt[nt]=function(e,t,n){t.flush(n)},jt[rt]=function(e,t,n,r){n(r.task.context[t])},jt[it]=function(e,t,n,r){var i=r.task;Ee(i.context,t),n()},jt);function Ht(e,t){return e+"?"+t}function Wt(e){var t=e.name,n=e.location;return n?t+"  "+Ht(n.fileName,n.lineNumber):t}function Gt(e){var t=function(e,t){var n;return(n=[]).concat.apply(n,t.map(e))}((function(e){return e.cancelledTasks}),e);return t.length?["Tasks cancelled due to error:"].concat(t).join("\n"):""}var Zt=null,Kt=[],Qt=function(e){e.crashedEffect=Zt,Kt.push(e)},Yt=function(){Zt=null,Kt.length=0},Xt=function(e){Zt=e},Jt=function(){var e=Kt[0],t=Kt.slice(1),n=e.crashedEffect?function(e){var t=je(e);return t?t.code+"  "+Ht(t.fileName,t.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+Wt(e.meta)+(n?" \n when executing effect "+n:"")].concat(t.map((function(e){return"    created by "+Wt(e.meta)})),[Gt(Kt)]).join("\n")};function $t(e,t,n,r,i,a,o){var u;void 0===o&&(o=xe);var s,c,l=Dt,f=null,h=[],d=Object.create(n),p=function(e,t,n){var r,i=[],a=!1;function o(e){t(),s(),n(e,!0)}function u(t){i.push(t),t.cont=function(u,s){a||(Ie(i,t),t.cont=xe,s?o(u):(t===e&&(r=u),i.length||(a=!0,n(r))))}}function s(){a||(a=!0,i.forEach((function(e){e.cont=xe,e.cancel()})),i=[])}return u(e),{addTask:u,cancelAll:s,abort:o,getTasks:function(){return i}}}(t,(function(){h.push.apply(h,p.getTasks().map((function(e){return e.meta.name})))}),v);function v(t,n){if(n){if(l=Mt,Qt({meta:i,cancelledTasks:h}),m.isRoot){var r=Jt();Yt(),e.onError(t,{sagaStack:r})}c=t,f&&f.reject(t)}else t===ae?l=Lt:l!==Lt&&(l=Ft),s=t,f&&f.resolve(t);m.cont(t,n),m.joiners.forEach((function(e){e.cb(t,n)})),m.joiners=null}var m=((u={})[ie]=!0,u.id=r,u.meta=i,u.isRoot=a,u.context=d,u.joiners=[],u.queue=p,u.cancel=function(){l===Dt&&(l=Lt,p.cancelAll(),v(ae,!1))},u.cont=o,u.end=v,u.setContext=function(e){Ee(d,e)},u.toPromise=function(){return f||(f=vt(),l===Mt?f.reject(c):l!==Dt&&f.resolve(s)),f.promise},u.isRunning=function(){return l===Dt},u.isCancelled=function(){return l===Lt||l===Dt&&t.status===Lt},u.isAborted=function(){return l===Mt},u.result=function(){return s},u.error=function(){return c},u);return m}function en(e,t,n,r,i,a,o){var u=e.finalizeRunEffect((function(t,n,r){if(de(t))Ut(t,r);else if(pe(t))en(e,t,c.context,n,i,!1,r);else if(t&&t[$]){(0,qt[t.type])(e,t.payload,r,l)}else r(t)}));f.cancel=xe;var s={meta:i,cancel:function(){s.status===Dt&&(s.status=Lt,f(ae))},status:Dt},c=$t(e,s,n,r,i,a,o),l={task:c,digestEffect:h};return o&&(o.cancel=c.cancel),f(),c;function f(e,n){try{var i;n?(i=t.throw(e),Yt()):Le(e)?(s.status=Lt,f.cancel(),i=le(t.return)?t.return(ae):{done:!0,value:ae}):i=De(e)?le(t.return)?t.return():{done:!0}:t.next(e),i.done?(s.status!==Lt&&(s.status=Ft),s.cont(i.value)):h(i.value,r,f)}catch(YC){if(s.status===Lt)throw YC;s.status=Mt,s.cont(YC,!0)}}function h(t,n,r,i){void 0===i&&(i="");var a,o=Vt();function s(n,i){a||(a=!0,r.cancel=xe,e.sagaMonitor&&(i?e.sagaMonitor.effectRejected(o,n):e.sagaMonitor.effectResolved(o,n)),i&&Xt(t),r(n,i))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:o,parentEffectId:n,label:i,effect:t}),s.cancel=xe,r.cancel=function(){a||(a=!0,s.cancel(),s.cancel=xe,e.sagaMonitor&&e.sagaMonitor.effectCancelled(o))},u(t,o,s)}}function tn(e,t){var n=e.channel,r=void 0===n?Pt():n,i=e.dispatch,a=e.getState,o=e.context,u=void 0===o?{}:o,s=e.sagaMonitor,c=e.effectMiddlewares,l=e.onError,f=void 0===l?Ae:l;for(var h=arguments.length,d=new Array(h>2?h-2:0),p=2;p<h;p++)d[p-2]=arguments[p];var v=t.apply(void 0,d);var m,y=Vt();if(s&&(s.rootSagaStarted=s.rootSagaStarted||xe,s.effectTriggered=s.effectTriggered||xe,s.effectResolved=s.effectResolved||xe,s.effectRejected=s.effectRejected||xe,s.effectCancelled=s.effectCancelled||xe,s.actionDispatched=s.actionDispatched||xe,s.rootSagaStarted({effectId:y,saga:t,args:d})),c){var g=K.qC.apply(void 0,c);m=function(e){return function(t,n,r){return g((function(t){return e(t,n,r)}))(t)}}}else m=Se;var k={channel:r,dispatch:Pe(i),getState:a,sagaMonitor:s,onError:f,finalizeRunEffect:m};return bt((function(){var e=en(k,v,u,y,Ue(t),!0,void 0);return s&&s.effectResolved(y,e),e}))}var nn=function(e){var t,n=void 0===e?{}:e,r=n.context,i=void 0===r?{}:r,a=n.channel,o=void 0===a?Pt():a,u=n.sagaMonitor,s=x(n,["context","channel","sagaMonitor"]);function c(e){var n=e.getState,r=e.dispatch;return t=tn.bind(null,_({},s,{context:i,channel:o,dispatch:r,getState:n,sagaMonitor:u})),function(e){return function(t){u&&u.actionDispatched&&u.actionDispatched(t);var n=e(t);return o.put(t),n}}}return c.run=function(){return t.apply(void 0,arguments)},c.setContext=function(e){Ee(i,e)},c},rn=nn,an=n(413),on="SIGN_OUT",un="SIGN_IN_WITH_GOOGLE",sn="SET_AUTH_USER_STORE",cn="REMOVE_DATA_FROM_LOCAL_STORAGE",ln="SET_AUTH_USER_DATABASE_ID_STORE",fn="SET_USER_DATA_FROM_LOCAL_STORAGE_STORE",hn=function(e){return{type:sn,payload:e}},dn=function(e){return{type:"SET_DATA_TO_LOCAL_STORAGE",payload:e}},pn=function(e){return{type:cn,payload:e}},vn=function(e){return{type:ln,payload:e}},mn=function(e){return{type:fn,payload:e}},yn={userId:"",userDocId:""},gn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sn:return(0,an.Z)((0,an.Z)({},e),{},{userId:t.payload});case ln:return(0,an.Z)((0,an.Z)({},e),{},{userDocId:t.payload});case fn:return(0,an.Z)((0,an.Z)({},e),t.payload);default:return e}},kn="SEND_MESSAGE",bn="SET_USERS_MESSAGES_STORE",wn="SET_USER_MESSAGE",_n=function(e){return{type:wn,payload:e}},xn={messages:[]},Sn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn,t=arguments.length>1?arguments[1]:void 0;return t.type===bn?(0,an.Z)((0,an.Z)({},e),{},{messages:[].concat(w(e.messages),w(t.payload))}):e},En="SET_QUESTIONS",In="CLEAR_QUESTIONS_STORE",Tn="SET_ANSWERS_LIST_STORE",Cn="SET_QUESTIONS_LIST_STORE",Nn="CLEAR_USERS_RESULTS_STORE",Rn="CLEAR_ANSWERS_LIST_STORE",An="SET_IS_SHOW_RESULTS_STORE",On="SET_QUESTIONS_DOC_ID_STORE",Pn="SET_CURRENT_QUESTION_STORE",Dn="CLEAR_CURRENT_QUESTION_STORE",Ln="SET_CORRECT_ANSWER_DOC_ID_STORE",Mn="SET_CORRECT_ANSWERS_COUNT_STORE",Fn="SET_USER_RESULTS_RESPONSE_STORE",Un="SET_CURRENT_USER_READINESS_STORE",jn="CLEAR_CORRECT_ANSWERS_COUNT_STORE",zn="CLEAR_CURRENT_USER_READINESS_STORE",Vn="SET_IS_USER_READY_TO_START_QUIZ_STORE",Bn="SET_QUIZ_DATA_FROM_LOCAL_STORAGE_STORE",qn="SET_DATA_TO_LOCAL_STORAGE",Hn="REMOVE_ITEM_FROM_LOCAL_STORAGE",Wn="GET_QUIZ_DATA_FROM_LOCAL_STORAGE",Gn="GET_ITEM_FROM_LOCAL_STORAGE_TO_STORE",Zn="SET_IS_READY_FOR_GAME",Kn="SET_IS_SHOW_RESULTS",Qn="SET_USER_RESULTS_RESPONSE",Yn=function(e){return{type:En,payload:e}},Xn=function(e){return{type:In,payload:e}},Jn=function(e){return{type:Rn,payload:e}},$n=function(e){return{type:Qn,payload:e}},er=function(e){return{type:qn,payload:e}},tr=function(e){return{type:An,payload:e}},nr=function(e){return{type:Cn,payload:e}},rr=function(e){return{type:Nn,payload:e}},ir=function(e){return{type:On,payload:e}},ar=function(e){return{type:Pn,payload:e}},or=function(e){return{type:Dn,payload:e}},ur=function(e){return{type:Ln,payload:e}},sr=function(e){return{type:Hn,payload:e}},cr=function(e){return{type:Wn,payload:e}},lr=function(e){return{type:Fn,payload:e}},fr=function(e){return{type:jn,payload:e}},hr=function(e){return{type:Un,payload:e}},dr=function(e){return{type:Gn,payload:e}},pr=function(e){return{type:Vn,payload:e}},vr=function(e){return{type:Bn,payload:e}},mr={answersList:[],questionsList:[],isShowResults:!1,questionsDocId:"",currentQuestion:[],usersResultsList:[],correctAnswersCount:0,currentUserReadiness:[],isUserReadyToStartQuiz:!1,correctAnswersCountDocId:""},yr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case In:return(0,an.Z)((0,an.Z)({},e),{},{questionsList:[]});case Tn:return(0,an.Z)((0,an.Z)({},e),{},{answersList:[].concat(w(e.answersList),[t.payload])});case Cn:return(0,an.Z)((0,an.Z)({},e),{},{questionsList:w(t.payload)});case Nn:return(0,an.Z)((0,an.Z)({},e),{},{usersResultsList:[]});case Rn:return(0,an.Z)((0,an.Z)({},e),{},{answersList:[]});case An:return(0,an.Z)((0,an.Z)({},e),{},{isShowResults:t.payload});case On:return(0,an.Z)((0,an.Z)({},e),{},{questionsDocId:t.payload});case Pn:return(0,an.Z)((0,an.Z)({},e),{},{currentQuestion:[t.payload]});case Dn:return(0,an.Z)((0,an.Z)({},e),{},{currentQuestion:[]});case Ln:return(0,an.Z)((0,an.Z)({},e),{},{correctAnswersCountDocId:t.payload});case Mn:return(0,an.Z)((0,an.Z)({},e),{},{correctAnswersCount:e.correctAnswersCount+1});case Fn:return(0,an.Z)((0,an.Z)({},e),{},{usersResultsList:[].concat(w(e.usersResultsList),w(t.payload))});case Un:return(0,an.Z)((0,an.Z)({},e),{},{currentUserReadiness:[t.payload]});case jn:return(0,an.Z)((0,an.Z)({},e),{},{correctAnswersCount:0});case zn:return(0,an.Z)((0,an.Z)({},e),{},{currentUserReadiness:[]});case Vn:return(0,an.Z)((0,an.Z)({},e),{},{isUserReadyToStartQuiz:t.payload});case Bn:return(0,an.Z)((0,an.Z)({},e),t.payload);default:return e}},gr=(0,K.UY)({userState:gn,chatState:Sn,quizState:yr}),kr=n(2);function br(){br=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,o=Object.create(a.prototype),u=new R(r||[]);return i(o,"_invoke",{value:I(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",v="completed",m={};function y(){}function g(){}function k(){}var b={};c(b,o,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(A([])));_&&_!==n&&r.call(_,o)&&(b=_);var x=k.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,o,u){var s=f(e[i],e,a);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==(0,kr.Z)(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(l).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function I(t,n,r){var i=h;return function(a,o){if(i===p)throw new Error("Generator is already running");if(i===v){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var u=r.delegate;if(u){var s=T(u,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=f(t,n,r);if("normal"===c.type){if(i=r.done?v:d,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=v,r.method="throw",r.arg=c.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=f(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError((0,kr.Z)(t)+" is not iterable")}return g.prototype=k,i(x,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:g,configurable:!0}),g.displayName=c(k,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,c(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(E.prototype),c(E.prototype,u,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new E(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),c(x,s,"Generator"),c(x,o,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}var wr=function(e){return{done:!0,value:e}},_r={};function xr(e){return me(e)?"channel":ye(e)?String(e):le(e)?e.name:String(e)}function Sr(e,t,n){var r,i,a,o=t;function u(t,n){if(o===_r)return wr(t);if(n&&!i)throw o=_r,n;r&&r(t);var u=n?e[i](n):e[o]();return o=u.nextState,a=u.effect,r=u.stateUpdater,i=u.errorState,o===_r?wr(t):a}return Re(u,(function(e){return u(null,e)}),n)}function Er(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o={done:!1,value:ot(e)},u=function(e){return a=e};return Sr({q1:function(){return{nextState:"q2",effect:o,stateUpdater:u}},q2:function(){return{nextState:"q1",effect:(e=a,{done:!1,value:ft.apply(void 0,[t].concat(r,[e]))})};var e}},"q1","takeEvery("+xr(e)+", "+t.name+")")}function Ir(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return ft.apply(void 0,[Er,e,t].concat(r))}function Tr(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(YC){return void n(YC)}u.done?t(s):Promise.resolve(s).then(r,i)}function Cr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Tr(a,r,i,o,u,"next",e)}function u(e){Tr(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Nr=n(942);function Rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ar=n(142);function Or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,Ar.Z)(r.key),r)}}function Pr(e,t,n){return t&&Or(e.prototype,t),n&&Or(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dr(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mr(e,t){return Mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mr(e,t)}function Fr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mr(e,t)}function Ur(e){return Ur=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ur(e)}function jr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function zr(e,t){if(t&&("object"===(0,kr.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Lr(e)}function Vr(e){var t=jr();return function(){var n,r=Ur(e);if(t){var i=Ur(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zr(this,n)}}function Br(e,t,n){return Br=jr()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Mr(i,n.prototype),i},Br.apply(null,arguments)}function qr(e){var t="function"===typeof Map?new Map:void 0;return qr=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Br(e,arguments,Ur(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Mr(n,e)},qr(e)}var Hr=!1,Wr=!1,Gr="${JSCORE_VERSION}",Zr=function(e,t){if(!e)throw Kr(t)},Kr=function(e){return new Error("Firebase Database ("+Gr+") INTERNAL ASSERT FAILED: "+e)},Qr=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Yr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Qr(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new Xr;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Xr=function(e){Fr(n,e);var t=Vr(n);function n(){var e;return Rr(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return Pr(n)}(qr(Error)),Jr=function(e){var t=Qr(e);return Yr.encodeByteArray(t,!0)},$r=function(e){return Jr(e).replace(/\./g,"")},ei=function(e){try{return Yr.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ti(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ti(e[n],t[n]));return e}function ni(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}var ri=function(){try{return ni().__FIREBASE_DEFAULTS__||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/Chat-Quiz-Website-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&ei(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},ii=function(e){var t=function(e){var t,n;return null===(n=null===(t=ri())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]}(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},ai=function(){var e;return null===(e=ri())||void 0===e?void 0:e.config},oi=function(){function e(){var t=this;Rr(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Pr(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ui(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[$r(JSON.stringify({alg:"none",type:"JWT"})),$r(JSON.stringify(a)),""].join(".")}function si(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ci(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(si())}function li(){var e,t=null===(e=ri())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function fi(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function hi(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function di(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function pi(){var e=si();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function vi(){return!0===Hr||!0===Wr}function mi(){return!li()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yi(){try{return"object"===typeof indexedDB}catch(e){return!1}}var gi=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i){var a;return Rr(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Lr(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Lr(a),ki.prototype.create),a}return Pr(n)}(qr(Error)),ki=function(){function e(t,n,r){Rr(this,e),this.service=t,this.serviceName=n,this.errors=r}return Pr(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(bi,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new gi(n,a,t)}}]),e}();var bi=/\{\$([^}]+)}/g;function wi(e){return JSON.parse(e)}function _i(e){return JSON.stringify(e)}var xi=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=wi(ei(a[0])||""),n=wi(ei(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Si(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ei(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Ii(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ti(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Ci(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Ni(u)&&Ni(s)){if(!Ci(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Ni(e){return null!==e&&"object"===typeof e}function Ri(e){for(var t=[],n=function(){var e=k(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Ai(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=k(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Oi(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Pi=function(){function e(){Rr(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return Pr(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=h^l&(f^h),s=1518500249):(u=l^f^h,s=1859775393):p<60?(u=l&f|h&(l|f),s=2400959708):(u=l^f^h,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function Di(e,t){var n=new Li(e,t);return n.subscribe.bind(n)}var Li=function(){function e(t,n){var r=this;Rr(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Pr(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Dr(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Mi),void 0===r.error&&(r.error=Mi),void 0===r.complete&&(r.complete=Mi);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Mi(){}function Fi(e,t){return"".concat(e," failed: ").concat(t," argument ")}var Ui=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ji(e){return e&&e._delegate?e._delegate:e}var zi=function(){function e(t,n,r){Rr(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Pr(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Vi="[DEFAULT]",Bi=function(){function e(t,n){Rr(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Pr(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new oi;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Vi})}catch(s){}var t,n=Dr(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=k(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vi;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Cr(br().mark((function e(){var t;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(w(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),w(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vi;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vi;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Dr(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=k(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Dr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:qi(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(a){}return i||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vi;return this.component?this.component.multipleInstances?e:Vi:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();function qi(e){return e===Vi?void 0:e}var Hi,Wi,Gi=function(){function e(t){Rr(this,e),this.name=t,this.providers=new Map}return Pr(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Bi(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Zi=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Wi||(Wi={}));var Ki={debug:Wi.DEBUG,verbose:Wi.VERBOSE,info:Wi.INFO,warn:Wi.WARN,error:Wi.ERROR,silent:Wi.SILENT},Qi=Wi.INFO,Yi=(Hi={},(0,Nr.Z)(Hi,Wi.DEBUG,"log"),(0,Nr.Z)(Hi,Wi.VERBOSE,"log"),(0,Nr.Z)(Hi,Wi.INFO,"info"),(0,Nr.Z)(Hi,Wi.WARN,"warn"),(0,Nr.Z)(Hi,Wi.ERROR,"error"),Hi),Xi=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Yi[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Ji=function(){function e(t){Rr(this,e),this.name=t,this._logLevel=Qi,this._logHandler=Xi,this._userLogHandler=null,Zi.push(this)}return Pr(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Wi))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ki[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Wi.DEBUG].concat(t)),this._logHandler.apply(this,[this,Wi.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Wi.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Wi.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Wi.INFO].concat(t)),this._logHandler.apply(this,[this,Wi.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Wi.WARN].concat(t)),this._logHandler.apply(this,[this,Wi.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Wi.ERROR].concat(t)),this._logHandler.apply(this,[this,Wi.ERROR].concat(t))}}]),e}();var $i,ea,ta=function(e,t){return t.some((function(t){return e instanceof t}))};var na=new WeakMap,ra=new WeakMap,ia=new WeakMap,aa=new WeakMap,oa=new WeakMap;var ua={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ra.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ia.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return la(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function sa(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ea||(ea=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(fa(this),n),la(na.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return la(e.apply(fa(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[fa(this),t].concat(r));return ia.set(a,t.sort?t.sort():[t]),la(a)}}function ca(e){return"function"===typeof e?sa(e):(e instanceof IDBTransaction&&function(e){if(!ra.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ra.set(e,t)}}(e),ta(e,$i||($i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ua):e)}function la(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(la(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&na.set(t,e)})).catch((function(){})),oa.set(t,e),t}(e);if(aa.has(e))return aa.get(e);var t=ca(e);return t!==e&&(aa.set(e,t),oa.set(t,e)),t}var fa=function(e){return oa.get(e)};var ha,da,pa=["get","getKey","getAll","getAllKeys","count"],va=["put","add","delete","clear"],ma=new Map;function ya(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(ma.get(t))return ma.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=va.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||pa.includes(n))){var a=function(){var e=Cr(br().mark((function e(t){var a,o,u,s,c,l,f=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return ma.set(t,a),a}}}ua=function(e){return(0,an.Z)((0,an.Z)({},e),{},{get:function(t,n,r){return ya(t,n)||e.get(t,n,r)},has:function(t,n){return!!ya(t,n)||e.has(t,n)}})}(ua);var ga=function(){function e(t){Rr(this,e),this.container=t}return Pr(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var ka="@firebase/app",ba="0.10.13",wa=new Ji("@firebase/app"),_a="[DEFAULT]",xa=(ha={},(0,Nr.Z)(ha,ka,"fire-core"),(0,Nr.Z)(ha,"@firebase/app-compat","fire-core-compat"),(0,Nr.Z)(ha,"@firebase/analytics","fire-analytics"),(0,Nr.Z)(ha,"@firebase/analytics-compat","fire-analytics-compat"),(0,Nr.Z)(ha,"@firebase/app-check","fire-app-check"),(0,Nr.Z)(ha,"@firebase/app-check-compat","fire-app-check-compat"),(0,Nr.Z)(ha,"@firebase/auth","fire-auth"),(0,Nr.Z)(ha,"@firebase/auth-compat","fire-auth-compat"),(0,Nr.Z)(ha,"@firebase/database","fire-rtdb"),(0,Nr.Z)(ha,"@firebase/data-connect","fire-data-connect"),(0,Nr.Z)(ha,"@firebase/database-compat","fire-rtdb-compat"),(0,Nr.Z)(ha,"@firebase/functions","fire-fn"),(0,Nr.Z)(ha,"@firebase/functions-compat","fire-fn-compat"),(0,Nr.Z)(ha,"@firebase/installations","fire-iid"),(0,Nr.Z)(ha,"@firebase/installations-compat","fire-iid-compat"),(0,Nr.Z)(ha,"@firebase/messaging","fire-fcm"),(0,Nr.Z)(ha,"@firebase/messaging-compat","fire-fcm-compat"),(0,Nr.Z)(ha,"@firebase/performance","fire-perf"),(0,Nr.Z)(ha,"@firebase/performance-compat","fire-perf-compat"),(0,Nr.Z)(ha,"@firebase/remote-config","fire-rc"),(0,Nr.Z)(ha,"@firebase/remote-config-compat","fire-rc-compat"),(0,Nr.Z)(ha,"@firebase/storage","fire-gcs"),(0,Nr.Z)(ha,"@firebase/storage-compat","fire-gcs-compat"),(0,Nr.Z)(ha,"@firebase/firestore","fire-fst"),(0,Nr.Z)(ha,"@firebase/firestore-compat","fire-fst-compat"),(0,Nr.Z)(ha,"@firebase/vertexai-preview","fire-vertex"),(0,Nr.Z)(ha,"fire-js","fire-js"),(0,Nr.Z)(ha,"firebase","fire-js-all"),ha),Sa=new Map,Ea=new Map,Ia=new Map;function Ta(e,t){try{e.container.addComponent(t)}catch(n){wa.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ca(e,t){e.container.addOrOverwriteComponent(t)}function Na(e){var t=e.name;if(Ia.has(t))return wa.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ia.set(t,e);var n,r=Dr(Sa.values());try{for(r.s();!(n=r.n()).done;){Ta(n.value,e)}}catch(o){r.e(o)}finally{r.f()}var i,a=Dr(Ea.values());try{for(a.s();!(i=a.n()).done;){Ta(i.value,e)}}catch(o){a.e(o)}finally{a.f()}return!0}function Ra(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Aa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_a;Ra(e,t).clearInstance(n)}function Oa(e){return void 0!==e.options}function Pa(e){return void 0!==e.settings}function Da(){Ia.clear()}var La=(da={},(0,Nr.Z)(da,"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),(0,Nr.Z)(da,"bad-app-name","Illegal App name: '{$appName}'"),(0,Nr.Z)(da,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,Nr.Z)(da,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,Nr.Z)(da,"server-app-deleted","Firebase Server App has been deleted"),(0,Nr.Z)(da,"no-options","Need to provide options, when not being deployed to hosting via source."),(0,Nr.Z)(da,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,Nr.Z)(da,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,Nr.Z)(da,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),(0,Nr.Z)(da,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),(0,Nr.Z)(da,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),(0,Nr.Z)(da,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),(0,Nr.Z)(da,"finalization-registry-not-supported","FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry."),(0,Nr.Z)(da,"invalid-server-app-environment","FirebaseServerApp is not for use in browser environments."),da),Ma=new ki("app","Firebase",La),Fa=function(){function e(t,n,r){var i=this;Rr(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zi("app",(function(){return i}),"PUBLIC"))}return Pr(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ma.create("app-deleted",{appName:this._name})}}]),e}(),Ua=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i,a){var o;Rr(this,n);var u=void 0!==r.automaticDataCollectionEnabled&&r.automaticDataCollectionEnabled,s={name:i,automaticDataCollectionEnabled:u};if(void 0!==e.apiKey)o=t.call(this,e,s,a);else{var c=e;o=t.call(this,c.options,s,a)}return o._serverConfig=Object.assign({automaticDataCollectionEnabled:u},r),o._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(o._finalizationRegistry=new FinalizationRegistry((function(){o.automaticCleanup()}))),o._refCount=0,o.incRefCount(o._serverConfig.releaseOnDeref),o._serverConfig.releaseOnDeref=void 0,r.releaseOnDeref=void 0,Ga(ka,ba,"serverapp"),zr(o)}return Pr(n,[{key:"toJSON",value:function(){}},{key:"refCount",get:function(){return this._refCount}},{key:"incRefCount",value:function(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}},{key:"decRefCount",value:function(){return this.isDeleted?0:--this._refCount}},{key:"automaticCleanup",value:function(){Ha(this)}},{key:"settings",get:function(){return this.checkDestroyed(),this._serverConfig}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ma.create("server-app-deleted")}}]),n}(Fa),ja="10.14.1";function za(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:_a,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ma.create("bad-app-name",{appName:String(i)});if(n||(n=ai()),!n)throw Ma.create("no-options");var a=Sa.get(i);if(a){if(Ci(n,a.options)&&Ci(r,a.config))return a;throw Ma.create("duplicate-app",{appName:i})}var o,u=new Gi(i),s=Dr(Ia.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Fa(n,r,u);return Sa.set(i,l),l}function Va(e,t){if(("undefined"!==typeof window||fi())&&!fi())throw Ma.create("invalid-server-app-environment");var n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=Oa(e)?e.options:e;var r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Ma.create("finalization-registry-not-supported",{});var i=""+w(JSON.stringify(r)).reduce((function(e,t){return Math.imul(31,e)+t.charCodeAt(0)|0}),0),a=Ea.get(i);if(a)return a.incRefCount(t.releaseOnDeref),a;var o,u=new Gi(i),s=Dr(Ia.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Ua(n,t,i,u);return Ea.set(i,l),l}function Ba(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_a,t=Sa.get(e);if(!t&&e===_a&&ai())return za();if(!t)throw Ma.create("no-app",{appName:e});return t}function qa(){return Array.from(Sa.values())}function Ha(e){return Wa.apply(this,arguments)}function Wa(){return(Wa=Cr(br().mark((function e(t){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,r=t.name,Sa.has(r)?(n=!0,Sa.delete(r)):Ea.has(r)&&t.decRefCount()<=0&&(Ea.delete(r),n=!0),!n){e.next=7;break}return e.next=6,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 6:t.isDeleted=!0;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ga(e,t,n){var r,i=null!==(r=xa[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void wa.warn(u.join(" "))}Na(new zi("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Za(e,t){if(null!==e&&"function"!==typeof e)throw Ma.create("invalid-log-argument");!function(e,t){var n,r=Dr(Zi);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Ki[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Wi[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Ka(e){var t;t=e,Zi.forEach((function(e){e.setLogLevel(t)}))}var Qa="firebase-heartbeat-database",Ya=1,Xa="firebase-heartbeat-store",Ja=null;function $a(){return Ja||(Ja=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=la(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(la(u.result),e.oldVersion,e.newVersion,la(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Qa,Ya,{upgrade:function(e,t){if(0===t)try{e.createObjectStore(Xa)}catch(n){console.warn(n)}}}).catch((function(e){throw Ma.create("idb-open",{originalErrorMessage:e.message})}))),Ja}function eo(e){return to.apply(this,arguments)}function to(){return(to=Cr(br().mark((function e(t){var n,r,i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$a();case 3:return n=e.sent,r=n.transaction(Xa),e.next=7,r.objectStore(Xa).get(io(t));case 7:return i=e.sent,e.next=10,r.done;case 10:return e.abrupt("return",i);case 13:e.prev=13,e.t0=e.catch(0),e.t0 instanceof gi?wa.warn(e.t0.message):(a=Ma.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),wa.warn(a.message));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function no(e,t){return ro.apply(this,arguments)}function ro(){return(ro=Cr(br().mark((function e(t,n){var r,i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$a();case 3:return r=e.sent,i=r.transaction(Xa,"readwrite"),a=i.objectStore(Xa),e.next=8,a.put(n,io(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof gi?wa.warn(e.t0.message):(o=Ma.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),wa.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function io(e){return"".concat(e.name,"!").concat(e.options.appId)}var ao=function(){function e(t){var n=this;Rr(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new lo(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Pr(e,[{key:"triggerHeartbeat",value:function(){var e=Cr(br().mark((function e(){var t,n,r,i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=this.container.getProvider("platform-logger").getImmediate(),i=r.getPlatformInfoString(),a=oo(),null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)){e.next=10;break}return e.next=7,this._heartbeatsCachePromise;case 7:if(this._heartbeatsCache=e.sent,null!=(null===(n=this._heartbeatsCache)||void 0===n?void 0:n.heartbeats)){e.next=10;break}return e.abrupt("return");case 10:if(this._heartbeatsCache.lastSentHeartbeatDate!==a&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===a}))){e.next=14;break}return e.abrupt("return");case 14:this._heartbeatsCache.heartbeats.push({date:a,agent:i});case 15:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 19:e.prev=19,e.t0=e.catch(0),wa.warn(e.t0);case 22:case"end":return e.stop()}}),e,this,[[0,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Cr(br().mark((function e(){var t,n,r,i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==this._heartbeatsCache){e.next=4;break}return e.next=4,this._heartbeatsCachePromise;case 4:if(null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&0!==this._heartbeatsCache.heartbeats.length){e.next=6;break}return e.abrupt("return","");case 6:if(n=oo(),r=uo(this._heartbeatsCache.heartbeats),i=r.heartbeatsToSend,a=r.unsentEntries,o=$r(JSON.stringify({version:2,heartbeats:i})),this._heartbeatsCache.lastSentHeartbeatDate=n,!(a.length>0)){e.next=16;break}return this._heartbeatsCache.heartbeats=a,e.next=14,this._storage.overwrite(this._heartbeatsCache);case 14:e.next=18;break;case 16:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 18:return e.abrupt("return",o);case 21:return e.prev=21,e.t0=e.catch(0),wa.warn(e.t0),e.abrupt("return","");case 25:case"end":return e.stop()}}),e,this,[[0,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function oo(){return(new Date).toISOString().substring(0,10)}function uo(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Dr(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),fo(r)>n)return a.dates.pop(),0}else if(r.push({agent:e.agent,dates:[e.date]}),fo(r)>n)return r.pop(),0;i=i.slice(1)};for(a.s();!(t=a.n()).done&&0!==o(););}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var so,co,lo=function(){function e(t){Rr(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Pr(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yi()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(YC){t(YC)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Cr(br().mark((function e(){var t;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,eo(this.app);case 9:if(!(null===(t=e.sent)||void 0===t?void 0:t.heartbeats)){e.next=14;break}return e.abrupt("return",t);case 14:return e.abrupt("return",{heartbeats:[]});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Cr(br().mark((function e(t){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",no(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Cr(br().mark((function e(t){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",no(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(w(r.heartbeats),w(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function fo(e){return $r(JSON.stringify({version:2,heartbeats:e})).length}so="",Na(new zi("platform-logger",(function(e){return new ga(e)}),"PRIVATE")),Na(new zi("heartbeat",(function(e){return new ao(e)}),"PRIVATE")),Ga(ka,ba,so),Ga(ka,ba,"esm2017"),Ga("fire-js","");var ho=function(){function e(t,n){var r=this;Rr(this,e),this._delegate=t,this.firebase=n,Ta(t,new zi("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Pr(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Ha(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_a;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_a;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ta(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ca(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),po=(co={},(0,Nr.Z)(co,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,Nr.Z)(co,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),co),vo=new ki("app-compat","Firebase",po);var mo=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=za(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Si(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Ga,setLogLevel:Ka,onLog:Za,apps:null,SDK_VERSION:ja,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Na(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw vo.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ti(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Si(n,e=e||_a))throw vo.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(ho);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ti(n,e)},createSubscribe:Di,ErrorFactory:ki,deepExtend:ti}),n}(),yo=new Ji("@firebase/app-compat");try{var go=ni();if(void 0!==go.firebase){yo.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");var ko=go.firebase.SDK_VERSION;ko&&ko.indexOf("LITE")>=0&&yo.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch(hq){}var bo=mo;!function(e){Ga("@firebase/app-compat","0.2.43",e)}();function wo(){return wo="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ur(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},wo.apply(this,arguments)}bo.registerVersion("firebase","10.14.1","app-compat");var _o,xo,So="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Eo={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,a=this.h,o=0;o<t;){if(0==a)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[a++]=e.charCodeAt(o++),a==this.blockSize){n(this,i),a=0;break}}else for(;o<t;)if(i[a++]=e[o++],a==this.blockSize){n(this,i),a=0;break}}this.h=a,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function a(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return u;if(0>e)return h(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var u=a(0),s=a(1),c=a(16777216);function l(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function f(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(s)}function d(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function m(e,t){if(l(t))throw Error("division by zero");if(l(e))return new v(u,u);if(f(e))return t=m(h(e),t),new v(h(t.g),h(t.h));if(f(t))return t=m(e,h(t)),new v(h(t.g),t.h);if(30<e.g.length){if(f(e)||f(t))throw Error("slowDivide_ only works with positive integers.");for(var n=s,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=g(n,1),a=g(r,1);for(r=g(r,2),n=g(n,2);!l(r);){var c=a.add(r);0>=c.l(e)&&(i=i.add(n),a=c),r=g(r,1),n=g(n,1)}return t=d(e,i.j(t)),new v(i,t)}for(i=u;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(a=o(n)).j(t);f(c)||0<c.l(e);)c=(a=o(n-=r)).j(t);l(a)&&(a=s),i=i.add(a),e=d(e,c)}return new v(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function g(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,a=[],o=0;o<i;o++)a[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(a,e.h)}(e=r.prototype).m=function(){if(f(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(l(this))return"0";if(f(this))return"-"+h(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,a=((0<(n=d(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(l(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return f(e=d(this,e))?-1:l(e)?0:1},e.abs=function(){return f(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,a=0;a<=t;a++){var o=i+(65535&this.i(a))+(65535&e.i(a)),u=(o>>>16)+(this.i(a)>>>16)+(e.i(a)>>>16);i=u>>>16,o&=65535,u&=65535,n[a]=u<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(l(this)||l(e))return u;if(f(this))return f(e)?h(this).j(h(e)):h(h(this).j(e));if(f(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var a=0;a<e.g.length;a++){var s=this.i(i)>>>16,d=65535&this.i(i),v=e.i(a)>>>16,m=65535&e.i(a);n[2*i+2*a]+=d*m,p(n,2*i+2*a),n[2*i+2*a+1]+=s*m,p(n,2*i+2*a+1),n[2*i+2*a+1]+=d*v,p(n,2*i+2*a+1),n[2*i+2*a+2]+=s*v,p(n,2*i+2*a+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,xo=Eo.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=u,a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+s),n);8>s?(s=o(Math.pow(n,s)),i=i.j(s).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},_o=Eo.Integer=r}).apply("undefined"!==typeof So?So:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Io,To,Co,No,Ro,Ao,Oo,Po,Do="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Lo={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Do&&Do];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break e;i=i[o]}(r=r(a=i[e=e[e.length-1]]))!=a&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function a(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function u(e,t,n){return e.call.apply(e.bind,arguments)}function s(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:s).apply(null,arguments)}function l(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function f(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function h(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function d(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(a(r)){var i=e.length||0,o=r.length||0;e.length=i+o;for(var u=0;u<o;u++)e[i+u]=r[u]}else e.push(r)}}var p=function(){function e(t,n){Rr(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Pr(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function v(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function y(e){return y[" "](e),e}y[" "]=function(){};var g=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function b(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function w(e){var t={};for(var n in e)t[n]=e[n];return t}var _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<_.length;a++)n=_[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){i.setTimeout((function(){throw e}),0)}function I(){var e=O,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T,C=function(){function e(){Rr(this,e),this.h=this.g=null}return Pr(e,[{key:"add",value:function(e,t){var n=N.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),N=new p((function(){return new R}),(function(e){return e.reset()})),R=function(){function e(){Rr(this,e),this.next=this.g=this.h=null}return Pr(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}(),A=!1,O=new C,P=function(){var e=i.Promise.resolve(void 0);T=function(){e.then(D)}},D=function(){for(var e;e=I();){try{e.h.call(e.g)}catch(n){E(n)}var t=N;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}A=!1};function L(){this.s=this.s,this.C=this.C}function M(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},M.prototype.h=function(){this.defaultPrevented=!0};var F=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{var n=function(){};i.addEventListener("test",n,t),i.removeEventListener("test",n,t)}catch(n){}return e}();function U(e,t){if(M.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(g){e:{try{y(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:j[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&U.aa.h.call(this)}}f(U,M);var j={2:"touch",3:"pen",4:"mouse"};U.prototype.h=function(){U.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var z="closure_listenable_"+(1e6*Math.random()|0),V=0;function B(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++V,this.da=this.fa=!1}function q(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function H(e){this.src=e,this.g={},this.h=0}function W(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Array.prototype.indexOf.call(i,t,void 0);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(q(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function G(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}H.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=G(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new B(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Z="closure_lm_"+(1e6*Math.random()|0),K={};function Q(e,t,n,r,i){if(r&&r.once)return X(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Q(e,t[a],n,r,i);return null}return n=ie(n),e&&e[z]?e.K(t,n,o(r)?!!r.capture:!!r,i):Y(e,t,n,!1,r,i)}function Y(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var u=o(i)?!!i.capture:!!i,s=ne(e);if(s||(e[Z]=s=new H(e)),(n=s.add(t,n,r,u,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=te;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)F||(i=u),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ee(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function X(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)X(e,t[a],n,r,i);return null}return n=ie(n),e&&e[z]?e.L(t,n,o(r)?!!r.capture:!!r,i):Y(e,t,n,!0,r,i)}function J(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)J(e,t[a],n,r,i);else r=o(r)?!!r.capture:!!r,n=ie(n),e&&e[z]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=G(a=e.g[t],n,r,i))&&(q(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ne(e))&&(t=e.g[t.toString()],e=-1,t&&(e=G(t,n,r,i)),(n=-1<e?t[e]:null)&&$(n))}function $(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[z])W(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ee(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ne(t))?(W(n,e),0==n.h&&(n.src=null,t[Z]=null)):q(e)}}}function ee(e){return e in K?K[e]:K[e]="on"+e}function te(e,t){if(e.da)e=!0;else{t=new U(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&$(e),e=n.call(r,t)}return e}function ne(e){return(e=e[Z])instanceof H?e:null}var re="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(e){return"function"===typeof e?e:(e[re]||(e[re]=function(t){return e.handleEvent(t)}),e[re])}function ae(){L.call(this),this.i=new H(this),this.M=this,this.F=null}function oe(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new M(t,e);else if(t instanceof M)t.target=t.target||e;else{var i=t;x(t=new M(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ue(o,r,!0,t)&&i}if(i=ue(o=t.g=e,r,!0,t)&&i,i=ue(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ue(o=t.g=n[a],r,!1,t)&&i}function ue(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.da&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.fa&&W(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ce(e){e.g=se((function(){e.g=null,e.i&&(e.i=!1,ce(e))}),e.l);var t=e.h;e.h=null,e.m.apply(null,t)}f(ae,L),ae.prototype[z]=!0,ae.prototype.removeEventListener=function(e,t,n,r){J(this,e,t,n,r)},ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)q(n[r]);delete t.g[e],t.h--}}this.F=null},ae.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ae.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var le=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this)).m=e,i.l=r,i.h=null,i.i=!1,i.g=null,i}return Pr(n,[{key:"j",value:function(e){this.h=arguments,this.g?this.i=!0:ce(this)}},{key:"N",value:function(){wo(Ur(n.prototype),"N",this).call(this),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(L);function fe(e){L.call(this),this.h=e,this.g={}}f(fe,L);var he=[];function de(e){b(e.g,(function(e,t){this.g.hasOwnProperty(t)&&$(e)}),e),e.g={}}fe.prototype.N=function(){fe.aa.N.call(this),de(this)},fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pe=i.JSON.stringify,ve=i.JSON.parse,me=function(){function e(){Rr(this,e)}return Pr(e,[{key:"stringify",value:function(e){return i.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return i.JSON.parse(e,void 0)}}]),e}();function ye(){}function ge(e){return e.h||(e.h=e.i())}function ke(){}ye.prototype.h=null;var be={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function we(){M.call(this,"d")}function _e(){M.call(this,"c")}f(we,M),f(_e,M);var xe={},Se=null;function Ee(){return Se=Se||new ae}function Ie(e){M.call(this,xe.La,e)}function Te(e){var t=Ee();oe(t,new Ie(t))}function Ce(e,t){M.call(this,xe.STAT_EVENT,e),this.stat=t}function Ne(e){var t=Ee();oe(t,new Ce(t,e))}function Re(e,t){M.call(this,xe.Ma,e),this.size=t}function Ae(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Oe(){this.g=!0}function Pe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return pe(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}xe.La="serverreachability",f(Ie,M),xe.STAT_EVENT="statevent",f(Ce,M),xe.Ma="timingevent",f(Re,M),Oe.prototype.xa=function(){this.g=!1},Oe.prototype.info=function(){};var De,Le={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Me={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Fe(){}function Ue(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new fe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new je}function je(){this.i=null,this.g="",this.h=!1}f(Fe,ye),Fe.prototype.g=function(){return new XMLHttpRequest},Fe.prototype.i=function(){return{}},De=new Fe;var ze={},Ve={};function Be(e,t,n){e.L=1,e.v=pt(ct(t)),e.m=n,e.P=!0,qe(e,null)}function qe(e,t){e.F=Date.now(),Ge(e),e.A=ct(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Ct(n.i,"t",r),e.C=0,n=e.j.J,e.h=new je,e.g=mn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new le(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(he[0]=i.toString()),i=he);for(var a=0;a<i.length;a++){var o=Q(n,i[a],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Te(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function He(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function We(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ve:(n=Number(t.substring(n,r)),isNaN(n)?ze:(r+=1)+n>t.length?Ve:(t=t.slice(r,r+n),e.C=r+n,t))}function Ge(e){e.S=Date.now()+e.I,Ze(e,e.I)}function Ze(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ae(c(e.ba,e),t)}function Ke(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Qe(e){0==e.j.G||e.J||fn(e.j,e)}function Ye(e){Ke(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,de(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Xe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||nt(n.h,e)))if(!e.K&&nt(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;ln(n),$t(n)}un(n),Ne(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ae(c(n.Za,n),6e3));if(1>=tt(n.h)&&n.ca){try{n.ca()}catch(a){}n.ca=void 0}}else dn(n,11)}else if((e.K||n.g==e)&&ln(n),!v(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.K=a[1],n.ia=a[2];var o=a[3];null!=o&&(n.la=o,n.j.info("VER="+n.la));var u=a[4];null!=u&&(n.Aa=u,n.j.info("SVER="+n.Aa));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var f=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(f){var h=r.h;h.g||-1==f.indexOf("spdy")&&-1==f.indexOf("quic")&&-1==f.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(rt(h,h.h),h.h=null))}if(r.D){var d=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.ya=d,dt(r.I,r.D,d))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var p=e;if((r=n).qa=vn(r,r.J?r.ia:null,r.W),p.K){it(r.h,p);var m=p,y=r.L;y&&(m.I=y),m.B&&(Ke(m),Ge(m)),r.g=p}else on(r);0<n.i.length&&tn(n)}else"stop"!=a[0]&&"close"!=a[0]||dn(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?dn(n,7):Jt(n):"noop"!=a[0]&&n.l&&n.l.ta(a),n.v=0)}Te()}catch(a){}}Ue.prototype.ca=function(e){e=e.target;var t=this.M;t&&3==Kt(e)?t.j():this.Y(e)},Ue.prototype.Y=function(e){try{if(e==this.g)e:{var t=Kt(this.g),n=this.g.Ba();this.g.Z();if(!(3>t)&&(3!=t||this.g&&(this.h.h||this.g.oa()||Qt(this.g)))){this.J||4!=t||7==n||Te(),Ke(this);var r=this.g.Z();this.X=r;t:if(He(this)){var a=Qt(this.g);e="";var o=a.length,u=4==Kt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ye(this),Qe(this);var s="";break t}this.h.i=new i.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:!(u&&n==o-1)});a.length=0,this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.i,this.u,this.A,this.l,this.R,t,r),this.o){if(this.T&&!this.K){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(c)){var f=c;break t}}f=null}if(!(r=f)){this.o=!1,this.s=3,Ne(12),Ye(this),Qe(this);break e}Pe(this.i,this.l,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xe(this,r)}if(this.P){var h;for(r=!0;!this.J&&this.C<s.length;){if((h=We(this,s))==Ve){4==t&&(this.s=4,Ne(14),r=!1),Pe(this.i,this.l,null,"[Incomplete Response]");break}if(h==ze){this.s=4,Ne(15),Pe(this.i,this.l,s,"[Invalid Chunk]"),r=!1;break}Pe(this.i,this.l,h,null),Xe(this,h)}if(He(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=t||0!=s.length||this.h.h||(this.s=1,Ne(16),r=!1),this.o=this.o&&r,r){if(0<s.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),sn(d),d.M=!0,Ne(11))}}else Pe(this.i,this.l,s,"[Invalid Chunked Response]"),Ye(this),Qe(this)}else Pe(this.i,this.l,s,null),Xe(this,s);4==t&&Ye(this),this.o&&!this.J&&(4==t?fn(this.j,this):(this.o=!1,Ge(this)))}else(function(e){var t={};e=(e.g&&2<=Kt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!v(e[n])){var r=S(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),Ye(this),Qe(this)}}}catch(t){}},Ue.prototype.cancel=function(){this.J=!0,Ye(this)},Ue.prototype.ba=function(){this.B=null;var e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Te(),Ne(17)),Ye(this),this.s=2,Qe(this)):Ze(this,this.S-e)};var Je=Pr((function e(t,n){Rr(this,e),this.g=t,this.map=n}));function $e(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function et(e){return!!e.h||!!e.g&&e.g.size>=e.j}function tt(e){return e.h?1:e.g?e.g.size:0}function nt(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function rt(e,t){e.g?e.g.add(t):e.h=t}function it(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function at(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Dr(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return h(e.i)}function ot(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(a(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(a(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(a(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}$e.prototype.cancel=function(){if(this.i=at(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Dr(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,lt(this,e.j),this.o=e.o,this.g=e.g,ft(this,e.s),this.l=e.l;var t=e.i,n=new St;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ht(this,n),this.m=e.m}else e&&(t=String(e).match(ut))?(this.h=!1,lt(this,t[1]||"",!0),this.o=vt(t[2]||""),this.g=vt(t[3]||"",!0),ft(this,t[4]),this.l=vt(t[5]||"",!0),ht(this,t[6]||"",!0),this.m=vt(t[7]||"")):(this.h=!1,this.i=new St(null,this.h))}function ct(e){return new st(e)}function lt(e,t,n){e.j=n?vt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ft(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ht(e,t,n){t instanceof St?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(It(this,t),Ct(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=mt(t,_t)),e.i=new St(t,e.h))}function dt(e,t,n){e.i.set(t,n)}function pt(e){return dt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function vt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function mt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,yt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function yt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(mt(t,kt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(mt(t,kt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(mt(n,"/"==n.charAt(0)?wt:bt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",mt(n,xt)),e.join("")};var gt,kt=/[#\/\?@]/g,bt=/[#\?:]/g,wt=/[#\?]/g,_t=/[#\?@]/g,xt=/#/g;function St(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function It(e,t){Et(e),t=Nt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Tt(e,t){return Et(e),t=Nt(e,t),e.g.has(t)}function Ct(e,t,n){It(e,t),0<n.length&&(e.i=null,e.g.set(Nt(e,t),h(n)),e.h+=n.length)}function Nt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Rt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(a){}}function At(){this.g=new me}function Ot(e,t,n){var r=n||"";try{ot(e,(function(e,n){var i=e;o(e)&&(i=pe(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Pt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Dt(e,t){ae.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Lt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Mt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ft(e)}function Ft(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ut(e){var t="";return b(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function jt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ut(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):dt(e,t,n))}function zt(e){ae.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=St.prototype).add=function(e,t){Et(this),this.i=null,e=Nt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Et(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},e.V=function(e){Et(this);var t=[];if("string"===typeof e)Tt(this,e)&&(t=t.concat(this.g.get(Nt(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,Tt(this,e=Nt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")},f(Pt,ye),Pt.prototype.g=function(){return new Dt(this.l,this.j)},Pt.prototype.i=(gt={},function(){return gt}),f(Dt,ae),(e=Dt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ft(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ft(this)),this.g&&(this.readyState=3,Ft(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Mt(this):Ft(this),3==this.readyState&&Lt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Mt(this))},e.Qa=function(e){this.g&&(this.response=e,Mt(this))},e.ga=function(){this.g&&Mt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Dt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),f(zt,ae);var Vt=/^https?$/i,Bt=["POST","PUT"];function qt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ht(e),Gt(e)}function Ht(e){e.A||(e.A=!0,oe(e,"complete"),oe(e,"error"))}function Wt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Kt(e)||2!=e.Z()))if(e.u&&4==Kt(e))se(e.Ea,0,e);else if(oe(e,"readystatechange"),4==Kt(e)){e.h=!1;try{var t,n=e.Z();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break e;default:a=!1}if(!(t=a)){var o;if(o=0===n){var u=String(e.D).match(ut)[1]||null;!u&&i.self&&i.self.location&&(u=i.self.location.protocol.slice(0,-1)),o=!Vt.test(u?u.toLowerCase():"")}t=o}if(t)oe(e,"complete"),oe(e,"success");else{e.m=6;try{var s=2<Kt(e)?e.g.statusText:""}catch(c){s=""}e.l=s+" ["+e.Z()+"]",Ht(e)}}finally{Gt(e)}}}function Gt(e,t){if(e.g){Zt(e);var n=e.g,r=e.v[0]?function(){}:null;e.g=null,e.v=null,t||oe(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Zt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Kt(e){return e.g?e.g.readyState:0}function Qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(jo){return null}}function Yt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xt(e){this.Aa=0,this.i=[],this.j=new Oe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yt("baseRetryDelayMs",5e3,e),this.cb=Yt("retryDelaySeedMs",1e4,e),this.Wa=Yt("forwardChannelMaxRetries",2,e),this.wa=Yt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new $e(e&&e.concurrentRequestLimit),this.Da=new At,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Jt(e){if(en(e),3==e.G){var t=e.U++,n=ct(e.I);if(dt(n,"SID",e.K),dt(n,"RID",t),dt(n,"TYPE","terminate"),rn(e,n),(t=new Ue(e,e.j,t)).L=2,t.v=pt(ct(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=mn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ge(t)}pn(e)}function $t(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function en(e){$t(e),e.u&&(i.clearTimeout(e.u),e.u=null),ln(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function tn(e){if(!et(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||P(),A||(T(),A=!0),O.add(t,e),e.B=0}}function nn(e,t){var n;n=t?t.l:e.U++;var r=ct(e.I);dt(r,"SID",e.K),dt(r,"RID",n),dt(r,"AID",e.T),rn(e,r),e.m&&e.o&&jt(r,e.m,e.o),n=new Ue(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=an(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),rt(e.h,n),Be(n,r,t)}function rn(e,t){e.H&&b(e.H,(function(e,n){dt(t,n,e)})),e.l&&ot({},(function(e,n){dt(t,n,e)}))}function an(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var l=i[s].g,f=i[s].map;if(0>(l-=a))a=Math.max(0,i[s].g-100),u=!1;else try{Ot(f,o,"req"+l+"_")}catch(Mo){r&&r(f)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function on(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||P(),A||(T(),A=!0),O.add(t,e),e.v=0}}function un(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ae(c(e.Fa,e),hn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function cn(e){e.g=new Ue(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ct(e.qa);dt(t,"RID","rpc"),dt(t,"SID",e.K),dt(t,"AID",e.T),dt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&dt(t,"TO",e.ja),dt(t,"TYPE","xmlhttp"),rn(e,t),e.m&&e.o&&jt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=pt(ct(t)),n.m=null,n.P=!0,qe(n,e)}function ln(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function fn(e,t){var n=null;if(e.g==t){ln(e),sn(e),e.g=null;var r=2}else{if(!nt(e.h,t))return;n=t.D,it(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;oe(r=Ee(),new Re(r,n)),tn(e)}else on(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(tt(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ae(c(e.Ga,e,t),hn(e,e.B)),e.B++,!0))}(e,t)||2==r&&un(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:dn(e,5);break;case 4:dn(e,10);break;case 3:dn(e,6);break;default:dn(e,2)}}function hn(e,t){var n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function dn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa,a=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||lt(r,"https"),pt(r),a?function(e,t){var n=new Oe;if(i.Image){var r=new Image;r.onload=l(Rt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=l(Rt,n,"TestLoadImage: error",!1,t,r),r.onabort=l(Rt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=l(Rt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Oe;var n=new AbortController,r=setTimeout((function(){n.abort(),Rt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((function(e){clearTimeout(r),e.ok?Rt(0,0,!0,t):Rt(0,0,!1,t)})).catch((function(){clearTimeout(r),Rt(0,0,!1,t)}))}(r.toString(),n)}else Ne(2);e.G=0,e.l&&e.l.sa(t),pn(e),en(e)}function pn(e){if(e.G=0,e.ka=[],e.l){var t=at(e.h);0==t.length&&0==e.i.length||(d(e.ka,t),d(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function vn(e,t,n){var r=n instanceof st?ct(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ft(r,r.s);else{var a=i.location;r=a.protocol,t=t?t+"."+a.hostname:a.hostname,a=+a.port;var o=new st(null);r&&lt(o,r),t&&(o.g=t),a&&ft(o,a),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&dt(r,n,t),dt(r,"VER",e.la),rn(e,r),r}function mn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new zt(new Pt({eb:n})):new zt(e.pa)).Ha(e.J),t}function yn(){}function gn(){}function kn(e,t){ae.call(this),this.g=new Xt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!v(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!v(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _n(this)}function bn(e){we.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function wn(){_e.call(this),this.status=1}function _n(e){this.g=e}(e=zt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():De.g(),this.v=this.o?ge(this.o):ge(De),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(s){return void qt(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var o,u=Dr(r.keys());try{for(u.s();!(o=u.n()).done;){var s=o.value;n.set(s,r.get(s))}}catch(v){u.e(v)}finally{u.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),a=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Bt,t,void 0))||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var l,f=Dr(n);try{for(f.s();!(l=f.n()).done;){var h=k(l.value,2),d=h[0],p=h[1];this.g.setRequestHeader(d,p)}}catch(v){f.e(v)}finally{f.f()}this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zt(this),this.u=!0,this.g.send(e),this.u=!1}catch(s){qt(this,s)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,oe(this,"complete"),oe(this,"abort"),Gt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gt(this,!0)),zt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Wt(this):this.bb())},e.bb=function(){Wt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ve(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Xt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ne(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=vn(this,null,this.W),tn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Ue(this,this.j,e),n=this.o;if(this.S&&(n?x(n=w(n),this.S):n=this.S),null!==this.m||this.O||(t.H=n,n=null),this.P)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=an(this,t,r),dt(i=ct(this.I),"RID",e),dt(i,"CVER",22),this.D&&dt(i,"X-HTTP-Session-Id",this.D),rn(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Ut(n)))+"&"+r:this.m&&jt(i,this.m,n)),rt(this.h,t),this.Ua&&dt(i,"TYPE","init"),this.P?(dt(i,"$req",r),dt(i,"SID","null"),t.T=!0,Be(t,i,null)):Be(t,i,r),this.G=2}}else 3==this.G&&(e?nn(this,e):0==this.i.length||et(this.h)||nn(this))},e.Fa=function(){if(this.u=null,cn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ae(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ne(10),$t(this),cn(this))},e.Za=function(){null!=this.C&&(this.C=null,$t(this),un(this),Ne(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=yn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},gn.prototype.g=function(e,t){return new kn(e,t)},f(kn,ae),kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){Jt(this.g)},kn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=pe(e),e=n);t.i.push(new Je(t.Ya++,e)),3==t.G&&tn(t)},kn.prototype.N=function(){this.g.l=null,delete this.j,Jt(this.g),delete this.g,kn.aa.N.call(this)},f(bn,we),f(wn,_e),f(_n,yn),_n.prototype.ua=function(){oe(this.g,"a")},_n.prototype.ta=function(e){oe(this.g,new bn(e))},_n.prototype.sa=function(e){oe(this.g,new wn)},_n.prototype.ra=function(){oe(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,Po=Lo.createWebChannelTransport=function(){return new gn},Oo=Lo.getStatEventTarget=function(){return Ee()},Ao=Lo.Event=xe,Ro=Lo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Le.NO_ERROR=0,Le.TIMEOUT=8,Le.HTTP_ERROR=6,No=Lo.ErrorCode=Le,Me.COMPLETE="complete",Co=Lo.EventType=Me,ke.EventType=be,be.OPEN="a",be.CLOSE="b",be.ERROR="c",be.MESSAGE="d",ae.prototype.listen=ae.prototype.K,To=Lo.WebChannel=ke,Lo.FetchXmlHttpFactory=Pt,zt.prototype.listenOnce=zt.prototype.L,zt.prototype.getLastError=zt.prototype.Ka,zt.prototype.getLastErrorCode=zt.prototype.Ba,zt.prototype.getStatus=zt.prototype.Z,zt.prototype.getResponseJson=zt.prototype.Oa,zt.prototype.getResponseText=zt.prototype.oa,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Ha,Io=Lo.XhrIo=zt}).apply("undefined"!==typeof Do?Do:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Mo="@firebase/firestore",Fo=function(){function e(t){Rr(this,e),this.uid=t}return Pr(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Fo.UNAUTHENTICATED=new Fo(null),Fo.GOOGLE_CREDENTIALS=new Fo("google-credentials-uid"),Fo.FIRST_PARTY=new Fo("first-party-uid"),Fo.MOCK_USER=new Fo("mock-user");var Uo="10.14.0",jo=new Ji("@firebase/firestore");function zo(){return jo.logLevel}function Vo(e){if(jo.logLevel<=Wi.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ho);jo.debug.apply(jo,["Firestore (".concat(Uo,"): ").concat(e)].concat(w(i)))}}function Bo(e){if(jo.logLevel<=Wi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ho);jo.error.apply(jo,["Firestore (".concat(Uo,"): ").concat(e)].concat(w(i)))}}function qo(e){if(jo.logLevel<=Wi.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ho);jo.warn.apply(jo,["Firestore (".concat(Uo,"): ").concat(e)].concat(w(i)))}}function Ho(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Wo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Uo,") INTERNAL ASSERTION FAILED: ")+e;throw Bo(t),new Error(t)}function Go(e,t){e||Wo()}function Zo(e,t){return e}var Ko={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Qo=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Pr(n)}(gi),Yo=Pr((function e(){var t=this;Rr(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Xo=Pr((function e(t,n){Rr(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Jo=function(){function e(){Rr(this,e)}return Pr(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Fo.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),$o=function(){function e(t){Rr(this,e),this.token=t,this.changeListener=null}return Pr(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),eu=function(){function e(t){Rr(this,e),this.t=t,this.currentUser=Fo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Pr(e,[{key:"start",value:function(e,t){var n=this;Go(void 0===this.o);var r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Yo;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Yo,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Vo("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.o&&(n.auth.addAuthTokenListener(n.o),o())};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Vo("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Yo)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Vo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Go("string"==typeof n.accessToken),new Xo(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Go(null===e||"string"==typeof e),new Fo(e)}}]),e}(),tu=function(){function e(t,n,r){Rr(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Fo.FIRST_PARTY,this.I=new Map}return Pr(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),nu=function(){function e(t,n,r){Rr(this,e),this.l=t,this.h=n,this.P=r}return Pr(e,[{key:"getToken",value:function(){return Promise.resolve(new tu(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Fo.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),ru=Pr((function e(t){Rr(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),iu=function(){function e(t){Rr(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return Pr(e,[{key:"start",value:function(e,t){var n=this;Go(void 0===this.o);var r=function(e){null!=e.error&&Vo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,Vo("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Vo("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.o&&n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):Vo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Go("string"==typeof t.token),e.R=t.token,new ru(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}]),e}();function au(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var ou=function(){function e(){Rr(this,e)}return Pr(e,null,[{key:"newId",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=au(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function uu(e,t){return e<t?-1:e>t?1:0}function su(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function cu(e){return e+"\0"}var lu=function(){function e(t,n){if(Rr(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Qo(Ko.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Qo(Ko.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Qo(Ko.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Qo(Ko.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Pr(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?uu(this.nanoseconds,e.nanoseconds):uu(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),fu=function(){function e(t){Rr(this,e),this.timestamp=t}return Pr(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new lu(0,0))}},{key:"max",value:function(){return new e(new lu(253402300799,999999999))}}]),e}(),hu=function(){function e(t,n,r){Rr(this,e),void 0===n?n=0:n>t.length&&Wo(),void 0===r?r=t.length-n:r>t.length-n&&Wo(),this.segments=t,this.offset=n,this.len=r}return Pr(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),du=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return Pr(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"toUriEncodedString",value:function(){return this.toArray().map(encodeURIComponent).join("/")}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Qo(Ko.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,w(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(hu),pu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,vu=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return Pr(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return pu.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Qo(Ko.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Qo(Ko.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Qo(Ko.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Qo(Ko.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(hu),mu=function(){function e(t){Rr(this,e),this.path=t}return Pr(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===du.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(du.fromString(t))}},{key:"fromName",value:function(t){return new e(du.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(du.emptyPath())}},{key:"comparator",value:function(e,t){return du.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new du(t.slice()))}}]),e}(),yu=Pr((function e(t,n,r,i){Rr(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function gu(e){return e.fields.find((function(e){return 2===e.kind}))}function ku(e){return e.fields.filter((function(e){return 2!==e.kind}))}yu.UNKNOWN_ID=-1;var bu=Pr((function e(t,n){Rr(this,e),this.fieldPath=t,this.kind=n}));var wu=function(){function e(t,n){Rr(this,e),this.sequenceNumber=t,this.offset=n}return Pr(e,null,[{key:"empty",value:function(){return new e(0,Su.min())}}]),e}();function _u(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=fu.fromTimestamp(1e9===r?new lu(n+1,0):new lu(n,r));return new Su(i,mu.empty(),t)}function xu(e){return new Su(e.readTime,e.key,-1)}var Su=function(){function e(t,n,r){Rr(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Pr(e,null,[{key:"min",value:function(){return new e(fu.min(),mu.empty(),-1)}},{key:"max",value:function(){return new e(fu.max(),mu.empty(),-1)}}]),e}();function Eu(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=mu.comparator(e.documentKey,t.documentKey))?n:uu(e.largestBatchId,t.largestBatchId)}var Iu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Tu=function(){function e(){Rr(this,e),this.onCommittedListeners=[]}return Pr(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Cu(e){return Nu.apply(this,arguments)}function Nu(){return(Nu=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ko.FAILED_PRECONDITION&&t.message===Iu){e.next=2;break}throw t;case 2:Vo("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ru=function(){function e(t){var n=this;Rr(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Pr(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Wo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Dr(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Au=function(){function e(t,n){var r=this;Rr(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.V=new Yo,this.transaction.oncomplete=function(){r.V.resolve()},this.transaction.onabort=function(){n.error?r.V.reject(new Lu(t,n.error)):r.V.resolve()},this.transaction.onerror=function(e){var n=zu(e.target.error);r.V.reject(new Lu(t,n))}}return Pr(e,[{key:"m",get:function(){return this.V.promise}},{key:"abort",value:function(e){e&&this.V.reject(e),this.aborted||(Vo("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"g",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Fu(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Lu(n,t)}}}]),e}(),Ou=function(){function e(t,n,r){Rr(this,e),this.name=t,this.version=n,this.p=r,12.2===e.S(si())&&Bo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Pr(e,[{key:"M",value:function(){var e=Cr(br().mark((function e(t){var n=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Vo("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Lu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Qo(Ko.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Qo(Ko.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Lu(t,n))},i.onupgradeneeded=function(e){Vo("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.p.O(t,i.transaction,e.oldVersion,n.version).next((function(){Vo("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.N&&(this.db.onversionchange=function(e){return n.N(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.N=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Cr(br().mark((function e(t,n,r,i){var a,o,u,s,c=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=br().mark((function e(){var n,u,s,l;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.M(t);case 4:return c.db=e.sent,n=Au.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.g(),e})).catch((function(e){return n.abort(e),Ru.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.m;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Vo("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if(!(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Vo("SimpleDb","Removing database:",e),Uu(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!yi())return!1;if(e.v())return!0;var t=si(),n=e.S(t),r=0<n&&n<10,i=Pu(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"v",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}},{key:"F",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}}]),e}();function Pu(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var Du=function(){function e(t){Rr(this,e),this.B=t,this.k=!1,this.q=null}return Pr(e,[{key:"isDone",get:function(){return this.k}},{key:"K",get:function(){return this.q}},{key:"cursor",set:function(e){this.B=e}},{key:"done",value:function(){this.k=!0}},{key:"$",value:function(e){this.q=e}},{key:"delete",value:function(){return Uu(this.B.delete())}}]),e}(),Lu=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this,Ko.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Pr(n)}(Qo);function Mu(e){return"IndexedDbTransactionError"===e.name}var Fu=function(){function e(t){Rr(this,e),this.store=t}return Pr(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Vo("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Vo("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Uu(n)}},{key:"add",value:function(e){return Vo("SimpleDb","ADD",this.store.name,e,e),Uu(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Uu(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Vo("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Vo("SimpleDb","DELETE",this.store.name,e),Uu(this.store.delete(e))}},{key:"count",value:function(){return Vo("SimpleDb","COUNT",this.store.name),Uu(this.store.count())}},{key:"U",value:function(e,t){var n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){var i=r.getAll(n.range);return new Ru((function(e,t){i.onerror=function(e){t(e.target.error)},i.onsuccess=function(t){e(t.target.result)}}))}var a=this.cursor(n),o=[];return this.W(a,(function(e,t){o.push(t)})).next((function(){return o}))}},{key:"G",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Ru((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){Vo("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new Ru((function(n,r){t.onerror=function(e){var t=zu(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new Ru((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Du(i),o=t(i.primaryKey,i.value,a);if(o instanceof Ru){var u=o.catch((function(e){return a.done(),Ru.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return Ru.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Uu(e){return new Ru((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=zu(e.target.error);n(t)}}))}var ju=!1;function zu(e){var t=Ou.S(si());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Qo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return ju||(ju=!0,setTimeout((function(){throw r}),0)),r}}return e}var Vu=function(){function e(t,n){Rr(this,e),this.asyncQueue=t,this.Z=n,this.task=null}return Pr(e,[{key:"start",value:function(){this.X(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"X",value:function(e){var t=this;Vo("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Vo,e.t1="Documents written: ",e.next=6,t.Z.ee();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackfiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Mu(e.t4)){e.next=17;break}Vo("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Cu(e.t4);case 19:return e.next=21,t.X(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Bu=function(){function e(t,n){Rr(this,e),this.localStore=t,this.persistence=n}return Pr(e,[{key:"ee",value:function(){var e=Cr(br().mark((function e(){var t,n=this,r=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.te(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"te",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Ru.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Vo("IndexBackfiller","Processing collection: ".concat(t)),n.ne(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"ne",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.re(i,n)})).next((function(n){return Vo("IndexBackfiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"re",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=xu(t);Eu(r,n)>0&&(n=r)})),new Su(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),qu=function(){function e(t,n){var r=this;Rr(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ie(e)},this.se=function(e){return n.writeSequenceNumber(e)})}return Pr(e,[{key:"ie",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.se&&this.se(e),e}}]),e}();function Hu(e){return null==e}function Wu(e){return 0===e&&1/e==-1/0}function Gu(e){return"number"==typeof e&&Number.isInteger(e)&&!Wu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Zu(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Qu(t)),t=Ku(e.get(n),t);return Qu(t)}function Ku(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Qu(e){return e+"\x01\x01"}function Yu(e){var t=e.length;if(Go(t>=2),2===t)return Go("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),du.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Wo(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Wo()}a=o+2}return new du(r)}qu.oe=-1;var Xu=["userId","batchId"];function Ju(e,t){return[e,Zu(t)]}function $u(e,t,n){return[e,Zu(t),n]}var es={},ts=["prefixPath","collectionGroup","readTime","documentId"],ns=["prefixPath","collectionGroup","documentId"],rs=["collectionGroup","readTime","prefixPath","documentId"],is=["canonicalId","targetId"],as=["targetId","path"],os=["path","targetId"],us=["collectionId","parent"],ss=["indexId","uid"],cs=["uid","sequenceNumber"],ls=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fs=["indexId","uid","orderedDocumentKey"],hs=["userId","collectionPath","documentId"],ds=["userId","collectionPath","largestBatchId"],ps=["userId","collectionGroup","largestBatchId"],vs=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),ms=[].concat(w(vs),["documentOverlays"]),ys=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gs=ys,ks=[].concat(gs,["indexConfiguration","indexState","indexEntries"]),bs=ks,ws=[].concat(w(ks),["globals"]),_s=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this))._e=e,i.currentSequenceNumber=r,i}return Pr(n)}(Tu);function xs(e,t){var n=Zo(e);return Ou.F(n._e,t)}function Ss(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Es(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Is(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ts=function(){function e(t,n){Rr(this,e),this.comparator=t,this.root=n||Ns.EMPTY}return Pr(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ns.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ns.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Cs(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Cs(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Cs(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Cs(this.root,e,this.comparator,!0)}}]),e}(),Cs=function(){function e(t,n,r,i){Rr(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Pr(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Ns=function(){function e(t,n,r,i,a){Rr(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Pr(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Wo();if(this.right.isRed())throw Wo();var e=this.left.check();if(e!==this.right.check())throw Wo();return e+(this.isRed()?0:1)}}]),e}();Ns.EMPTY=null,Ns.RED=!0,Ns.BLACK=!1,Ns.EMPTY=new(function(){function e(){Rr(this,e),this.size=0}return Pr(e,[{key:"key",get:function(){throw Wo()}},{key:"value",get:function(){throw Wo()}},{key:"color",get:function(){throw Wo()}},{key:"left",get:function(){throw Wo()}},{key:"right",get:function(){throw Wo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Ns(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Rs=function(){function e(t){Rr(this,e),this.comparator=t,this.data=new Ts(this.comparator)}return Pr(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new As(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new As(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),As=function(){function e(t){Rr(this,e),this.iter=t}return Pr(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Os(e){return e.hasNext()?e.getNext():void 0}var Ps=function(){function e(t){Rr(this,e),this.fields=t,t.sort(vu.comparator)}return Pr(e,[{key:"unionWith",value:function(t){var n,r=new Rs(vu.comparator),i=Dr(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Dr(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Dr(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return su(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Ds=function(e){Fr(n,e);var t=Vr(n);function n(){var e;return Rr(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return Pr(n)}(qr(Error));var Ls=function(e){function t(e){Rr(this,t),this.binaryString=e}return Pr(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return uu(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ds("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Ls.EMPTY_BYTE_STRING=new Ls("");var Ms=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(e){if(Go(!!e),"string"==typeof e){var t=0,n=Ms.exec(e);if(Go(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Us(e.seconds),nanos:Us(e.nanos)}}function Us(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function js(e){return"string"==typeof e?Ls.fromBase64String(e):Ls.fromUint8Array(e)}function zs(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Vs(e){var t=e.mapValue.fields.__previous_value__;return zs(t)?Vs(t):t}function Bs(e){var t=Fs(e.mapValue.fields.__local_write_time__.timestampValue);return new lu(t.seconds,t.nanos)}var qs=Pr((function e(t,n,r,i,a,o,u,s,c){Rr(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),Hs=function(){function e(t,n){Rr(this,e),this.projectId=t,this.database=n||"(default)"}return Pr(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Ws={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gs={nullValue:"NULL_VALUE"};function Zs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zs(e)?4:cc(e)?9007199254740991:uc(e)?10:11:Wo()}function Ks(e,t){if(e===t)return!0;var n=Zs(e);if(n!==Zs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Bs(e).isEqual(Bs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Fs(e.timestampValue),r=Fs(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return js(e.bytesValue).isEqual(js(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Us(e.geoPointValue.latitude)===Us(t.geoPointValue.latitude)&&Us(e.geoPointValue.longitude)===Us(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Us(e.integerValue)===Us(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Us(e.doubleValue),r=Us(t.doubleValue);return n===r?Wu(n)===Wu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return su(e.arrayValue.values||[],t.arrayValue.values||[],Ks);case 10:case 11:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ss(n)!==Ss(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ks(n[i],r[i])))return!1;return!0}(e,t);default:return Wo()}}function Qs(e,t){return void 0!==(e.values||[]).find((function(e){return Ks(e,t)}))}function Ys(e,t){if(e===t)return 0;var n=Zs(e),r=Zs(t);if(n!==r)return uu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return uu(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Us(e.integerValue||e.doubleValue),r=Us(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Xs(e.timestampValue,t.timestampValue);case 4:return Xs(Bs(e),Bs(t));case 5:return uu(e.stringValue,t.stringValue);case 6:return function(e,t){var n=js(e),r=js(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=uu(n[i],r[i]);if(0!==a)return a}return uu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=uu(Us(e.latitude),Us(t.latitude));return 0!==n?n:uu(Us(e.longitude),Us(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Js(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,a,o=e.fields||{},u=t.fields||{},s=null===(n=o.value)||void 0===n?void 0:n.arrayValue,c=null===(r=u.value)||void 0===r?void 0:r.arrayValue,l=uu((null===(i=null==s?void 0:s.values)||void 0===i?void 0:i.length)||0,(null===(a=null==c?void 0:c.values)||void 0===a?void 0:a.length)||0);return 0!==l?l:Js(s,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ws.mapValue&&t===Ws.mapValue)return 0;if(e===Ws.mapValue)return 1;if(t===Ws.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=uu(r[o],a[o]);if(0!==u)return u;var s=Ys(n[r[o]],i[a[o]]);if(0!==s)return s}return uu(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Wo()}}function Xs(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return uu(e,t);var n=Fs(e),r=Fs(t),i=uu(n.seconds,r.seconds);return 0!==i?i:uu(n.nanos,r.nanos)}function Js(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Ys(n[i],r[i]);if(a)return a}return uu(n.length,r.length)}function $s(e){return ec(e)}function ec(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Fs(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return js(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return mu.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Dr(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ec(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Dr(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ec(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Wo()}function tc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function nc(e){return!!e&&"integerValue"in e}function rc(e){return!!e&&"arrayValue"in e}function ic(e){return!!e&&"nullValue"in e}function ac(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function oc(e){return!!e&&"mapValue"in e}function uc(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function sc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Es(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=sc(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=sc(e.arrayValue.values[r]);return n}return Object.assign({},e)}function cc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var lc={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function fc(e){return"nullValue"in e?Gs:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?tc(Hs.empty(),mu.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?uc(e)?lc:{mapValue:{}}:Wo()}function hc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?tc(Hs.empty(),mu.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?lc:"mapValue"in e?uc(e)?{mapValue:{}}:Ws:Wo()}function dc(e,t){var n=Ys(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function pc(e,t){var n=Ys(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var vc=function(){function e(t){Rr(this,e),this.value=t}return Pr(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!oc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(t)}},{key:"setAll",value:function(e){var t=this,n=vu.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=sc(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());oc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ks(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];oc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Es(t,(function(t,n){return e[t]=n}));var r,i=Dr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(sc(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function mc(e){var t=[];return Es(e.fields,(function(e,n){var r=new vu([e]);if(oc(n)){var i=mc(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Dr(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Ps(t)}var yc=function(){function e(t,n,r,i,a,o,u){Rr(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return Pr(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(fu.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=vc.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=vc.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=fu.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,fu.min(),fu.min(),fu.min(),vc.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,fu.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,fu.min(),fu.min(),vc.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,fu.min(),fu.min(),vc.empty(),2)}}]),e}(),gc=Pr((function e(t,n){Rr(this,e),this.position=t,this.inclusive=n}));function kc(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?mu.comparator(mu.fromName(o.referenceValue),n.key):Ys(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function bc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ks(e.position[n],t.position[n]))return!1;return!0}var wc=Pr((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Rr(this,e),this.field=t,this.dir=n}));function _c(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var xc=Pr((function e(){Rr(this,e)})),Sc=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i){var a;return Rr(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Pr(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ys(t,this.value)):null!==t&&Zs(this.value)===Zs(t)&&this.matchesComparison(Ys(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Wo()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Dc(e,t,r):"array-contains"===t?new Uc(e,r):"in"===t?new jc(e,r):"not-in"===t?new zc(e,r):"array-contains-any"===t?new Vc(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Lc(e,n):new Mc(e,n)}}]),n}(xc),Ec=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this)).filters=e,i.op=r,i.ae=null,i}return Pr(n,[{key:"matches",value:function(e){return Ic(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ae||(this.ae=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ae}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(xc);function Ic(e){return"and"===e.op}function Tc(e){return"or"===e.op}function Cc(e){return Nc(e)&&Ic(e)}function Nc(e){var t,n=Dr(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Ec)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Rc(e){if(e instanceof Sc)return e.field.canonicalString()+e.op.toString()+$s(e.value);if(Cc(e))return e.filters.map((function(e){return Rc(e)})).join(",");var t=e.filters.map((function(e){return Rc(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Ac(e,t){return e instanceof Sc?function(e,t){return t instanceof Sc&&e.op===t.op&&e.field.isEqual(t.field)&&Ks(e.value,t.value)}(e,t):e instanceof Ec?function(e,t){return t instanceof Ec&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Ac(n,t.filters[r])}),!0)}(e,t):void Wo()}function Oc(e,t){var n=e.filters.concat(t);return Ec.create(n,e.op)}function Pc(e){return e instanceof Sc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat($s(e.value))}(e):e instanceof Ec?function(e){return e.op.toString()+" {"+e.getFilters().map(Pc).join(" ,")+"}"}(e):"Filter"}var Dc=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i){var a;return Rr(this,n),(a=t.call(this,e,r,i)).key=mu.fromName(i.referenceValue),a}return Pr(n,[{key:"matches",value:function(e){var t=mu.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Sc),Lc=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this,e,"in",r)).keys=Fc("in",r),i}return Pr(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Sc),Mc=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this,e,"not-in",r)).keys=Fc("not-in",r),i}return Pr(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Sc);function Fc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return mu.fromName(e.referenceValue)}))}var Uc=function(e){Fr(n,e);var t=Vr(n);function n(e,r){return Rr(this,n),t.call(this,e,"array-contains",r)}return Pr(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return rc(t)&&Qs(t.arrayValue,this.value)}}]),n}(Sc),jc=function(e){Fr(n,e);var t=Vr(n);function n(e,r){return Rr(this,n),t.call(this,e,"in",r)}return Pr(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Qs(this.value.arrayValue,t)}}]),n}(Sc),zc=function(e){Fr(n,e);var t=Vr(n);function n(e,r){return Rr(this,n),t.call(this,e,"not-in",r)}return Pr(n,[{key:"matches",value:function(e){if(Qs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Qs(this.value.arrayValue,t)}}]),n}(Sc),Vc=function(e){Fr(n,e);var t=Vr(n);function n(e,r){return Rr(this,n),t.call(this,e,"array-contains-any",r)}return Pr(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!rc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Qs(t.value.arrayValue,e)}))}}]),n}(Sc),Bc=Pr((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Rr(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ue=null}));function qc(e){return new Bc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Hc(e){var t=Zo(e);if(null===t.ue){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Rc(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Hu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return $s(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return $s(e)})).join(",")),t.ue=n}return t.ue}function Wc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!_c(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Ac(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!bc(e.startAt,t.startAt)&&bc(e.endAt,t.endAt)}function Gc(e){return mu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Zc(e,t){return e.filters.filter((function(e){return e instanceof Sc&&e.field.isEqual(t)}))}function Kc(e,t,n){var r,i=Gs,a=!0,o=Dr(Zc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Gs,c=!0;switch(u.op){case"<":case"<=":s=fc(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Gs}dc({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];dc({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Qc(e,t,n){var r,i=Ws,a=!0,o=Dr(Zc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Ws,c=!0;switch(u.op){case">=":case">":s=hc(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Ws}pc({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];pc({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Yc=Pr((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Rr(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}));function Xc(e,t,n,r,i,a,o,u){return new Yc(e,t,n,r,i,a,o,u)}function Jc(e){return new Yc(e)}function $c(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function el(e){return null!==e.collectionGroup}function tl(e){var t=Zo(e);if(null===t.ce){t.ce=[];var n,r=new Set,i=Dr(t.explicitOrderBy);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.ce.push(a),r.add(a.field.canonicalString())}}catch(s){i.e(s)}finally{i.f()}var o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",u=function(e){var t=new Rs(vu.comparator);return e.filters.forEach((function(e){e.getFlattenedFilters().forEach((function(e){e.isInequality()&&(t=t.add(e.field))}))})),t}(t);u.forEach((function(e){r.has(e.canonicalString())||e.isKeyField()||t.ce.push(new wc(e,o))})),r.has(vu.keyField().canonicalString())||t.ce.push(new wc(vu.keyField(),o))}return t.ce}function nl(e){var t=Zo(e);return t.le||(t.le=rl(t,tl(e))),t.le}function rl(e,t){if("F"===e.limitType)return qc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new wc(e.field,t)}));var n=e.endAt?new gc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new gc(e.startAt.position,e.startAt.inclusive):null;return qc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function il(e,t){var n=e.filters.concat([t]);return new Yc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function al(e,t,n){return new Yc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ol(e,t){return Wc(nl(e),nl(t))&&e.limitType===t.limitType}function ul(e){return"".concat(Hc(nl(e)),"|lt:").concat(e.limitType)}function sl(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Pc(e)})).join(", "),"]")),Hu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return $s(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return $s(e)})).join(",")),"Target(".concat(t,")")}(nl(e)),"; limitType=").concat(e.limitType,")")}function cl(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):mu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Dr(tl(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Dr(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=kc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,tl(e),t))&&!(e.endAt&&!function(e,t,n){var r=kc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,tl(e),t))}(e,t)}function ll(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function fl(e){return function(t,n){var r,i=!1,a=Dr(tl(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=hl(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function hl(e,t,n){var r=e.field.isKeyField()?mu.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ys(r,i):Wo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Wo()}}var dl=function(){function e(t,n){Rr(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Pr(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Dr(n);try{for(i.s();!(r=i.n()).done;){var a=k(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Es(this.inner,(function(t,n){var r,i=Dr(n);try{for(i.s();!(r=i.n()).done;){var a=k(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Is(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),pl=new Ts(mu.comparator);function vl(){return pl}var ml=new Ts(mu.comparator);function yl(){for(var e=ml,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function gl(e){var t=ml;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function kl(){return wl()}function bl(){return wl()}function wl(){return new dl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var _l=new Ts(mu.comparator),xl=new Rs(mu.comparator);function Sl(){for(var e=xl,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var El=new Rs(uu);function Il(){return El}function Tl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(t)?"-0":t}}function Cl(e){return{integerValue:""+e}}function Nl(e,t){return Gu(t)?Cl(t):Tl(e,t)}var Rl=Pr((function e(){Rr(this,e),this._=void 0}));function Al(e,t,n){return e instanceof Dl?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&zs(t)&&(t=Vs(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ll?Ml(e,t):e instanceof Fl?Ul(e,t):function(e,t){var n=Pl(e,t),r=zl(n)+zl(e.Pe);return nc(n)&&nc(e.Pe)?Cl(r):Tl(e.serializer,r)}(e,t)}function Ol(e,t,n){return e instanceof Ll?Ml(e,t):e instanceof Fl?Ul(e,t):n}function Pl(e,t){return e instanceof jl?function(e){return nc(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var Dl=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return Pr(n)}(Rl),Ll=function(e){Fr(n,e);var t=Vr(n);function n(e){var r;return Rr(this,n),(r=t.call(this)).elements=e,r}return Pr(n)}(Rl);function Ml(e,t){var n,r=Vl(t),i=Dr(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Ks(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Fl=function(e){Fr(n,e);var t=Vr(n);function n(e){var r;return Rr(this,n),(r=t.call(this)).elements=e,r}return Pr(n)}(Rl);function Ul(e,t){var n,r=Vl(t),i=Dr(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Ks(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var jl=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this)).serializer=e,i.Pe=r,i}return Pr(n)}(Rl);function zl(e){return Us(e.integerValue||e.doubleValue)}function Vl(e){return rc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Bl=Pr((function e(t,n){Rr(this,e),this.field=t,this.transform=n}));var ql=Pr((function e(t,n){Rr(this,e),this.version=t,this.transformResults=n})),Hl=function(){function e(t,n){Rr(this,e),this.updateTime=t,this.exists=n}return Pr(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Wl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Gl=Pr((function e(){Rr(this,e)}));function Zl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new of(e.key,Hl.none()):new Jl(e.key,e.data,Hl.none());var n,r=e.data,i=vc.empty(),a=new Rs(vu.comparator),o=Dr(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new $l(e.key,i,new Ps(a.toArray()),Hl.none())}function Kl(e,t,n){e instanceof Jl?function(e,t,n){var r=e.value.clone(),i=tf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof $l?function(e,t,n){if(Wl(e.precondition,t)){var r=tf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ef(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ql(e,t,n,r){return e instanceof Jl?function(e,t,n,r){if(!Wl(e.precondition,t))return n;var i=e.value.clone(),a=nf(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof $l?function(e,t,n,r){if(!Wl(e.precondition,t))return n;var i=nf(e.fieldTransforms,r,t),a=t.data;return a.setAll(ef(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Wl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Yl(e,t){var n,r=null,i=Dr(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Pl(a.transform,o||null);null!=u&&(null===r&&(r=vc.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Xl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&su(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ll&&t instanceof Ll||e instanceof Fl&&t instanceof Fl?su(e.elements,t.elements,Ks):e instanceof jl&&t instanceof jl?Ks(e.Pe,t.Pe):e instanceof Dl&&t instanceof Dl}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Jl=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Rr(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Pr(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Gl),$l=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Rr(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Pr(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Gl);function ef(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function tf(e,t,n){var r=new Map;Go(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Ol(o,u,n[i]))}return r}function nf(e,t,n){var r,i=new Map,a=Dr(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Al(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var rf,af,of=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Pr(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Gl),uf=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Pr(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Gl),sf=function(){function e(t,n,r,i){Rr(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Pr(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Kl(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Dr(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Ql(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Dr(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Ql(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=bl();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Zl(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(fu.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Sl())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&su(this.mutations,e.mutations,(function(e,t){return Xl(e,t)}))&&su(this.baseMutations,e.baseMutations,(function(e,t){return Xl(e,t)}))}}]),e}(),cf=function(){function e(t,n,r,i){Rr(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Pr(e,null,[{key:"from",value:function(t,n,r){Go(t.mutations.length===r.length);for(var i=_l,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),lf=function(){function e(t,n){Rr(this,e),this.largestBatchId=t,this.mutation=n}return Pr(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),ff=Pr((function e(t,n){Rr(this,e),this.count=t,this.unchangedNames=n}));function hf(e){switch(e){default:return Wo();case Ko.CANCELLED:case Ko.UNKNOWN:case Ko.DEADLINE_EXCEEDED:case Ko.RESOURCE_EXHAUSTED:case Ko.INTERNAL:case Ko.UNAVAILABLE:case Ko.UNAUTHENTICATED:return!1;case Ko.INVALID_ARGUMENT:case Ko.NOT_FOUND:case Ko.ALREADY_EXISTS:case Ko.PERMISSION_DENIED:case Ko.FAILED_PRECONDITION:case Ko.ABORTED:case Ko.OUT_OF_RANGE:case Ko.UNIMPLEMENTED:case Ko.DATA_LOSS:return!0}}function df(e){if(void 0===e)return Bo("GRPC error has no .code"),Ko.UNKNOWN;switch(e){case rf.OK:return Ko.OK;case rf.CANCELLED:return Ko.CANCELLED;case rf.UNKNOWN:return Ko.UNKNOWN;case rf.DEADLINE_EXCEEDED:return Ko.DEADLINE_EXCEEDED;case rf.RESOURCE_EXHAUSTED:return Ko.RESOURCE_EXHAUSTED;case rf.INTERNAL:return Ko.INTERNAL;case rf.UNAVAILABLE:return Ko.UNAVAILABLE;case rf.UNAUTHENTICATED:return Ko.UNAUTHENTICATED;case rf.INVALID_ARGUMENT:return Ko.INVALID_ARGUMENT;case rf.NOT_FOUND:return Ko.NOT_FOUND;case rf.ALREADY_EXISTS:return Ko.ALREADY_EXISTS;case rf.PERMISSION_DENIED:return Ko.PERMISSION_DENIED;case rf.FAILED_PRECONDITION:return Ko.FAILED_PRECONDITION;case rf.ABORTED:return Ko.ABORTED;case rf.OUT_OF_RANGE:return Ko.OUT_OF_RANGE;case rf.UNIMPLEMENTED:return Ko.UNIMPLEMENTED;case rf.DATA_LOSS:return Ko.DATA_LOSS;default:return Wo()}}(af=rf||(rf={}))[af.OK=0]="OK",af[af.CANCELLED=1]="CANCELLED",af[af.UNKNOWN=2]="UNKNOWN",af[af.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",af[af.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",af[af.NOT_FOUND=5]="NOT_FOUND",af[af.ALREADY_EXISTS=6]="ALREADY_EXISTS",af[af.PERMISSION_DENIED=7]="PERMISSION_DENIED",af[af.UNAUTHENTICATED=16]="UNAUTHENTICATED",af[af.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",af[af.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",af[af.ABORTED=10]="ABORTED",af[af.OUT_OF_RANGE=11]="OUT_OF_RANGE",af[af.UNIMPLEMENTED=12]="UNIMPLEMENTED",af[af.INTERNAL=13]="INTERNAL",af[af.UNAVAILABLE=14]="UNAVAILABLE",af[af.DATA_LOSS=15]="DATA_LOSS";var pf=null;function vf(){return new TextEncoder}var mf=new _o([4294967295,4294967295],0);function yf(e){var t=vf().encode(e),n=new xo;return n.update(t),new Uint8Array(n.digest())}function gf(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new _o([n,r],0),new _o([i,a],0)]}var kf=function(){function e(t,n,r){if(Rr(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bf("Invalid padding: ".concat(n));if(r<0)throw new bf("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new bf("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new bf("Invalid padding when bitmap length is 0: ".concat(n));this.Ie=8*t.length-n,this.Te=_o.fromNumber(this.Ie)}return Pr(e,[{key:"Ee",value:function(e,t,n){var r=e.add(t.multiply(_o.fromNumber(n)));return 1===r.compare(mf)&&(r=new _o([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}},{key:"de",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Ie)return!1;for(var t=k(gf(yf(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ee(n,r,i);if(!this.de(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Ie)for(var t=k(gf(yf(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ee(n,r,i);this.Ae(a)}}},{key:"Ae",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),bf=function(e){Fr(n,e);var t=Vr(n);function n(){var e;return Rr(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return Pr(n)}(qr(Error)),wf=function(){function e(t,n,r,i,a){Rr(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Pr(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,_f.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(fu.min(),i,new Ts(uu),vl(),Sl())}}]),e}(),_f=function(){function e(t,n,r,i,a){Rr(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Pr(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Sl(),Sl(),Sl())}}]),e}(),xf=Pr((function e(t,n,r,i){Rr(this,e),this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i})),Sf=Pr((function e(t,n){Rr(this,e),this.targetId=t,this.me=n})),Ef=Pr((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ls.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Rr(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),If=function(){function e(){Rr(this,e),this.fe=0,this.ge=Nf(),this.pe=Ls.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}return Pr(e,[{key:"current",get:function(){return this.ye}},{key:"resumeToken",get:function(){return this.pe}},{key:"Se",get:function(){return 0!==this.fe}},{key:"be",get:function(){return this.we}},{key:"De",value:function(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}},{key:"ve",value:function(){var e=Sl(),t=Sl(),n=Sl();return this.ge.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Wo()}})),new _f(this.pe,this.ye,e,t,n)}},{key:"Ce",value:function(){this.we=!1,this.ge=Nf()}},{key:"Fe",value:function(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}},{key:"Me",value:function(e){this.we=!0,this.ge=this.ge.remove(e)}},{key:"xe",value:function(){this.fe+=1}},{key:"Oe",value:function(){this.fe-=1,Go(this.fe>=0)}},{key:"Ne",value:function(){this.we=!0,this.ye=!0}}]),e}(),Tf=function(){function e(t){Rr(this,e),this.Le=t,this.Be=new Map,this.ke=vl(),this.qe=Cf(),this.Qe=new Ts(uu)}return Pr(e,[{key:"Ke",value:function(e){var t,n=Dr(e.Re);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve)}}catch(u){n.e(u)}finally{n.f()}var i,a=Dr(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Ue(o,e.key,e.Ve)}}catch(u){a.e(u)}finally{a.f()}}},{key:"We",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Ge(n);switch(e.state){case 0:t.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||t.removeTarget(n);break;case 3:t.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:t.ze(n)&&(t.je(n),r.De(e.resumeToken));break;default:Wo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((function(e,r){n.ze(r)&&t(r)}))}},{key:"He",value:function(e){var t=e.targetId,n=e.me.count,r=this.Je(t);if(r){var i=r.target;if(Gc(i))if(0===n){var a=new mu(i.path);this.Ue(t,a,yc.newNoDocument(a,fu.min()))}else Go(1===n);else{var o=this.Ye(t);if(o!==n){var u=this.Ze(e),s=u?this.Xe(u,e,o):1;if(0!==s){this.je(t);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}null==pf||pf.et(function(e,t,n,r,i){var a,o,u,s,c,l,f={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(f.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===(u=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===u?void 0:u.length)&&void 0!==s?s:0,padding:null!==(l=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),f}(o,e.me,this.Le.tt(),u,s))}}}}},{key:"Ze",value:function(e){var t=e.me.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,u=i.padding,s=void 0===u?0:u,c=t.hashCount,l=void 0===c?0:c;try{n=js(o).toUint8Array()}catch(e){if(e instanceof Ds)return qo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new kf(n,s,l)}catch(e){return qo(e instanceof bf?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Ie?null:r}},{key:"Xe",value:function(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}},{key:"nt",value:function(e,t){var n=this,r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.Le.tt(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.Ue(t,r,null),i++)})),i}},{key:"rt",value:function(e){var t=this,n=new Map;this.Be.forEach((function(r,i){var a=t.Je(i);if(a){if(r.current&&Gc(a.target)){var o=new mu(a.target.path);null!==t.ke.get(o)||t.it(i,o)||t.Ue(i,o,yc.newNoDocument(o,e))}r.be&&(n.set(i,r.ve()),r.Ce())}}));var r=Sl();this.qe.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Je(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.ke.forEach((function(t,n){return n.setReadTime(e)}));var i=new wf(e,n,this.Qe,this.ke,r);return this.ke=vl(),this.qe=Cf(),this.Qe=new Ts(uu),i}},{key:"$e",value:function(e,t){if(this.ze(e)){var n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}}},{key:"Ue",value:function(e,t,n){if(this.ze(e)){var r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Be.delete(e)}},{key:"Ye",value:function(e){var t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"xe",value:function(e){this.Ge(e).xe()}},{key:"Ge",value:function(e){var t=this.Be.get(e);return t||(t=new If,this.Be.set(e,t)),t}},{key:"st",value:function(e){var t=this.qe.get(e);return t||(t=new Rs(uu),this.qe=this.qe.insert(e,t)),t}},{key:"ze",value:function(e){var t=null!==this.Je(e);return t||Vo("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Je",value:function(e){var t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}},{key:"je",value:function(e){var t=this;this.Be.set(e,new If),this.Le.getRemoteKeysForTarget(e).forEach((function(n){t.Ue(e,n,null)}))}},{key:"it",value:function(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}]),e}();function Cf(){return new Ts(mu.comparator)}function Nf(){return new Ts(mu.comparator)}var Rf={asc:"ASCENDING",desc:"DESCENDING"},Af={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Of={and:"AND",or:"OR"},Pf=Pr((function e(t,n){Rr(this,e),this.databaseId=t,this.useProto3Json=n}));function Df(e,t){return e.useProto3Json||Hu(t)?t:{value:t}}function Lf(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Mf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ff(e,t){return Lf(e,t.toTimestamp())}function Uf(e){return Go(!!e),fu.fromTimestamp(function(e){var t=Fs(e);return new lu(t.seconds,t.nanos)}(e))}function jf(e,t){return zf(e,t).canonicalString()}function zf(e,t){var n=function(e){return new du(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Vf(e){var t=du.fromString(e);return Go(lh(t)),t}function Bf(e,t){return jf(e.databaseId,t.path)}function qf(e,t){var n=Vf(t);if(n.get(1)!==e.databaseId.projectId)throw new Qo(Ko.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Qo(Ko.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new mu(Zf(n))}function Hf(e,t){return jf(e.databaseId,t)}function Wf(e){var t=Vf(e);return 4===t.length?du.emptyPath():Zf(t)}function Gf(e){return new du(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Zf(e){return Go(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Kf(e,t,n){return{name:Bf(e,t),fields:n.value.mapValue.fields}}function Qf(e,t,n){var r=qf(e,t.name),i=Uf(t.updateTime),a=t.createTime?Uf(t.createTime):fu.min(),o=new vc({mapValue:{fields:t.fields}}),u=yc.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Yf(e,t){return"found"in t?function(e,t){Go(!!t.found),t.found.name,t.found.updateTime;var n=qf(e,t.found.name),r=Uf(t.found.updateTime),i=t.found.createTime?Uf(t.found.createTime):fu.min(),a=new vc({mapValue:{fields:t.found.fields}});return yc.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Go(!!t.missing),Go(!!t.readTime);var n=qf(e,t.missing),r=Uf(t.readTime);return yc.newNoDocument(n,r)}(e,t):Wo()}function Xf(e,t){var n;if(t instanceof Jl)n={update:Kf(e,t.key,t.value)};else if(t instanceof of)n={delete:Bf(e,t.key)};else if(t instanceof $l)n={update:Kf(e,t.key,t.data),updateMask:ch(t.fieldMask)};else{if(!(t instanceof uf))return Wo();n={verify:Bf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Dl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ll)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof jl)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Wo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ff(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Wo()}(e,t.precondition)),n}function Jf(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Hl.updateTime(Uf(e.updateTime)):void 0!==e.exists?Hl.exists(e.exists):Hl.none()}(t.currentDocument):Hl.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Go("REQUEST_TIME"===t.setToServerValue),n=new Dl;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Ll(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Fl(i)}else"increment"in t?n=new jl(e,t.increment):Wo();var a=vu.fromServerFormat(t.fieldPath);return new Bl(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=qf(e,t.update.name),a=new vc({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Ps(t.map((function(e){return vu.fromServerFormat(e)})))}(t.updateMask);return new $l(i,a,o,n,r)}return new Jl(i,a,n,r)}if(t.delete){var u=qf(e,t.delete);return new of(u,n)}if(t.verify){var s=qf(e,t.verify);return new uf(s,n)}return Wo()}function $f(e,t){return{documents:[Hf(e,t.path)]}}function eh(e,t){var n,r={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n=i,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=Hf(e,n);var a=function(e){if(0!==e.length)return sh(Ec.create(e,"and"))}(t.filters);a&&(r.structuredQuery.where=a);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:oh(e.field),direction:rh(e.dir)}}(e)}))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);var u=Df(e,t.limit);return null!==u&&(r.structuredQuery.limit=u),t.startAt&&(r.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:r,parent:n}}function th(e){var t=Wf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Go(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=nh(e);return t instanceof Ec&&Cc(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new wc(uh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return Hu(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new gc(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new gc(n,t)}(n.endAt)),Xc(t,i,u,o,s,"F",c,l)}function nh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=uh(e.unaryFilter.field);return Sc.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=uh(e.unaryFilter.field);return Sc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=uh(e.unaryFilter.field);return Sc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=uh(e.unaryFilter.field);return Sc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Wo()}}(e):void 0!==e.fieldFilter?function(e){return Sc.create(uh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ec.create(e.compositeFilter.filters.map((function(e){return nh(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Wo()}}(e.compositeFilter.op))}(e):Wo()}function rh(e){return Rf[e]}function ih(e){return Af[e]}function ah(e){return Of[e]}function oh(e){return{fieldPath:e.canonicalString()}}function uh(e){return vu.fromServerFormat(e.fieldPath)}function sh(e){return e instanceof Sc?function(e){if("=="===e.op){if(ac(e.value))return{unaryFilter:{field:oh(e.field),op:"IS_NAN"}};if(ic(e.value))return{unaryFilter:{field:oh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ac(e.value))return{unaryFilter:{field:oh(e.field),op:"IS_NOT_NAN"}};if(ic(e.value))return{unaryFilter:{field:oh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oh(e.field),op:ih(e.op),value:e.value}}}(e):e instanceof Ec?function(e){var t=e.getFilters().map((function(e){return sh(e)}));return 1===t.length?t[0]:{compositeFilter:{op:ah(e.op),filters:t}}}(e):Wo()}function ch(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function lh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var fh=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fu.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:fu.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ls.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Rr(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return Pr(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),hh=Pr((function e(t){Rr(this,e),this.ct=t}));function dh(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ph(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Bf(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Lf(e,t.version.toTimestamp()),createTime:Lf(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:vh(t.version)};else{if(!t.isUnknownDocument())return Wo();r.unknownDocument={path:n.path.toArray(),version:vh(t.version)}}return r}function ph(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function vh(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function mh(e){var t=new lu(e.seconds,e.nanoseconds);return fu.fromTimestamp(t)}function yh(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Jf(e.ct,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Jf(e.ct,t)})),u=lu.fromMillis(t.localWriteTimeMs);return new sf(t.batchId,u,n,o)}function gh(e){var t,n=mh(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?mh(e.lastLimboFreeSnapshotVersion):fu.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return Go(1===e.documents.length),nl(Jc(Wf(e.documents[0])))}(e.query):function(e){return nl(th(e))}(e.query),new fh(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,Ls.fromBase64String(e.resumeToken))}function kh(e,t){var n,r=vh(t.snapshotVersion),i=vh(t.lastLimboFreeSnapshotVersion);n=Gc(t.target)?$f(e.ct,t.target):eh(e.ct,t.target)._t;var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Hc(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function bh(e){var t=th({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?al(t,t.limit,"L"):t}function wh(e,t){return new lf(t.largestBatchId,Jf(e.ct,t.overlayMutation))}function _h(e,t){var n=t.path.lastSegment();return[e,Zu(t.path.popLast()),n]}function xh(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:vh(r.readTime),documentKey:Zu(r.documentKey.path),largestBatchId:r.largestBatchId}}var Sh=function(){function e(){Rr(this,e)}return Pr(e,[{key:"getBundleMetadata",value:function(e,t){return Eh(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:mh(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return Eh(e).put(function(e){return{bundleId:e.id,createTime:vh(Uf(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return Ih(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:bh(e.bundledQuery),readTime:mh(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return Ih(e).put(function(e){return{name:e.name,readTime:vh(Uf(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Eh(e){return xs(e,"bundles")}function Ih(e){return xs(e,"namedQueries")}var Th=function(){function e(t,n){Rr(this,e),this.serializer=t,this.userId=n}return Pr(e,[{key:"getOverlay",value:function(e,t){var n=this;return Ch(e).get(_h(this.userId,t)).next((function(e){return e?wh(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=kl();return Ru.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new lf(t,a);i.push(r.ht(e,o))})),Ru.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Zu(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Ch(e).j("collectionPathOverlayIndex",i))})),Ru.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=kl(),a=Zu(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ch(e).U("collectionPathOverlayIndex",o).next((function(e){var t,n=Dr(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=wh(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=kl(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ch(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=wh(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ht",value:function(e,t){return Ch(e).put(function(e,t,n){var r=k(_h(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Xf(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"lt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Ch(e){return xs(e,"documentOverlays")}var Nh=function(){function e(){Rr(this,e)}return Pr(e,[{key:"Pt",value:function(e){return xs(e,"globals")}},{key:"getSessionToken",value:function(e){return this.Pt(e).get("sessionToken").next((function(e){var t=null==e?void 0:e.value;return t?Ls.fromUint8Array(t):Ls.EMPTY_BYTE_STRING}))}},{key:"setSessionToken",value:function(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}]),e}(),Rh=function(){function e(){Rr(this,e)}return Pr(e,[{key:"It",value:function(e,t){this.Tt(e,t),t.Et()}},{key:"Tt",value:function(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Us(e.integerValue));else if("doubleValue"in e){var n=Us(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Wu(n)?t.At(0):t.At(n))}else if("timestampValue"in e){var r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=Fs(r)),t.Rt("".concat(r.seconds||"")),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(js(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?cc(e)?this.dt(t,Number.MAX_SAFE_INTEGER):uc(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Wo()}},{key:"Vt",value:function(e,t){this.dt(t,25),this.Dt(e,t)}},{key:"Dt",value:function(e,t){t.Rt(e)}},{key:"St",value:function(e,t){var n=e.fields||{};this.dt(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Vt(a,t),this.Tt(n[a],t)}}},{key:"wt",value:function(e,t){var n,r,i=e.fields||{};this.dt(t,53);var a="value",o=(null===(r=null===(n=i[a].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Us(o)),this.Vt(a,t),this.Tt(i[a],t)}},{key:"bt",value:function(e,t){var n=e.values||[];this.dt(t,50);var r,i=Dr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Tt(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"yt",value:function(e,t){var n=this;this.dt(t,37),mu.fromName(e).path.forEach((function(e){n.dt(t,60),n.Dt(e,t)}))}},{key:"dt",value:function(e,t){e.At(t)}},{key:"ft",value:function(e){e.At(2)}}]),e}();function Ah(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Oh(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Ah(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Rh.vt=new Rh;var Ph=function(){function e(){Rr(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Pr(e,[{key:"Ct",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ft(n.value),n=t.next();this.Mt()}},{key:"xt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ot(n.value),n=t.next();this.Nt()}},{key:"Lt",value:function(e){var t,n=Dr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{var a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Mt()}},{key:"Bt",value:function(e){var t,n=Dr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{var a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Nt()}},{key:"kt",value:function(e){var t=this.qt(e),n=Oh(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Kt",value:function(e){var t=this.qt(e),n=Oh(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"Wt",value:function(){this.Gt(255),this.Gt(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"zt",value:function(){return this.buffer.slice(0,this.position)}},{key:"qt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ft",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}},{key:"Ot",value:function(e){var t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}},{key:"Mt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Nt",value:function(){this.Gt(0),this.Gt(1)}},{key:"Ut",value:function(e){this.Qt(1),this.buffer[this.position++]=e}},{key:"Gt",value:function(e){this.Qt(1),this.buffer[this.position++]=~e}},{key:"Qt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Dh=function(){function e(t){Rr(this,e),this.jt=t}return Pr(e,[{key:"gt",value:function(e){this.jt.Ct(e)}},{key:"Rt",value:function(e){this.jt.Lt(e)}},{key:"At",value:function(e){this.jt.kt(e)}},{key:"Et",value:function(){this.jt.$t()}}]),e}(),Lh=function(){function e(t){Rr(this,e),this.jt=t}return Pr(e,[{key:"gt",value:function(e){this.jt.xt(e)}},{key:"Rt",value:function(e){this.jt.Bt(e)}},{key:"At",value:function(e){this.jt.Kt(e)}},{key:"Et",value:function(){this.jt.Wt()}}]),e}(),Mh=function(){function e(){Rr(this,e),this.jt=new Ph,this.Ht=new Dh(this.jt),this.Jt=new Lh(this.jt)}return Pr(e,[{key:"seed",value:function(e){this.jt.seed(e)}},{key:"Yt",value:function(e){return 0===e?this.Ht:this.Jt}},{key:"zt",value:function(){return this.jt.zt()}},{key:"reset",value:function(){this.jt.reset()}}]),e}(),Fh=function(){function e(t,n,r,i){Rr(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Pr(e,[{key:"Zt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Uh(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=jh(e.arrayValue,t.arrayValue))?n:0!==(n=jh(e.directionalValue,t.directionalValue))?n:mu.comparator(e.documentKey,t.documentKey)}function jh(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var zh=function(){function e(t){Rr(this,e),this.Xt=new Rs((function(e,t){return vu.comparator(e.field,t.field)})),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];var n,r=Dr(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Pr(e,[{key:"nn",get:function(){return this.Xt.size>1}},{key:"rn",value:function(e){if(Go(e.collectionGroup===this.collectionId),this.nn)return!1;var t=gu(e);if(void 0!==t&&!this.sn(t))return!1;for(var n=ku(e),r=new Set,i=0,a=0;i<n.length&&this.sn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){var o=this.Xt.getIterator().getNext();if(!r.has(o.field.canonicalString())){var u=n[i];if(!this.on(o,u)||!this._n(this.en[a++],u))return!1}++i}for(;i<n.length;++i){var s=n[i];if(a>=this.en.length||!this._n(this.en[a++],s))return!1}return!0}},{key:"an",value:function(){if(this.nn)return null;var e,t=new Rs(vu.comparator),n=[],r=Dr(this.tn);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)n.push(new bu(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),n.push(new bu(i.field,0))}}}catch(s){r.e(s)}finally{r.f()}var a,o=Dr(this.en);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||t.has(u.field)||(t=t.add(u.field),n.push(new bu(u.field,"asc"===u.dir?0:1)))}}catch(s){o.e(s)}finally{o.f()}return new yu(yu.UNKNOWN_ID,this.collectionId,n,wu.empty())}},{key:"sn",value:function(e){var t,n=Dr(this.tn);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.on(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"on",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"_n",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Vh(e){var t,n;if(Go(e instanceof Sc||e instanceof Ec),e instanceof Sc){if(e instanceof jc){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Sc.create(e.field,"==",t)})))||[];return Ec.create(r,"or")}return e}var i=e.filters.map((function(e){return Vh(e)}));return Ec.create(i,e.op)}function Bh(e){if(0===e.getFilters().length)return[];var t=Gh(Vh(e));return Go(Wh(t)),qh(t)||Hh(t)?[t]:t.getFilters()}function qh(e){return e instanceof Sc}function Hh(e){return e instanceof Ec&&Cc(e)}function Wh(e){return qh(e)||Hh(e)||function(e){if(e instanceof Ec&&Tc(e)){var t,n=Dr(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!qh(r)&&!Hh(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Gh(e){if(Go(e instanceof Sc||e instanceof Ec),e instanceof Sc)return e;if(1===e.filters.length)return Gh(e.filters[0]);var t=e.filters.map((function(e){return Gh(e)})),n=Ec.create(t,e.op);return Wh(n=Qh(n))?n:(Go(n instanceof Ec),Go(Ic(n)),Go(n.filters.length>1),n.filters.reduce((function(e,t){return Zh(e,t)})))}function Zh(e,t){var n;return Go(e instanceof Sc||e instanceof Ec),Go(t instanceof Sc||t instanceof Ec),n=e instanceof Sc?t instanceof Sc?function(e,t){return Ec.create([e,t],"and")}(e,t):Kh(e,t):t instanceof Sc?Kh(t,e):function(e,t){if(Go(e.filters.length>0&&t.filters.length>0),Ic(e)&&Ic(t))return Oc(e,t.getFilters());var n=Tc(e)?e:t,r=Tc(e)?t:e,i=n.filters.map((function(e){return Zh(e,r)}));return Ec.create(i,"or")}(e,t),Qh(n)}function Kh(e,t){if(Ic(t))return Oc(t,e.getFilters());var n=t.filters.map((function(t){return Zh(e,t)}));return Ec.create(n,"or")}function Qh(e){if(Go(e instanceof Sc||e instanceof Ec),e instanceof Sc)return e;var t=e.getFilters();if(1===t.length)return Qh(t[0]);if(Nc(e))return e;var n=t.map((function(e){return Qh(e)})),r=[];return n.forEach((function(t){t instanceof Sc?r.push(t):t instanceof Ec&&(t.op===e.op?r.push.apply(r,w(t.filters)):r.push(t))})),1===r.length?r[0]:Ec.create(r,e.op)}var Yh=function(){function e(){Rr(this,e),this.un=new Xh}return Pr(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.un.add(t),Ru.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ru.resolve(this.un.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ru.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ru.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return Ru.resolve()}},{key:"createTargetIndexes",value:function(e,t){return Ru.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Ru.resolve(null)}},{key:"getIndexType",value:function(e,t){return Ru.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Ru.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ru.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Ru.resolve(Su.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Ru.resolve(Su.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Ru.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ru.resolve()}}]),e}(),Xh=function(){function e(){Rr(this,e),this.index={}}return Pr(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Rs(du.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Rs(du.comparator)).toArray()}}]),e}(),Jh=new Uint8Array(0),$h=function(){function e(t,n){Rr(this,e),this.databaseId=n,this.cn=new Xh,this.ln=new dl((function(e){return Hc(e)}),(function(e,t){return Wc(e,t)})),this.uid=t.uid||""}return Pr(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.cn.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.cn.add(t)}));var a={collectionId:r,parent:Zu(i)};return ed(e).put(a)}return Ru.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[cu(t),""],!1,!0);return ed(e).U(r).next((function(e){var r,i=Dr(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Yu(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=nd(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=rd(e);return a.next((function(e){o.put(xh(e,n.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=nd(e),r=rd(e),i=td(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"deleteAllFieldIndexes",value:function(e){var t=nd(e),n=td(e),r=rd(e);return t.j().next((function(){return n.j()})).next((function(){return r.j()}))}},{key:"createTargetIndexes",value:function(e,t){var n=this;return Ru.forEach(this.hn(t),(function(t){return n.getIndexType(e,t).next((function(r){if(0===r||1===r){var i=new zh(t).an();if(null!=i)return n.addFieldIndex(e,i)}}))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=td(e),i=!0,a=new Map;return Ru.forEach(this.hn(t),(function(t){return n.Pn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Sl(),o=[];return Ru.forEach(a,(function(i,a){Vo("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(Hc(t)));var u=function(e,t){var n=gu(t);if(void 0===n)return null;var r,i=Dr(Zc(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=Dr(ku(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Dr(Zc(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=Dr(ku(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Kc(e,o.fieldPath,e.startAt):Qc(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new gc(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=Dr(ku(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Qc(e,o.fieldPath,e.endAt):Kc(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new gc(r,i)}(a,i),f=n.In(i,a,c),h=n.In(i,a,l),d=n.Tn(i,a,s),p=n.En(i.indexId,u,f,c.inclusive,h,l.inclusive,d);return Ru.forEach(p,(function(n){return r.G(n,t.limit).next((function(t){t.forEach((function(t){var n=mu.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Ru.resolve(null)}))}},{key:"hn",value:function(e){var t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:Bh(Ec.create(e.filters,"and")).map((function(t){return qc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.ln.set(e,t),t)}},{key:"En",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.dn(t[h/c]):Jh,f=u.An(e,s,n[h%c],r),d=u.Rn(e,s,i[h%c],a),p=o.map((function(t){return u.An(e,s,t,!0)}));l.push.apply(l,w(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"An",value:function(e,t,n,r){var i=new Fh(e,mu.empty(),t,n);return r?i:i.Zt()}},{key:"Rn",value:function(e,t,n,r){var i=new Fh(e,mu.empty(),t,n);return r?i.Zt():i}},{key:"Pn",value:function(e,t){var n=new zh(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Dr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.rn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.hn(t);return Ru.forEach(i,(function(t){return n.Pn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Rs(vu.comparator),r=!1,i=Dr(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=Dr(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=Dr(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"Vn",value:function(e,t){var n,r=new Mh,i=Dr(ku(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Yt(a.kind);Rh.vt.It(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.zt()}},{key:"dn",value:function(e){var t=new Mh;return Rh.vt.It(e,t.Yt(0)),t.zt()}},{key:"mn",value:function(e,t){var n=new Mh;return Rh.vt.It(tc(this.databaseId,t),n.Yt(function(e){var t=ku(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.zt()}},{key:"Tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Mh);var i,a=0,o=Dr(ku(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Dr(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.fn(t,s.fieldPath)&&rc(c))r=this.gn(r,s,c);else{var h=f.Yt(s.kind);Rh.vt.It(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.pn(r)}},{key:"In",value:function(e,t,n){return this.Tn(e,t,n.position)}},{key:"pn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].zt();return t}},{key:"gn",value:function(e,t,n){var r,i=w(e),a=[],o=Dr(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Dr(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Mh;f.seed(l.zt()),Rh.vt.It(s,f.Yt(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"fn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Sc&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=nd(e),i=rd(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next((function(e){var t=[];return Ru.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new wu(t.sequenceNumber,new Su(mh(t.readTime),new mu(Yu(t.documentKey)),t.largestBatchId)):wu.empty(),r=e.fields.map((function(e){var t=k(e,2),n=t[0],r=t[1];return new bu(vu.fromServerFormat(n),r)}));return new yu(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:uu(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=nd(e),a=rd(e);return this.yn(e).next((function(e){return i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Ru.forEach(t,(function(t){return a.put(xh(t.indexId,r.uid,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Ru.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Ru.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Ru.forEach(a,(function(r){return n.wn(e,t,r).next((function(t){var a=n.Sn(i,r);return t.isEqual(a)?Ru.resolve():n.bn(e,i,r,t,a)}))}))}))}))}},{key:"Dn",value:function(e,t,n,r){return td(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"vn",value:function(e,t,n,r){return td(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(n,t.key),t.key.path.toArray()])}},{key:"wn",value:function(e,t,n){var r=td(e),i=new Rs(Uh);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,t)])},(function(e,r){i=i.add(new Fh(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"Sn",value:function(e,t){var n=new Rs(Uh),r=this.Vn(t,e);if(null==r)return n;var i=gu(t);if(null!=i){var a=e.data.field(i.fieldPath);if(rc(a)){var o,u=Dr(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Fh(t.indexId,e.key,this.dn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Fh(t.indexId,e.key,Jh,r));return n}},{key:"bn",value:function(e,t,n,r,i){var a=this;Vo("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Os(a),s=Os(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Os(o)):l?(i(u),u=Os(a)):(u=Os(a),s=Os(o))}}(r,i,Uh,(function(r){o.push(a.Dn(e,t,n,r))}),(function(r){o.push(a.vn(e,t,n,r))})),Ru.waitFor(o)}},{key:"yn",value:function(e){var t=1;return rd(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Uh(e,t)})).filter((function(e,t,n){return!t||0!==Uh(e,n[t-1])}));var r=[];r.push(e);var i,a=Dr(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Uh(o,e),s=Uh(o,t);if(0===u)r[0]=e.Zt();else if(u>0&&s<0)r.push(o),r.push(o.Zt());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Cn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Jh,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Jh,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Cn",value:function(e,t){return Uh(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(id)}},{key:"getMinOffset",value:function(e,t){var n=this;return Ru.mapArray(this.hn(t),(function(t){return n.Pn(e,t).next((function(e){return e||Wo()}))})).next(id)}}]),e}();function ed(e){return xs(e,"collectionParents")}function td(e){return xs(e,"indexEntries")}function nd(e){return xs(e,"indexConfiguration")}function rd(e){return xs(e,"indexState")}function id(e){Go(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Eu(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Su(t.readTime,t.documentKey,n)}var ad={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},od=function(){function e(t,n,r){Rr(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Pr(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function ud(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Go(1===u)})));var c,l=[],f=Dr(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=$u(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Ru.waitFor(a).next((function(){return l}))}function sd(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Wo();t=e.noDocument}return JSON.stringify(t).length}od.DEFAULT_COLLECTION_PERCENTILE=10,od.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,od.DEFAULT=new od(41943040,od.DEFAULT_COLLECTION_PERCENTILE,od.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),od.DISABLED=new od(-1,0,0);var cd=function(){function e(t,n,r,i){Rr(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}return Pr(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fd(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=hd(e),o=fd(e);return o.add({}).next((function(u){Go("number"==typeof u);var s,c=new sf(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Xf(e.ct,t)})),i=n.mutations.map((function(t){return Xf(e.ct,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Rs((function(e,t){return uu(e.canonicalString(),t.canonicalString())})),d=Dr(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=$u(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,es))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Fn[u]=c.keys()})),Ru.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return fd(e).get(t).next((function(e){return e?(Go(e.userId===n.userId),yh(n.serializer,e)):null}))}},{key:"Mn",value:function(e,t){var n=this;return this.Fn[t]?Ru.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Fn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return fd(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Go(t.batchId>=r),a=yh(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return fd(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fd(e).U("userMutationsIndex",n).next((function(e){return e.map((function(e){return yh(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Ju(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return hd(e).J({range:i},(function(r,i,o){var u=k(r,3),s=u[0],c=u[1],l=u[2],f=Yu(c);if(s===n.userId&&t.path.isEqual(f))return fd(e).get(l).next((function(e){if(!e)throw Wo();Go(e.userId===n.userId),a.push(yh(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Rs(uu),i=[];return t.forEach((function(t){var a=Ju(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=hd(e).J({range:o},(function(e,i,a){var o=k(e,3),u=o[0],s=o[1],c=o[2],l=Yu(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Ru.waitFor(i).next((function(){return n.xn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Ju(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Rs(uu);return hd(e).J({range:o},(function(e,t,a){var o=k(e,3),s=o[0],c=o[1],l=o[2],f=Yu(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.xn(e,u)}))}},{key:"xn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(fd(e).get(t).next((function(e){if(null===e)throw Wo();Go(e.userId===n.userId),r.push(yh(n.serializer,e))})))})),Ru.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return ud(e._e,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.On(t.batchId)})),Ru.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"On",value:function(e){delete this.Fn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ru.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return hd(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Yu(e[1]);i.push(a)}else r.done()})).next((function(){Go(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return ld(e,this.userId,t)}},{key:"Nn",value:function(e){var t=this;return dd(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"lt",value:function(t,n,r,i){return Go(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function ld(e,t,n){var r=Ju(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return hd(e).J({range:a,H:!0},(function(e,n,r){var a=k(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function fd(e){return xs(e,"mutations")}function hd(e){return xs(e,"documentMutations")}function dd(e){return xs(e,"mutationQueues")}var pd=function(){function e(t){Rr(this,e),this.Ln=t}return Pr(e,[{key:"next",value:function(){return this.Ln+=2,this.Ln}}],[{key:"Bn",value:function(){return new e(0)}},{key:"kn",value:function(){return new e(-1)}}]),e}(),vd=function(){function e(t,n){Rr(this,e),this.referenceDelegate=t,this.serializer=n}return Pr(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.qn(e).next((function(n){var r=new pd(n.highestTargetId);return n.highestTargetId=r.next(),t.Qn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.qn(e).next((function(e){return fu.fromTimestamp(new lu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.qn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.qn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Qn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Kn(e,t).next((function(){return n.qn(e).next((function(r){return r.targetCount+=1,n.$n(t,r),n.Qn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Kn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return md(e).delete(t.targetId)})).next((function(){return n.qn(e)})).next((function(t){return Go(t.targetCount>0),t.targetCount-=1,n.Qn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return md(e).J((function(o,u){var s=gh(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Ru.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return md(e).J((function(e,n){var r=gh(n);t(r)}))}},{key:"qn",value:function(e){return yd(e).get("targetGlobalKey").next((function(e){return Go(null!==e),e}))}},{key:"Qn",value:function(e,t){return yd(e).put("targetGlobalKey",t)}},{key:"Kn",value:function(e,t){return md(e).put(kh(this.serializer,t))}},{key:"$n",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.qn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Hc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return md(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=gh(n);Wc(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=gd(e);return t.forEach((function(t){var o=Zu(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Ru.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=gd(e);return Ru.forEach(t,(function(t){var a=Zu(t.path);return Ru.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=gd(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=gd(e),i=Sl();return r.J({range:n,H:!0},(function(e,t,n){var r=Yu(e[1]),a=new mu(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Zu(t.path),r=IDBKeyRange.bound([n],[cu(n)],!1,!0),i=0;return gd(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=k(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ot",value:function(e,t){return md(e).get(t).next((function(e){return e?gh(e):null}))}}]),e}();function md(e){return xs(e,"targets")}function yd(e){return xs(e,"targetGlobal")}function gd(e){return xs(e,"targetDocuments")}function kd(e,t){var n=k(e,2),r=n[0],i=n[1],a=k(t,2),o=a[0],u=a[1],s=uu(r,o);return 0===s?uu(i,u):s}var bd=function(){function e(t){Rr(this,e),this.Un=t,this.buffer=new Rs(kd),this.Wn=0}return Pr(e,[{key:"Gn",value:function(){return++this.Wn}},{key:"zn",value:function(e){var t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();kd(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),wd=function(){function e(t,n,r){Rr(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.jn=null}return Pr(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}},{key:"stop",value:function(){this.jn&&(this.jn.cancel(),this.jn=null)}},{key:"started",get:function(){return null!==this.jn}},{key:"Hn",value:function(e){var t=this;Vo("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.jn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Mu(e.t0)){e.next=12;break}Vo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Cu(e.t0);case 14:return e.next=16,t.Hn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),_d=function(){function e(t,n){Rr(this,e),this.Jn=t,this.params=n}return Pr(e,[{key:"calculateTargetCount",value:function(e,t){return this.Jn.Yn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Ru.resolve(qu.oe);var r=new bd(t);return this.Jn.forEachTarget(e,(function(e){return r.zn(e.sequenceNumber)})).next((function(){return n.Jn.Zn(e,(function(e){return r.zn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Vo("LruGarbageCollector","Garbage collection skipped; disabled"),Ru.resolve(ad)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Vo("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),ad):n.Xn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Jn.getCacheSize(e)}},{key:"Xn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Vo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),zo()<=Wi.DEBUG&&Vo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Ru.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function xd(e,t){return new _d(e,t)}var Sd=function(){function e(t,n){Rr(this,e),this.db=t,this.garbageCollector=xd(this,n)}return Pr(e,[{key:"Yn",value:function(e){var t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"er",value:function(e){var t=0;return this.Zn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Zn",value:function(e,t){return this.tr(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Ed(e,n)}},{key:"removeReference",value:function(e,t,n){return Ed(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Ed(e,t)}},{key:"nr",value:function(e,t){return function(e,t){var n=!1;return dd(e).Y((function(r){return ld(e,r,t).next((function(e){return e&&(n=!0),Ru.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.tr(e,(function(o,u){if(u<=t){var s=n.nr(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,fu.min()),gd(e).delete(function(e){return[0,Zu(e.path)]}(o))}))}));i.push(s)}})).next((function(){return Ru.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Ed(e,t)}},{key:"tr",value:function(e,t){var n,r=gd(e),i=qu.oe;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=k(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==qu.oe&&t(new mu(Yu(n)),i),i=s,n=u):i=qu.oe})).next((function(){i!==qu.oe&&t(new mu(Yu(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Ed(e,t){return gd(e).put(function(e,t){return{targetId:0,path:Zu(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Id=function(){function e(){Rr(this,e),this.changes=new dl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Pr(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,yc.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ru.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Td=function(){function e(t){Rr(this,e),this.serializer=t}return Pr(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Ad(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Ad(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],ph(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.rr(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=yc.newInvalidDocument(t);return Ad(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Od(t))},(function(e,i){r=n.ir(t,i)})).next((function(){return r}))}},{key:"sr",value:function(e,t){var n=this,r={size:0,document:yc.newInvalidDocument(t)};return Ad(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Od(t))},(function(e,i){r={document:n.ir(t,i),size:sd(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=vl();return this._r(e,t,(function(e,t){var i=n.ir(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ar",value:function(e,t){var n=this,r=vl(),i=new Ts(mu.comparator);return this._r(e,t,(function(e,t){var a=n.ir(e,t);r=r.insert(e,a),i=i.insert(e,sd(t))})).next((function(){return{documents:r,ur:i}}))}},{key:"_r",value:function(e,t,n){if(t.isEmpty())return Ru.resolve();var r=new Rs(Dd);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Od(r.first()),Od(r.last())),a=r.getIterator(),o=a.getNext();return Ad(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=mu.fromSegments([].concat(w(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Dd(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.$(Od(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r,i){var a=this,o=t.path,u=[o.popLast().toArray(),o.lastSegment(),ph(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ad(e).U(IDBKeyRange.bound(u,s,!0)).next((function(e){null==i||i.incrementDocumentReadCount(e.length);var n,o=vl(),u=Dr(e);try{for(u.s();!(n=u.n()).done;){var s=n.value,c=a.ir(mu.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);c.isFoundDocument()&&(cl(t,c)||r.has(c.key))&&(o=o.insert(c.key,c))}}catch(l){u.e(l)}finally{u.f()}return o}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=vl(),o=Pd(t,n),u=Pd(t,Su.max());return Ad(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.ir(mu.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Nd(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Rd(e).get("remoteDocumentGlobalKey").next((function(e){return Go(!!e),e}))}},{key:"rr",value:function(e,t){return Rd(e).put("remoteDocumentGlobalKey",t)}},{key:"ir",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Qf(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=mu.fromSegments(t.noDocument.path),i=mh(t.noDocument.readTime);n=yc.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Wo();var a=mu.fromSegments(t.unknownDocument.path),o=mh(t.unknownDocument.version);n=yc.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new lu(e[0],e[1]);return fu.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(fu.min()))return n}return yc.newInvalidDocument(e)}}]),e}();function Cd(e){return new Td(e)}var Nd=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this)).cr=e,i.trackRemovals=r,i.lr=new dl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Pr(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Rs((function(e,t){return uu(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.lr.get(a);if(n.push(t.cr.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=dh(t.cr.serializer,o);i=i.add(a.path.popLast());var c=sd(s);r+=c-u.size,n.push(t.cr.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=dh(t.cr.serializer,o.convertToNoDocument(fu.min()));n.push(t.cr.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.cr.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.cr.updateMetadata(e,r)),Ru.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.cr.sr(e,t).next((function(e){return n.lr.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.cr.ar(e,t).next((function(e){var t=e.documents;return e.ur.forEach((function(e,r){n.lr.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Id);function Rd(e){return xs(e,"remoteDocumentGlobal")}function Ad(e){return xs(e,"remoteDocumentsV14")}function Od(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Pd(e,t){var n=t.documentKey.path.toArray();return[e,ph(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Dd(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=uu(n[a],r[a]))return i;return(i=uu(n.length,r.length))||((i=uu(n[n.length-2],r[r.length-2]))||uu(n[n.length-1],r[r.length-1]))}var Ld=Pr((function e(t,n){Rr(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Md=function(){function e(t,n,r,i){Rr(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Pr(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Ql(r.mutation,e,Ps.empty(),lu.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Sl()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sl(),i=kl();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=yl();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=kl();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Sl())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=vl(),a=wl(),o=wl();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof $l)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Ql(o.mutation,t,o.mutation.getFieldMask(),lu.now())):a.set(t.key,Ps.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Ld(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=wl(),i=new Ts((function(e,t){return e-t})),a=Sl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Dr(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Ps.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Sl()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=bl();c.forEach((function(e){if(!a.has(e)){var n=Zl(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Ru.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return function(e){return mu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):el(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Ru.resolve(kl()),u=-1,s=a;return o.next((function(t){return Ru.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Ru.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Sl())})).next((function(e){return{batchId:u,changes:gl(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new mu(t)).next((function(e){var t=yl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=yl();return this.indexManager.getCollectionParents(e,a).next((function(u){return Ru.forEach(u,(function(u){var s=function(e,t){return new Yc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,u.child(a));return i.getDocumentsMatchingCollectionQuery(e,s,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,yc.newInvalidDocument(r)))}));var n=yl();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&Ql(a.mutation,r,Ps.empty(),lu.now()),cl(t,r)&&(n=n.insert(e,r))})),n}))}}]),e}(),Fd=function(){function e(t){Rr(this,e),this.serializer=t,this.hr=new Map,this.Pr=new Map}return Pr(e,[{key:"getBundleMetadata",value:function(e,t){return Ru.resolve(this.hr.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Uf(e.createTime)}}(t)),Ru.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ru.resolve(this.Pr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:bh(e.bundledQuery),readTime:Uf(e.readTime)}}(t)),Ru.resolve()}}]),e}(),Ud=function(){function e(){Rr(this,e),this.overlays=new Ts(mu.comparator),this.Ir=new Map}return Pr(e,[{key:"getOverlay",value:function(e,t){return Ru.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=kl();return Ru.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ht(e,t,i)})),Ru.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ir.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ir.delete(n)),Ru.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=kl(),i=t.length+1,a=new mu(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Ru.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Ts((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=kl(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=kl(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Ru.resolve(s)}},{key:"ht",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new lf(t,n));var a=this.Ir.get(t);void 0===a&&(a=Sl(),this.Ir.set(t,a)),this.Ir.set(t,a.add(n.key))}}]),e}(),jd=function(){function e(){Rr(this,e),this.sessionToken=Ls.EMPTY_BYTE_STRING}return Pr(e,[{key:"getSessionToken",value:function(e){return Ru.resolve(this.sessionToken)}},{key:"setSessionToken",value:function(e,t){return this.sessionToken=t,Ru.resolve()}}]),e}(),zd=function(){function e(){Rr(this,e),this.Tr=new Rs(Vd.Er),this.dr=new Rs(Vd.Ar)}return Pr(e,[{key:"isEmpty",value:function(){return this.Tr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Vd(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}},{key:"Rr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Vr(new Vd(e,t))}},{key:"mr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"gr",value:function(e){var t=this,n=new mu(new du([])),r=new Vd(n,e),i=new Vd(n,e+1),a=[];return this.dr.forEachInRange([r,i],(function(e){t.Vr(e),a.push(e.key)})),a}},{key:"pr",value:function(){var e=this;this.Tr.forEach((function(t){return e.Vr(t)}))}},{key:"Vr",value:function(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}},{key:"yr",value:function(e){var t=new mu(new du([])),n=new Vd(t,e),r=new Vd(t,e+1),i=Sl();return this.dr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Vd(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Vd=function(){function e(t,n){Rr(this,e),this.key=t,this.wr=n}return Pr(e,null,[{key:"Er",value:function(e,t){return mu.comparator(e.key,t.key)||uu(e.wr,t.wr)}},{key:"Ar",value:function(e,t){return uu(e.wr,t.wr)||mu.comparator(e.key,t.key)}}]),e}(),Bd=function(){function e(t,n){Rr(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Rs(Vd.Er)}return Pr(e,[{key:"checkEmpty",value:function(e){return Ru.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new sf(i,t,n,r);this.mutationQueue.push(a);var o,u=Dr(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.br=this.br.add(new Vd(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Ru.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Ru.resolve(this.Dr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.vr(n),i=r<0?0:r;return Ru.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ru.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}},{key:"getAllMutationBatches",value:function(e){return Ru.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Vd(t,0),i=new Vd(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],(function(e){var t=n.Dr(e.wr);a.push(t)})),Ru.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Rs(uu);return t.forEach((function(e){var t=new Vd(e,0),i=new Vd(e,Number.POSITIVE_INFINITY);n.br.forEachInRange([t,i],(function(e){r=r.add(e.wr)}))})),Ru.resolve(this.Cr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;mu.isDocumentKey(i)||(i=i.child(""));var a=new Vd(new mu(i),0),o=new Rs(uu);return this.br.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.wr)),!0)}),a),Ru.resolve(this.Cr(o))}},{key:"Cr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Dr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Go(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.br;return Ru.forEach(t.mutations,(function(i){var a=new Vd(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.br=r}))}},{key:"On",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Vd(t,0),r=this.br.firstAfterOrEqual(n);return Ru.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Ru.resolve()}},{key:"Fr",value:function(e,t){return this.vr(e)}},{key:"vr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Dr",value:function(e){var t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),qd=function(){function e(t){Rr(this,e),this.Mr=t,this.docs=new Ts(mu.comparator),this.size=0}return Pr(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ru.resolve(n?n.document.mutableCopy():yc.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=vl();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():yc.newInvalidDocument(e))})),Ru.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=vl(),a=t.path,o=new mu(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Eu(xu(l),n)<=0||(r.has(l.key)||cl(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Ru.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Wo()}},{key:"Or",value:function(e,t){return Ru.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Hd(this)}},{key:"getSize",value:function(e){return Ru.resolve(this.size)}}]),e}(),Hd=function(e){Fr(n,e);var t=Vr(n);function n(e){var r;return Rr(this,n),(r=t.call(this)).cr=e,r}return Pr(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.cr.addEntry(e,i)):t.cr.removeEntry(r)})),Ru.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.cr.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.cr.getEntries(e,t)}}]),n}(Id),Wd=function(){function e(t){Rr(this,e),this.persistence=t,this.Nr=new dl((function(e){return Hc(e)}),Wc),this.lastRemoteSnapshotVersion=fu.min(),this.highestTargetId=0,this.Lr=0,this.Br=new zd,this.targetCount=0,this.kr=pd.Bn()}return Pr(e,[{key:"forEachTarget",value:function(e,t){return this.Nr.forEach((function(e,n){return t(n)})),Ru.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ru.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ru.resolve(this.Lr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.kr.next(),Ru.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Ru.resolve()}},{key:"Kn",value:function(e){this.Nr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.kr=new pd(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Kn(t),this.targetCount+=1,Ru.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Kn(t),Ru.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Ru.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Nr.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Nr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Ru.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Ru.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Nr.get(t)||null;return Ru.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Br.Rr(t,n),Ru.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Br.mr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Ru.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Br.gr(t),Ru.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Br.yr(t);return Ru.resolve(n)}},{key:"containsKey",value:function(e,t){return Ru.resolve(this.Br.containsKey(t))}}]),e}(),Gd=function(){function e(t,n){var r=this;Rr(this,e),this.qr={},this.overlays={},this.Qr=new qu(0),this.Kr=!1,this.Kr=!0,this.$r=new jd,this.referenceDelegate=t(this),this.Ur=new Wd(this),this.indexManager=new Yh,this.remoteDocumentCache=function(e){return new qd(e)}((function(e){return r.referenceDelegate.Wr(e)})),this.serializer=new hh(n),this.Gr=new Fd(this.serializer)}return Pr(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Kr=!1,Promise.resolve()}},{key:"started",get:function(){return this.Kr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Ud,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.qr[e.toKey()];return n||(n=new Bd(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}},{key:"getGlobalsCache",value:function(){return this.$r}},{key:"getTargetCache",value:function(){return this.Ur}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Gr}},{key:"runTransaction",value:function(e,t,n){var r=this;Vo("MemoryPersistence","Starting transaction:",e);var i=new Zd(this.Qr.next());return this.referenceDelegate.zr(),n(i).next((function(e){return r.referenceDelegate.jr(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Hr",value:function(e,t){return Ru.or(Object.values(this.qr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Zd=function(e){Fr(n,e);var t=Vr(n);function n(e){var r;return Rr(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Pr(n)}(Tu),Kd=function(){function e(t){Rr(this,e),this.persistence=t,this.Jr=new zd,this.Yr=null}return Pr(e,[{key:"Xr",get:function(){if(this.Yr)return this.Yr;throw Wo()}},{key:"addReference",value:function(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Ru.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Ru.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xr.add(t.toString()),Ru.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Jr.gr(t.targetId).forEach((function(e){return n.Xr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"zr",value:function(){this.Yr=new Set}},{key:"jr",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ru.forEach(this.Xr,(function(r){var i=mu.fromPath(r);return t.ei(e,i).next((function(e){e||n.removeEntry(i,fu.min())}))})).next((function(){return t.Yr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.ei(e,t).next((function(e){e?n.Xr.delete(t.toString()):n.Xr.add(t.toString())}))}},{key:"Wr",value:function(e){return 0}},{key:"ei",value:function(e,t){var n=this;return Ru.or([function(){return Ru.resolve(n.Jr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Hr(e,t)}])}}],[{key:"Zr",value:function(t){return new e(t)}}]),e}(),Qd=function(){function e(t){Rr(this,e),this.serializer=t}return Pr(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new Au("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xu,{unique:!0}),e.createObjectStore("documentMutations")}(e),Yd(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Ru.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Yd(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fu.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").U().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xu,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Ru.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.ni(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.ri(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.ii(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.si(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.oi(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:hs});t.createIndex("collectionPathOverlayIndex",ds,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ps,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:ts});t.createIndex("documentKeyIndex",ns),t.createIndex("collectionGroupIndex",rs)}(e)})).next((function(){return i._i(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.ai(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ss}).createIndex("sequenceNumberIndex",cs,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ls}).createIndex("documentKeyIndex",fs,{unique:!1})}(e)}))),n<16&&r>=16&&(o=o.next((function(){t.objectStore("indexState").clear()})).next((function(){t.objectStore("indexEntries").clear()}))),n<17&&r>=17&&(o=o.next((function(){!function(e){e.createObjectStore("globals",{keyPath:"name"})}(e)}))),o}},{key:"ri",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=sd(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"ni",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next((function(n){return Ru.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",i).next((function(r){return Ru.forEach(r,(function(r){Go(r.userId===n.userId);var i=yh(t.serializer,r);return ud(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"ii",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new du(n),o=function(e){return[0,Zu(e)]}(a);r.push(t.get(o).next((function(n){return n?Ru.resolve():function(n){return t.put({targetId:0,path:Zu(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Ru.waitFor(r)}))}))}},{key:"si",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:us});var n=t.store("collectionParents"),r=new Xh,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Zu(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new du(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=k(e,3),r=(n[0],n[1]),a=(n[2],Yu(r));return i(a.popLast())}))}))}},{key:"oi",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=gh(r),a=kh(t.serializer,i);return n.put(a)}))}},{key:"_i",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new mu(du.fromString(e.document.name).popFirst(5)):e.noDocument?mu.fromSegments(e.noDocument.path):e.unknownDocument?mu.fromSegments(e.unknownDocument.path):Wo()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return Ru.waitFor(r)}))}},{key:"ai",value:function(e,t){var n=this,r=t.store("mutations"),i=Cd(this.serializer),a=new Gd(Kd.Zr,this.serializer.ct);return r.U().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Sl();yh(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Ru.forEach(r,(function(e,r){var o=new Fo(r),u=Th.lt(n.serializer,o),s=a.getIndexManager(o),c=cd.lt(o,n.serializer,s,a.referenceDelegate);return new Md(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new _s(t,qu.oe),e).next()}))}))}}]),e}();function Yd(e){e.createObjectStore("targetDocuments",{keyPath:as}).createIndex("documentTargetsIndex",os,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",is,{unique:!0}),e.createObjectStore("targetGlobal")}var Xd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Jd=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:17;if(Rr(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ui=a,this.window=o,this.document=u,this.ci=c,this.li=l,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=function(e){return Promise.resolve()},!e.D())throw new Qo(Ko.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Sd(this,i),this.Ai=n+"main",this.serializer=new hh(s),this.Ri=new Ou(this.Ai,this.hi,new Qd(this.serializer)),this.$r=new Nh,this.Ur=new vd(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Cd(this.serializer),this.Gr=new Sh,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===l&&Bo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Pr(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Qo(Ko.FAILED_PRECONDITION,Xd);return e.fi(),e.gi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ur.getHighestSequenceNumber(t)}))})).then((function(t){e.Qr=new qu(t,e.ci)})).then((function(){e.Kr=!0})).catch((function(t){return e.Ri&&e.Ri.close(),Promise.reject(t)}))}},{key:"yi",value:function(e){var t=this;return this.di=function(){var n=Cr(br().mark((function n(r){return br().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ri.L(function(){var t=Cr(br().mark((function t(n){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return ep(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.wi(t).next((function(t){t||(e.isPrimary=!1,e.ui.enqueueRetryable((function(){return e.di(!1)})))}))})).next((function(){return e.Si(t)})).next((function(n){return e.isPrimary&&!n?e.bi(t).next((function(){return!1})):!!n&&e.Di(t).next((function(){return!0}))}))})).catch((function(t){if(Mu(t))return Vo("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Vo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ui.enqueueRetryable((function(){return e.di(t)})),e.isPrimary=t}))}},{key:"wi",value:function(e){var t=this;return $d(e).get("owner").next((function(e){return Ru.resolve(t.vi(e))}))}},{key:"Ci",value:function(e){return ep(e).delete(this.clientId)}},{key:"Fi",value:function(){var e=Cr(br().mark((function e(){var t,n,r,i,a=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Mi(this.Ei,18e5)){e.next=6;break}return this.Ei=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=xs(e,"clientMetadata");return t.U().next((function(e){var n=a.xi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Ru.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Vi){n=Dr(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Vi.removeItem(this.Oi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.Fi()})).then((function(){return e.pi()}))}))}},{key:"vi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Si",value:function(e){var t=this;return this.li?Ru.resolve(!0):$d(e).get("owner").next((function(n){if(null!==n&&t.Mi(n.leaseTimestampMs,5e3)&&!t.Ni(n.ownerId)){if(t.vi(n)&&t.networkEnabled)return!0;if(!t.vi(n)){if(!n.allowTabSynchronization)throw new Qo(Ko.FAILED_PRECONDITION,Xd);return!1}}return!(!t.networkEnabled||!t.inForeground)||ep(e).U().next((function(e){return void 0===t.xi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Vo("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Cr(br().mark((function e(){var t=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),e.next=7,this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new _s(e,qu.oe);return t.bi(n).next((function(){return t.Ci(n)}))}));case 7:this.Ri.close(),this.qi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xi",value:function(e,t){var n=this;return e.filter((function(e){return n.Mi(e.updateTimeMs,t)&&!n.Ni(e.clientId)}))}},{key:"Qi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return ep(t).U().next((function(t){return e.xi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Kr}},{key:"getGlobalsCache",value:function(){return this.$r}},{key:"getMutationQueue",value:function(e,t){return cd.lt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ur}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new $h(e,this.serializer.ct.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Th.lt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Gr}},{key:"runTransaction",value:function(e,t,n){var r=this;Vo("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 17===e?ws:16===e?bs:15===e?ks:14===e?gs:13===e?ys:12===e?ms:11===e?vs:void Wo()}(this.hi);return this.Ri.runTransaction(e,a,o,(function(a){return i=new _s(a,r.Qr?r.Qr.next():qu.oe),"readwrite-primary"===t?r.wi(i).next((function(e){return!!e||r.Si(i)})).next((function(t){if(!t)throw Bo("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ui.enqueueRetryable((function(){return r.di(!1)})),new Qo(Ko.FAILED_PRECONDITION,Iu);return n(i)})).next((function(e){return r.Di(i).next((function(){return e}))})):r.Ki(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ki",value:function(e){var t=this;return $d(e).get("owner").next((function(e){if(null!==e&&t.Mi(e.leaseTimestampMs,5e3)&&!t.Ni(e.ownerId)&&!t.vi(e)&&!(t.li||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Qo(Ko.FAILED_PRECONDITION,Xd)}))}},{key:"Di",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $d(e).put("owner",t)}},{key:"bi",value:function(e){var t=this,n=$d(e);return n.get("owner").next((function(e){return t.vi(e)?(Vo("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ru.resolve()}))}},{key:"Mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Bo("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"fi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=function(){e.ui.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}},{key:"Bi",value:function(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}},{key:"gi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=function(){t.Li();var e=/(?:Version|Mobile)\/1[456]/;mi()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ui.enterRestrictedMode(!0),t.ui.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Pi))}},{key:"ki",value:function(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}},{key:"Ni",value:function(e){var t;try{var n=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return Vo("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Bo("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Li",value:function(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Bo("Failed to set zombie client id.",e)}}},{key:"qi",value:function(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch(e){}}},{key:"Oi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Ou.D()}}]),e}();function $d(e){return xs(e,"owner")}function ep(e){return xs(e,"clientMetadata")}function tp(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var np=function(){function e(t,n,r,i){Rr(this,e),this.targetId=t,this.fromCache=n,this.$i=r,this.Ui=i}return Pr(e,null,[{key:"Wi",value:function(t,n){var r,i=Sl(),a=Sl(),o=Dr(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),rp=function(){function e(){Rr(this,e),this._documentReadCount=0}return Pr(e,[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}]),e}(),ip=function(){function e(){Rr(this,e),this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=mi()?8:Pu(si())>0?6:4}return Pr(e,[{key:"initialize",value:function(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.Yi(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.Zi(e,t,r,n).next((function(e){a.result=e}))})).next((function(){if(!a.result){var n=new rp;return i.Xi(e,t,n).next((function(r){if(a.result=r,i.zi)return i.es(e,t,n,r.size)}))}})).next((function(){return a.result}))}},{key:"es",value:function(e,t,n,r){return n.documentReadCount<this.ji?(zo()<=Wi.DEBUG&&Vo("QueryEngine","SDK will not create cache indexes for query:",sl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ru.resolve()):(zo()<=Wi.DEBUG&&Vo("QueryEngine","Query:",sl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(zo()<=Wi.DEBUG&&Vo("QueryEngine","The SDK decides to create cache indexes for query:",sl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nl(t))):Ru.resolve())}},{key:"Yi",value:function(e,t){var n=this;if($c(t))return Ru.resolve(null);var r=nl(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=al(t,null,"F"),r=nl(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Sl.apply(void 0,w(i));return n.Ji.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ts(t,i);return n.ns(t,o,a,r.readTime)?n.Yi(e,al(t,null,"F")):n.rs(e,o,t,r)}))}))})))}))}},{key:"Zi",value:function(e,t,n,r){var i=this;return $c(t)||r.isEqual(fu.min())?Ru.resolve(null):this.Ji.getDocuments(e,n).next((function(a){var o=i.ts(t,a);return i.ns(t,o,n,r)?Ru.resolve(null):(zo()<=Wi.DEBUG&&Vo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sl(t)),i.rs(e,o,t,_u(r,-1)).next((function(e){return e})))}))}},{key:"ts",value:function(e,t){var n=new Rs(fl(e));return t.forEach((function(t,r){cl(e,r)&&(n=n.add(r))})),n}},{key:"ns",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Xi",value:function(e,t,n){return zo()<=Wi.DEBUG&&Vo("QueryEngine","Using full collection scan to execute query:",sl(t)),this.Ji.getDocumentsMatchingQuery(e,t,Su.min(),n)}},{key:"rs",value:function(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),ap=function(){function e(t,n,r,i){Rr(this,e),this.persistence=t,this.ss=n,this.serializer=i,this.os=new Ts(uu),this._s=new dl((function(e){return Hc(e)}),Wc),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(r)}return Pr(e,[{key:"ls",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Md(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.os)}))}}]),e}();function op(e,t,n,r){return new ap(e,t,n,r)}function up(e,t){return sp.apply(this,arguments)}function sp(){return(sp=Cr(br().mark((function e(t,n){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zo(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.ls(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Sl(),s=Dr(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Dr(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Dr(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=Dr(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{hs:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cp(e,t){var n=Zo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Ru.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Go(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Sl(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function lp(e){var t=Zo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ur.getLastRemoteSnapshotVersion(e)}))}function fp(e,t){var n=Zo(e),r=t.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Ur.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Ur.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Ls.EMPTY_BYTE_STRING,fu.min()).withLastLimboFreeSnapshotVersion(fu.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Ur.updateTargetData(e,c))}}));var u=vl(),s=Sl();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(hp(e,a,t.documentUpdates).next((function(e){u=e.Ps,s=e.Is}))),!r.isEqual(fu.min())){var c=n.Ur.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Ru.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.os=i,e}))}function hp(e,t,n){var r=Sl(),i=Sl();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=vl();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(fu.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Vo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Ps:r,Is:i}}))}function dp(e,t){var n=Zo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function pp(e,t){var n=Zo(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ur.getTargetData(e,t).next((function(i){return i?(r=i,Ru.resolve(r)):n.Ur.allocateTargetId(e).next((function(i){return r=new fh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e}))}function vp(e,t,n){return mp.apply(this,arguments)}function mp(){return(mp=Cr(br().mark((function e(t,n,r){var i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Zo(t),a=i.os.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Mu(e.t1)){e.next=12;break}throw e.t1;case 12:Vo("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.os=i.os.remove(n),i._s.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function yp(e,t,n){var r=Zo(e),i=fu.min(),a=Sl();return r.persistence.runTransaction("Execute query","readwrite",(function(e){return function(e,t,n){var r=Zo(e),i=r._s.get(n);return void 0!==i?Ru.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,nl(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ss.getDocumentsMatchingQuery(e,t,n?i:fu.min(),n?a:Sl())})).next((function(e){return bp(r,ll(t),e),{documents:e,Ts:a}}))}))}function gp(e,t){var n=Zo(e),r=Zo(n.Ur),i=n.os.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ot(e,t).next((function(e){return e?e.target:null}))}))}function kp(e,t){var n=Zo(e),r=n.us.get(t)||fu.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.cs.getAllFromCollectionGroup(e,t,_u(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return bp(n,t,e),e}))}function bp(e,t,n){var r=e.us.get(t)||fu.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.us.set(t,r)}function wp(e,t,n,r){return _p.apply(this,arguments)}function _p(){return(_p=Cr(br().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Zo(t),o=Sl(),u=vl(),s=Dr(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Es(l.metadata.name),l.document&&(o=o.add(f)),(h=n.ds(l)).setReadTime(n.As(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.cs.newChangeBuffer({trackRemovals:!0}),e.next=7,pp(a,function(e){return nl(Jc(du.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return hp(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Ur.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Ur.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Ps,t.Is)})).next((function(){return t.Ps}))}))})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xp(e,t){return Sp.apply(this,arguments)}function Sp(){return Sp=Cr(br().mark((function e(t,n){var r,i,a,o=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Sl(),e.next=3,pp(t,nl(bh(n.bundledQuery)));case 3:return i=e.sent,a=Zo(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Uf(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Gr.saveNamedQuery(e,n);var o=i.withResumeToken(Ls.EMPTY_BYTE_STRING,t);return a.os=a.os.insert(o.targetId,o),a.Ur.updateTargetData(e,o).next((function(){return a.Ur.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Ur.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Gr.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Sp.apply(this,arguments)}function Ep(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Ip(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Tp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Cp=function(){function e(t,n,r,i){Rr(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Pr(e,[{key:"Vs",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Rs",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Qo(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Bo("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Np=function(){function e(t,n,r){Rr(this,e),this.targetId=t,this.state=n,this.error=r}return Pr(e,[{key:"Vs",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Rs",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Qo(i.error.code,i.error.message))),a?new e(t,i.state,r):(Bo("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Rp=function(){function e(t,n){Rr(this,e),this.clientId=t,this.activeTargetIds=n}return Pr(e,null,[{key:"Rs",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Il(),o=0;i&&o<r.activeTargetIds.length;++o)i=Gu(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Bo("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Ap=function(){function e(t,n){Rr(this,e),this.clientId=t,this.onlineState=n}return Pr(e,null,[{key:"Rs",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Bo("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Op=function(){function e(){Rr(this,e),this.activeTargetIds=Il()}return Pr(e,[{key:"fs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"gs",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Vs",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Pp=function(){function e(t,n,r,i,a){Rr(this,e),this.window=t,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ts(uu),this.started=!1,this.bs=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ds=Ep(this.persistenceKey,this.ps),this.vs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Op),this.Cs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Fs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ms=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.xs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Os=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}return Pr(e,[{key:"start",value:function(){var e=Cr(br().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Qi();case 2:t=e.sent,n=Dr(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ps){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Ep(this.persistenceKey,i)))&&(o=Rp.Rs(i,a))&&(this.Ss=this.Ss.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Ns(),(u=this.storage.getItem(this.xs))&&(s=this.Ls(u))&&this.Bs(s),c=Dr(this.bs);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ws(f)}catch(d){c.e(d)}finally{c.f()}this.bs=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.vs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ks(this.Ss)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Ss.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.qs(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.qs(e,t,n),this.Qs(e)}},{key:"addLocalQueryTarget",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="not-current";if(this.isActiveQueryTarget(e)){var r=this.storage.getItem(Tp(this.persistenceKey,e));if(r){var i=Np.Rs(e,r);i&&(n=i.state)}}return t&&this.Ks.fs(e),this.Ns(),n}},{key:"removeLocalQueryTarget",value:function(e){this.Ks.gs(e),this.Ns()}},{key:"isLocalQueryTarget",value:function(e){return this.Ks.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Tp(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.$s(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Qs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Us(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ws(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Vo("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Vo("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Vo("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ws",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Vo("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Bo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(Cr(br().mark((function e(){var r,i,a,o,u,s,c;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Cs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Gs(n.key),e.abrupt("return",t.zs(r,null));case 6:if(!(i=t.js(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.zs(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Fs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Hs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Js(a));case 16:e.next=41;break;case 18:if(!t.Ms.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ys(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Zs(o));case 23:e.next=41;break;case 25:if(n.key!==t.xs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Ls(n.newValue))){e.next=30;break}return e.abrupt("return",t.Bs(u));case 30:e.next=41;break;case 32:if(n.key!==t.vs){e.next=37;break}s=function(e){var t=qu.oe;if(null!=e)try{var n=JSON.parse(e);Go("number"==typeof n),t=n}catch(e){Bo("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==qu.oe&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Os){e.next=41;break}return c=t.Xs(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.eo(e)})));case 41:e.next=44;break;case 43:t.bs.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ks",get:function(){return this.Ss.get(this.ps)}},{key:"Ns",value:function(){this.setItem(this.Ds,this.Ks.Vs())}},{key:"qs",value:function(e,t,n){var r=new Cp(this.currentUser,e,t,n),i=Ip(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Vs())}},{key:"Qs",value:function(e){var t=Ip(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Us",value:function(e){var t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}},{key:"$s",value:function(e,t,n){var r=Tp(this.persistenceKey,e),i=new Np(e,t,n);this.setItem(r,i.Vs())}},{key:"Ws",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}},{key:"Gs",value:function(e){var t=this.Cs.exec(e);return t?t[1]:null}},{key:"js",value:function(e,t){var n=this.Gs(e);return Rp.Rs(n,t)}},{key:"Hs",value:function(e,t){var n=this.Fs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Cp.Rs(new Fo(i),r,t)}},{key:"Ys",value:function(e,t){var n=this.Ms.exec(e),r=Number(n[1]);return Np.Rs(r,t)}},{key:"Ls",value:function(e){return Ap.Rs(e)}},{key:"Xs",value:function(e){return JSON.parse(e)}},{key:"Js",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.no(t.batchId,t.state,t.error));case 2:Vo("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Zs",value:function(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}},{key:"zs",value:function(e,t){var n=this,r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),a=this.ks(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.io(o,u).then((function(){n.Ss=r}))}},{key:"Bs",value:function(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ks",value:function(e){var t=Il();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Dp=function(){function e(){Rr(this,e),this.so=new Op,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Pr(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.oo[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.so.gs(e)}},{key:"isLocalQueryTarget",value:function(e){return this.so.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.oo[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.so.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.so.activeTargetIds.has(e)}},{key:"start",value:function(){return this.so=new Op,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Lp=function(){function e(){Rr(this,e)}return Pr(e,[{key:"_o",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Mp=function(){function e(){var t=this;Rr(this,e),this.ao=function(){return t.uo()},this.co=function(){return t.lo()},this.ho=[],this.Po()}return Pr(e,[{key:"_o",value:function(e){this.ho.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}},{key:"Po",value:function(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}},{key:"uo",value:function(){Vo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Dr(this.ho);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"lo",value:function(){Vo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Dr(this.ho);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Fp=null;function Up(){return null===Fp?Fp=268435456+Math.round(2147483648*Math.random()):Fp++,"0x"+Fp.toString(16)}var jp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},zp=function(){function e(t){Rr(this,e),this.Io=t.Io,this.To=t.To}return Pr(e,[{key:"Eo",value:function(e){this.Ao=e}},{key:"Ro",value:function(e){this.Vo=e}},{key:"mo",value:function(e){this.fo=e}},{key:"onMessage",value:function(e){this.po=e}},{key:"close",value:function(){this.To()}},{key:"send",value:function(e){this.Io(e)}},{key:"yo",value:function(){this.Ao()}},{key:"wo",value:function(){this.Vo()}},{key:"So",value:function(e){this.fo(e)}},{key:"bo",value:function(e){this.po(e)}}]),e}(),Vp="WebChannelConnection",Bp=function(e){Fr(n,e);var t=Vr(n);function n(e){var r;return Rr(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return Pr(n,[{key:"No",value:function(e,t,n,r){var i=Up();return new Promise((function(a,o){var u=new Io;u.setWithCredentials(!0),u.listenOnce(Co.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case No.NO_ERROR:var t=u.getResponseJson();Vo(Vp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case No.TIMEOUT:Vo(Vp,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Qo(Ko.DEADLINE_EXCEEDED,"Request time out"));break;case No.HTTP_ERROR:var n=u.getStatus();if(Vo(Vp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ko).indexOf(t)>=0?t:Ko.UNKNOWN}(s.status);o(new Qo(c,s.message))}else o(new Qo(Ko.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Qo(Ko.UNAVAILABLE,"Connection failed."));break;default:Wo()}}finally{Vo(Vp,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Vo(Vp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Bo",value:function(e,t,n){var r=Up(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Po(),o=Oo(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");Vo(Vp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new zp({Io:function(t){h?Vo(Vp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(Vo(Vp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),Vo(Vp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},To:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,To.EventType.OPEN,(function(){h||(Vo(Vp,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),d.yo())})),p(l,To.EventType.CLOSE,(function(){h||(h=!0,Vo(Vp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.So())})),p(l,To.EventType.ERROR,(function(t){h||(h=!0,qo(Vp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.So(new Qo(Ko.UNAVAILABLE,"The operation could not be completed")))})),p(l,To.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Go(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Vo(Vp,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=rf[e];if(void 0!==t)return df(t)}(u),c=o.message;void 0===s&&(s=Ko.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.So(new Qo(s,c)),l.close()}else Vo(Vp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.bo(i)}})),p(o,Ao.STAT_EVENT,(function(t){t.stat===Ro.PROXY?Vo(Vp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ro.NOPROXY&&Vo(Vp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.wo()}),0),d}}]),n}(function(){function e(t){Rr(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+t.host,this.vo="projects/".concat(r,"/databases/").concat(i),this.Co="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return Pr(e,[{key:"Fo",get:function(){return!1}},{key:"Mo",value:function(e,t,n,r,i){var a=Up(),o=this.xo(e,t.toUriEncodedString());Vo("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,r,i),this.No(e,o,u,n).then((function(t){return Vo("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw qo("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Lo",value:function(e,t,n,r,i,a){return this.Mo(e,t,n,r,i)}},{key:"Oo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Uo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"xo",value:function(e,t){var n=jp[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}},{key:"terminate",value:function(){}}]),e}());function qp(){return"undefined"!=typeof window?window:null}function Hp(){return"undefined"!=typeof document?document:null}function Wp(e){return new Pf(e,!0)}var Gp=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Rr(this,e),this.ui=t,this.timerId=n,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}return Pr(e,[{key:"reset",value:function(){this.Ko=0}},{key:"Wo",value:function(){this.Ko=this.Qo}},{key:"Go",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Vo("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(function(){return t.Uo=Date.now(),e()})),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}},{key:"jo",value:function(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}},{key:"cancel",value:function(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}},{key:"zo",value:function(){return(Math.random()-.5)*this.Ko}}]),e}(),Zp=function(){function e(t,n,r,i,a,o,u,s){Rr(this,e),this.ui=t,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gp(t,n)}return Pr(e,[{key:"n_",value:function(){return 1===this.state||5===this.state||this.r_()}},{key:"r_",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){this.e_=0,4!==this.state?this.auth():this.i_()}},{key:"stop",value:function(){var e=Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.n_(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"s_",value:function(){this.state=0,this.t_.reset()}},{key:"o_",value:function(){var e=this;this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(function(){return e.__()})))}},{key:"a_",value:function(e){this.u_(),this.stream.send(e)}},{key:"__",value:function(){var e=Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.r_()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"u_",value:function(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}},{key:"c_",value:function(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}},{key:"close",value:function(){var e=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==t?this.t_.reset():n&&n.code===Ko.RESOURCE_EXHAUSTED?(Bo(n.toString()),Bo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Ko.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.mo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"l_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=k(t,2),i=r[0],a=r[1];e.Yo===n&&e.P_(i,a)}),(function(n){t((function(){var t=new Qo(Ko.UNKNOWN,"Fetching auth token failed: "+n.message);return e.I_(t)}))}))}},{key:"P_",value:function(e,t){var n=this,r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((function(){r((function(){return n.listener.Eo()}))})),this.stream.Ro((function(){r((function(){return n.state=2,n.Xo=n.ui.enqueueAfterDelay(n.Jo,1e4,(function(){return n.r_()&&(n.state=3),Promise.resolve()})),n.listener.Ro()}))})),this.stream.mo((function(e){r((function(){return n.I_(e)}))})),this.stream.onMessage((function(e){r((function(){return 1==++n.e_?n.E_(e):n.onNext(e)}))}))}},{key:"i_",value:function(){var e=this;this.state=5,this.t_.Go(Cr(br().mark((function t(){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"I_",value:function(e){return Vo("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"h_",value:function(e){var t=this;return function(n){t.ui.enqueueAndForget((function(){return t.Yo===e?n():(Vo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Kp=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i,a,o,u){var s;return Rr(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return Pr(n,[{key:"T_",value:function(e,t){return this.connection.Bo("Listen",e,t)}},{key:"E_",value:function(e){return this.onNext(e)}},{key:"onNext",value:function(e){this.t_.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Wo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Go(void 0===t||"string"==typeof t),Ls.fromBase64String(t||"")):(Go(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Ls.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Ko.UNKNOWN:df(e.code);return new Qo(t,e.message||"")}(o);n=new Ef(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=qf(e,s.document.name),l=Uf(s.document.updateTime),f=s.document.createTime?Uf(s.document.createTime):fu.min(),h=new vc({mapValue:{fields:s.document.fields}}),d=yc.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new xf(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=qf(e,m.document),g=m.readTime?Uf(m.readTime):fu.min(),k=yc.newNoDocument(y,g),b=m.removedTargetIds||[];n=new xf([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=qf(e,w.document),x=w.removedTargetIds||[];n=new xf([],x,_,null)}else{if(!("filter"in t))return Wo();t.filter;var S=t.filter;S.targetId;var E=S.count,I=void 0===E?0:E,T=S.unchangedNames,C=new ff(I,T),N=S.targetId;n=new Sf(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return fu.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?fu.min():t.readTime?Uf(t.readTime):fu.min()}(e);return this.listener.d_(t,n)}},{key:"A_",value:function(e){var t={};t.database=Gf(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Gc(r)?{documents:$f(e,r)}:{query:eh(e,r)._t}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Mf(e,t.resumeToken);var i=Df(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(fu.min())>0){n.readTime=Lf(e,t.snapshotVersion.toTimestamp());var a=Df(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Wo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}},{key:"R_",value:function(e){var t={};t.database=Gf(this.serializer),t.removeTarget=e,this.a_(t)}}]),n}(Zp),Qp=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i,a,o,u){var s;return Rr(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return Pr(n,[{key:"V_",get:function(){return this.e_>0}},{key:"start",value:function(){this.lastStreamToken=void 0,wo(Ur(n.prototype),"start",this).call(this)}},{key:"l_",value:function(){this.V_&&this.m_([])}},{key:"T_",value:function(e,t){return this.connection.Bo("Write",e,t)}},{key:"E_",value:function(e){return Go(!!e.streamToken),this.lastStreamToken=e.streamToken,Go(!e.writeResults||0===e.writeResults.length),this.listener.f_()}},{key:"onNext",value:function(e){Go(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();var t=function(e,t){return e&&e.length>0?(Go(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Uf(e.updateTime):Uf(t);return n.isEqual(fu.min())&&(n=Uf(t)),new ql(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Uf(e.commitTime);return this.listener.g_(n,t)}},{key:"p_",value:function(){var e={};e.database=Gf(this.serializer),this.a_(e)}},{key:"m_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Xf(t.serializer,e)}))};this.a_(n)}}]),n}(Zp),Yp=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i,a){var o;return Rr(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.y_=!1,o}return Pr(n,[{key:"w_",value:function(){if(this.y_)throw new Qo(Ko.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Mo",value:function(e,t,n,r){var i=this;return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=k(a,2),u=o[0],s=o[1];return i.connection.Mo(e,zf(t,n),r,u,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ko.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Qo(Ko.UNKNOWN,e.toString())}))}},{key:"Lo",value:function(e,t,n,r,i){var a=this;return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(o){var u=k(o,2),s=u[0],c=u[1];return a.connection.Lo(e,zf(t,n),r,s,c,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ko.UNAUTHENTICATED&&(a.authCredentials.invalidateToken(),a.appCheckCredentials.invalidateToken()),e):new Qo(Ko.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.y_=!0,this.connection.terminate()}}]),n}(Pr((function e(){Rr(this,e)}))),Xp=function(){function e(t,n){Rr(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}return Pr(e,[{key:"v_",value:function(){var e=this;0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.b_=null,e.F_("Backend didn't respond within 10 seconds."),e.C_("Offline"),Promise.resolve()})))}},{key:"M_",value:function(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}},{key:"set",value:function(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}},{key:"C_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"F_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(Bo(t),this.D_=!1):Vo("OnlineStateTracker",t)}},{key:"x_",value:function(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}]),e}(),Jp=Pr((function e(t,n,r,i,a){var o=this;Rr(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((function(e){r.enqueueAndForget(Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=cv(o),!e.t0){e.next=5;break}return Vo("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Zo(t)).L_.add(4),e.next=4,tv(n);case 4:return n.q_.set("Unknown"),n.L_.delete(4),e.next=8,$p(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.q_=new Xp(r,i)}));function $p(e){return ev.apply(this,arguments)}function ev(){return(ev=Cr(br().mark((function e(t){var n,r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!cv(t)){e.next=18;break}n=Dr(t.B_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function tv(e){return nv.apply(this,arguments)}function nv(){return(nv=Cr(br().mark((function e(t){var n,r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Dr(t.B_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function rv(e,t){var n=Zo(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),sv(n)?uv(n):zv(n).r_()&&av(n,t))}function iv(e,t){var n=Zo(e),r=zv(n);n.N_.delete(t),r.r_()&&ov(n,t),0===n.N_.size&&(r.r_()?r.o_():cv(n)&&n.q_.set("Unknown"))}function av(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(fu.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}zv(e).A_(t)}function ov(e,t){e.Q_.xe(t),zv(e).R_(t)}function uv(e){e.Q_=new Tf({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ot:function(t){return e.N_.get(t)||null},tt:function(){return e.datastore.serializer.databaseId}}),zv(e).start(),e.q_.v_()}function sv(e){return cv(e)&&!zv(e).n_()&&e.N_.size>0}function cv(e){return 0===Zo(e).L_.size}function lv(e){e.Q_=void 0}function fv(e){return hv.apply(this,arguments)}function hv(){return(hv=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.q_.set("Online");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dv(e){return pv.apply(this,arguments)}function pv(){return(pv=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.N_.forEach((function(e,n){av(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vv(e,t){return mv.apply(this,arguments)}function mv(){return(mv=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lv(t),sv(t)?(t.q_.M_(n),uv(t)):t.q_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yv(e,t,n){return gv.apply(this,arguments)}function gv(){return gv=Cr(br().mark((function e(t,n,r){var i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.q_.set("Online"),!(n instanceof Ef&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Cr(br().mark((function e(t,n){var r,i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Dr(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.N_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.N_.delete(o),t.Q_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Vo("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,kv(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof xf?t.Q_.Ke(n):n instanceof Sf?t.Q_.He(n):t.Q_.We(n),r.isEqual(fu.min())){e.next=29;break}return e.prev=14,e.next=17,lp(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Q_.rt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.N_.get(t);if(r){e.N_.set(t,r.withResumeToken(Ls.EMPTY_BYTE_STRING,r.snapshotVersion)),ov(e,t);var i=new fh(r.target,t,n,r.sequenceNumber);av(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Vo("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,kv(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),gv.apply(this,arguments)}function kv(e,t,n){return bv.apply(this,arguments)}function bv(){return(bv=Cr(br().mark((function e(t,n,r){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Mu(n)){e.next=2;break}throw n;case 2:return t.L_.add(1),e.next=5,tv(t);case 5:t.q_.set("Offline"),r||(r=function(){return lp(t.localStore)}),t.asyncQueue.enqueueRetryable(Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vo("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.L_.delete(1),e.next=6,$p(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wv(e,t){return t().catch((function(n){return kv(e,n,t)}))}function _v(e){return xv.apply(this,arguments)}function xv(){return(xv=Cr(br().mark((function e(t){var n,r,i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Zo(t),r=Vv(n),i=n.O_.length>0?n.O_[n.O_.length-1].batchId:-1;case 2:if(!Sv(n)){e.next=19;break}return e.prev=3,e.next=6,dp(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.O_.length&&r.o_(),e.abrupt("break",19);case 10:i=a.batchId,Ev(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,kv(n,e.t0);case 17:e.next=2;break;case 19:Iv(n)&&Tv(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function Sv(e){return cv(e)&&e.O_.length<10}function Ev(e,t){e.O_.push(t);var n=Vv(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Iv(e){return cv(e)&&!Vv(e).n_()&&e.O_.length>0}function Tv(e){Vv(e).start()}function Cv(e){return Nv.apply(this,arguments)}function Nv(){return(Nv=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Vv(t).p_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rv(e){return Av.apply(this,arguments)}function Av(){return(Av=Cr(br().mark((function e(t){var n,r,i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Vv(t),r=Dr(t.O_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.m_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ov(e,t,n){return Pv.apply(this,arguments)}function Pv(){return(Pv=Cr(br().mark((function e(t,n,r){var i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.O_.shift(),a=cf.from(i,n,r),e.next=3,wv(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,_v(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dv(e,t){return Lv.apply(this,arguments)}function Lv(){return Lv=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Vv(t).V_,!e.t0){e.next=4;break}return e.next=4,function(){var e=Cr(br().mark((function e(t,n){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return hf(e)&&e!==Ko.ABORTED}(n.code)){e.next=7;break}return r=t.O_.shift(),Vv(t).s_(),e.next=5,wv(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,_v(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Iv(t)&&Tv(t);case 5:case"end":return e.stop()}}),e)}))),Lv.apply(this,arguments)}function Mv(e,t){return Fv.apply(this,arguments)}function Fv(){return(Fv=Cr(br().mark((function e(t,n){var r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Zo(t)).asyncQueue.verifyOperationInProgress(),Vo("RemoteStore","RemoteStore received new credentials"),i=cv(r),r.L_.add(3),e.next=6,tv(r);case 6:return i&&r.q_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.L_.delete(3),e.next=12,$p(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uv(e,t){return jv.apply(this,arguments)}function jv(){return(jv=Cr(br().mark((function e(t,n){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Zo(t),!n){e.next=7;break}return r.L_.delete(2),e.next=5,$p(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.L_.add(2),e.next=12,tv(r);case 12:r.q_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zv(e){return e.K_||(e.K_=function(e,t,n){var r=Zo(e);return r.w_(),new Kp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:fv.bind(null,e),Ro:dv.bind(null,e),mo:vv.bind(null,e),d_:yv.bind(null,e)}),e.B_.push(function(){var t=Cr(br().mark((function t(n){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.K_.s_(),sv(e)?uv(e):e.q_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.K_.stop();case 6:lv(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.K_}function Vv(e){return e.U_||(e.U_=function(e,t,n){var r=Zo(e);return r.w_(),new Qp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:function(){return Promise.resolve()},Ro:Cv.bind(null,e),mo:Dv.bind(null,e),f_:Rv.bind(null,e),g_:Ov.bind(null,e)}),e.B_.push(function(){var t=Cr(br().mark((function t(n){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.U_.s_(),t.next=4,_v(e);case 4:t.next=9;break;case 6:return t.next=8,e.U_.stop();case 8:e.O_.length>0&&(Vo("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.U_}var Bv=function(){function e(t,n,r,i,a){Rr(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Pr(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qo(Ko.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function qv(e,t){if(Bo("AsyncQueue","".concat(t,": ").concat(e)),Mu(e))return new Qo(Ko.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Hv,Wv,Gv=function(){function e(t){Rr(this,e),this.comparator=t?function(e,n){return t(e,n)||mu.comparator(e.key,n.key)}:function(e,t){return mu.comparator(e.key,t.key)},this.keyedMap=yl(),this.sortedSet=new Ts(this.comparator)}return Pr(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Zv=function(){function e(){Rr(this,e),this.W_=new Ts(mu.comparator)}return Pr(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Wo():this.W_=this.W_.insert(t,e)}},{key:"G_",value:function(){var e=[];return this.W_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Kv=function(){function e(t,n,r,i,a,o,u,s,c){Rr(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return Pr(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ol(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Gv.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Qv=function(){function e(){Rr(this,e),this.z_=void 0,this.j_=[]}return Pr(e,[{key:"H_",value:function(){return this.j_.some((function(e){return e.J_()}))}}]),e}(),Yv=function(){function e(){Rr(this,e),this.queries=Xv(),this.onlineState="Unknown",this.Y_=new Set}return Pr(e,[{key:"terminate",value:function(){!function(e,t){var n=Zo(e),r=n.queries;n.queries=Xv(),r.forEach((function(e,n){var r,i=Dr(n.j_);try{for(i.s();!(r=i.n()).done;){r.value.onError(t)}}catch(a){i.e(a)}finally{i.f()}}))}(this,new Qo(Ko.ABORTED,"Firestore shutting down"))}}]),e}();function Xv(){return new dl((function(e){return ul(e)}),ol)}function Jv(e,t){return $v.apply(this,arguments)}function $v(){return($v=Cr(br().mark((function e(t,n){var r,i,a,o,u;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Zo(t),i=3,a=n.query,(o=r.queries.get(a))?!o.H_()&&n.J_()&&(i=2):(o=new Qv,i=n.J_()?0:1),e.prev=5,e.t0=i,e.next=0===e.t0?9:1===e.t0?13:2===e.t0?17:19;break;case 9:return e.next=11,r.onListen(a,!0);case 11:return o.z_=e.sent,e.abrupt("break",19);case 13:return e.next=15,r.onListen(a,!1);case 15:return o.z_=e.sent,e.abrupt("break",19);case 17:return e.next=19,r.onFirstRemoteStoreListen(a);case 19:e.next=25;break;case 21:return e.prev=21,e.t1=e.catch(5),u=qv(e.t1,"Initialization of query '".concat(sl(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 25:r.queries.set(a,o),o.j_.push(n),n.Z_(r.onlineState),o.z_&&n.X_(o.z_)&&im(r);case 26:case"end":return e.stop()}}),e,null,[[5,21]])})))).apply(this,arguments)}function em(e,t){return tm.apply(this,arguments)}function tm(){return(tm=Cr(br().mark((function e(t,n){var r,i,a,o,u;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Zo(t),i=n.query,a=3,(o=r.queries.get(i))&&(u=o.j_.indexOf(n))>=0&&(o.j_.splice(u,1),0===o.j_.length?a=n.J_()?0:1:!o.H_()&&n.J_()&&(a=2)),e.t0=a,e.next=0===e.t0?7:1===e.t0?8:2===e.t0?9:10;break;case 7:return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i,!0)));case 8:return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i,!1)));case 9:return e.abrupt("return",r.onLastRemoteStoreUnlisten(i));case 10:return e.abrupt("return");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nm(e,t){var n,r=Zo(e),i=!1,a=Dr(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Dr(s.j_);try{for(l.s();!(c=l.n()).done;){c.value.X_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.z_=o}}}catch(f){a.e(f)}finally{a.f()}i&&im(r)}function rm(e,t,n){var r=Zo(e),i=r.queries.get(t);if(i){var a,o=Dr(i.j_);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function im(e){e.Y_.forEach((function(e){e.next()}))}(Wv=Hv||(Hv={})).ea="default",Wv.Cache="cache";var am=function(){function e(t,n,r){Rr(this,e),this.query=t,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}return Pr(e,[{key:"X_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Dr(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Kv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.na?this.ia(e)&&(this.ta.next(e),a=!0):this.sa(e,this.onlineState)&&(this.oa(e),a=!0),this.ra=e,a}},{key:"onError",value:function(e){this.ta.error(e)}},{key:"Z_",value:function(e){this.onlineState=e;var t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}},{key:"sa",value:function(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;var n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"ia",value:function(e){if(e.docChanges.length>0)return!0;var t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"oa",value:function(e){e=Kv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}},{key:"J_",value:function(){return this.options.source!==Hv.Cache}}]),e}(),om=function(){function e(t,n){Rr(this,e),this.aa=t,this.byteLength=n}return Pr(e,[{key:"ua",value:function(){return"metadata"in this.aa}}]),e}(),um=function(){function e(t){Rr(this,e),this.serializer=t}return Pr(e,[{key:"Es",value:function(e){return qf(this.serializer,e)}},{key:"ds",value:function(e){return e.metadata.exists?Qf(this.serializer,e.document,!1):yc.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}},{key:"As",value:function(e){return Uf(e)}}]),e}(),sm=function(){function e(t,n,r){Rr(this,e),this.ca=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=cm(t)}return Pr(e,[{key:"la",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;var n=du.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ha",value:function(e){var t,n=new Map,r=new um(this.serializer),i=Dr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Es(a.metadata.name),s=Dr(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Sl()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Cr(br().mark((function e(){var t,n,r,i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wp(this.localStore,new um(this.serializer),this.documents,this.ca.id);case 2:t=e.sent,n=this.ha(this.documents),r=Dr(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,xp(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function cm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var lm=Pr((function e(t){Rr(this,e),this.key=t})),fm=Pr((function e(t){Rr(this,e),this.key=t})),hm=function(){function e(t,n){Rr(this,e),this.query=t,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Sl(),this.mutatedKeys=Sl(),this.Aa=fl(t),this.Ra=new Gv(this.Aa)}return Pr(e,[{key:"Va",get:function(){return this.Ta}},{key:"ma",value:function(e,t){var n=this,r=t?t.fa:new Zv,i=t?t.Ra:this.Ra,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=cl(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.ga(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Aa(f,s)>0||c&&n.Aa(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Ra:o,fa:r,ns:u,mutatedKeys:a}}},{key:"ga",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n,r){var i=this,a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;var o=e.fa.G_();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wo()}};return n(e)-n(t)}(e.type,t.type)||i.Aa(e.doc,t.doc)})),this.pa(n),r=null!=r&&r;var u=t&&!r?this.ya():[],s=0===this.da.size&&this.current&&!r?1:0,c=s!==this.Ea;return this.Ea=s,0!==o.length||c?{snapshot:new Kv(this.query,e.Ra,a,o,e.mutatedKeys,0===s,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}},{key:"Z_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Zv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}},{key:"Sa",value:function(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}},{key:"pa",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Ta=t.Ta.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Ta=t.Ta.delete(e)})),this.current=e.current)}},{key:"ya",value:function(){var e=this;if(!this.current)return[];var t=this.da;this.da=Sl(),this.Ra.forEach((function(t){e.Sa(t.key)&&(e.da=e.da.add(t.key))}));var n=[];return t.forEach((function(t){e.da.has(t)||n.push(new fm(t))})),this.da.forEach((function(e){t.has(e)||n.push(new lm(e))})),n}},{key:"ba",value:function(e){this.Ta=e.Ts,this.da=Sl();var t=this.ma(e.documents);return this.applyChanges(t,!0)}},{key:"Da",value:function(){return Kv.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}]),e}(),dm=Pr((function e(t,n,r){Rr(this,e),this.query=t,this.targetId=n,this.view=r})),pm=Pr((function e(t){Rr(this,e),this.key=t,this.va=!1})),vm=function(){function e(t,n,r,i,a,o){Rr(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new dl((function(e){return ul(e)}),ol),this.Ma=new Map,this.xa=new Set,this.Oa=new Ts(mu.comparator),this.Na=new Map,this.La=new zd,this.Ba={},this.ka=new Map,this.qa=pd.kn(),this.onlineState="Unknown",this.Qa=void 0}return Pr(e,[{key:"isPrimaryClient",get:function(){return!0===this.Qa}}]),e}();function mm(e,t){return ym.apply(this,arguments)}function ym(){return ym=Cr(br().mark((function e(t,n){var r,i,a,o,u=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!(u.length>2&&void 0!==u[2])||u[2],i=vy(t),!(o=i.Fa.get(n))){e.next=7;break}i.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.Da(),e.next=10;break;case 7:return e.next=9,bm(i,n,r,!0);case 9:a=e.sent;case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)}))),ym.apply(this,arguments)}function gm(e,t){return km.apply(this,arguments)}function km(){return(km=Cr(br().mark((function e(t,n){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vy(t),e.next=3,bm(r,n,!0,!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bm(e,t,n,r){return wm.apply(this,arguments)}function wm(){return(wm=Cr(br().mark((function e(t,n,r,i){var a,o,u,s;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pp(t.localStore,nl(n));case 2:if(a=e.sent,o=a.targetId,u=t.sharedClientState.addLocalQueryTarget(o,r),e.t0=i,!e.t0){e.next=10;break}return e.next=9,_m(t,n,o,"current"===u,a.resumeToken);case 9:s=e.sent;case 10:return t.isPrimaryClient&&r&&rv(t.remoteStore,a),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _m(e,t,n,r,i){return xm.apply(this,arguments)}function xm(){return xm=Cr(br().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Ka=function(e,n,r){return function(){var e=Cr(br().mark((function e(t,n,r,i){var a,o,u,s;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ma(r),e.t0=a.ns,!e.t0){e.next=6;break}return e.next=5,yp(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ma(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=i&&null!=i.targetMismatches.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o,u),e.abrupt("return",(Wm(t,n.targetId,s.wa),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,yp(t.localStore,n,!0);case 3:return o=e.sent,u=new hm(n,o.Ts),s=u.ma(o.documents),c=_f.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),Wm(t,r,l.wa),f=new dm(n,r,u),e.abrupt("return",(t.Fa.set(n,f),t.Ma.has(r)?t.Ma.get(r).push(n):t.Ma.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),xm.apply(this,arguments)}function Sm(e,t,n){return Em.apply(this,arguments)}function Em(){return(Em=Cr(br().mark((function e(t,n,r){var i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Zo(t),a=i.Fa.get(n),!((o=i.Ma.get(a.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(i.Ma.set(a.targetId,o.filter((function(e){return!ol(e,n)}))),void i.Fa.delete(n)));case 3:if(!i.isPrimaryClient){e.next=11;break}if(i.sharedClientState.removeLocalQueryTarget(a.targetId),e.t0=i.sharedClientState.isActiveQueryTarget(a.targetId),e.t0){e.next=9;break}return e.next=9,vp(i.localStore,a.targetId,!1).then((function(){i.sharedClientState.clearQueryState(a.targetId),r&&iv(i.remoteStore,a.targetId),qm(i,a.targetId)})).catch(Cu);case 9:e.next=14;break;case 11:return qm(i,a.targetId),e.next=14,vp(i.localStore,a.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Im(e,t){return Tm.apply(this,arguments)}function Tm(){return(Tm=Cr(br().mark((function e(t,n){var r,i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Zo(t),i=r.Fa.get(n),a=r.Ma.get(i.targetId),r.isPrimaryClient&&1===a.length&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),iv(r.remoteStore,i.targetId));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cm(e,t,n){return Nm.apply(this,arguments)}function Nm(){return(Nm=Cr(br().mark((function e(t,n,r){var i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=my(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Zo(e),a=lu.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Sl());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=vl(),s=Sl();return i.cs.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Dr(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Yl(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new $l(c.key,l,mc(l.value.mapValue),Hl.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:gl(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Ba[e.currentUser.toKey()];r||(r=new Ts(uu)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Km(i,a.changes);case 9:return e.next=11,_v(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=qv(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function Rm(e,t){return Am.apply(this,arguments)}function Am(){return(Am=Cr(br().mark((function e(t,n){var r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zo(t),e.prev=1,e.next=4,fp(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Na.get(t);n&&(Go(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.va=!0:e.modifiedDocuments.size>0?Go(n.va):e.removedDocuments.size>0&&(Go(n.va),n.va=!1))})),e.next=8,Km(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Cu(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function Om(e,t,n){var r=Zo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Fa.forEach((function(e,n){var r=n.view.Z_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Zo(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Dr(n.j_);try{for(a.s();!(i=a.n()).done;){i.value.Z_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&im(n)}(r.eventManager,t),i.length&&r.Ca.d_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Pm(e,t,n){return Dm.apply(this,arguments)}function Dm(){return(Dm=Cr(br().mark((function e(t,n,r){var i,a,o,u,s,c;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Zo(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Na.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Ts(mu.comparator)).insert(o,yc.newNoDocument(o,fu.min())),s=Sl().add(o),c=new wf(fu.min(),new Map,new Ts(uu),u,s),e.next=9,Rm(i,c);case 9:i.Oa=i.Oa.remove(o),i.Na.delete(n),Zm(i),e.next=16;break;case 14:return e.next=16,vp(i.localStore,n,!1).then((function(){return qm(i,n,r)})).catch(Cu);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lm(e,t){return Mm.apply(this,arguments)}function Mm(){return(Mm=Cr(br().mark((function e(t,n){var r,i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zo(t),i=n.batch.batchId,e.prev=1,e.next=4,cp(r.localStore,n);case 4:return a=e.sent,Bm(r,i,null),Vm(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Km(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Cu(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Fm(e,t,n){return Um.apply(this,arguments)}function Um(){return(Um=Cr(br().mark((function e(t,n,r){var i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Zo(t),e.prev=1,e.next=4,function(e,t){var n=Zo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Go(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Bm(i,n,r),Vm(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Km(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Cu(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function jm(e,t){return zm.apply(this,arguments)}function zm(){return(zm=Cr(br().mark((function e(t,n){var r,i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cv((r=Zo(t)).remoteStore)||Vo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Zo(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.ka.get(i)||[]).push(n),r.ka.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=qv(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function Vm(e,t){(e.ka.get(t)||[]).forEach((function(e){e.resolve()})),e.ka.delete(t)}function Bm(e,t,n){var r=Zo(e),i=r.Ba[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function qm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Dr(e.Ma.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Fa.delete(a),n&&e.Ca.$a(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach((function(t){e.La.containsKey(t)||Hm(e,t)}))}function Hm(e,t){e.xa.delete(t.path.canonicalString());var n=e.Oa.get(t);null!==n&&(iv(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Zm(e))}function Wm(e,t,n){var r,i=Dr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof lm?(e.La.addReference(a.key,t),Gm(e,a)):a instanceof fm?(Vo("SyncEngine","Document no longer in limbo: "+a.key),e.La.removeReference(a.key,t),e.La.containsKey(a.key)||Hm(e,a.key)):Wo()}}catch(o){i.e(o)}finally{i.f()}}function Gm(e,t){var n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(Vo("SyncEngine","New document in limbo: "+n),e.xa.add(r),Zm(e))}function Zm(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){var t=e.xa.values().next().value;e.xa.delete(t);var n=new mu(du.fromString(t)),r=e.qa.next();e.Na.set(r,new pm(n)),e.Oa=e.Oa.insert(n,r),rv(e.remoteStore,new fh(nl(Jc(n.path)),r,"TargetPurposeLimboResolution",qu.oe))}}function Km(e,t,n){return Qm.apply(this,arguments)}function Qm(){return Qm=Cr(br().mark((function e(t,n,r){var i,a,o,u;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Zo(t),a=[],o=[],u=[],e.t0=i.Fa.isEmpty(),e.t0){e.next=9;break}return i.Fa.forEach((function(e,t){u.push(i.Ka(t,n,r).then((function(e){var n;if((e||r)&&i.isPrimaryClient){var u=e?!e.fromCache:null===(n=null==r?void 0:r.targetChanges.get(t.targetId))||void 0===n?void 0:n.current;i.sharedClientState.updateQueryState(t.targetId,u?"current":"not-current")}if(e){a.push(e);var s=np.Wi(t.targetId,e);o.push(s)}})))})),e.next=6,Promise.all(u);case 6:return i.Ca.d_(a),e.next=9,function(){var e=Cr(br().mark((function e(t,n){var r,i,a,o,u,s,c,l;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zo(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ru.forEach(n,(function(t){return Ru.forEach(t.$i,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Ru.forEach(t.Ui,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Mu(e.t0)){e.next=10;break}throw e.t0;case 10:Vo("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Dr(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.os.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.os=r.os.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Qm.apply(this,arguments)}function Ym(e,t){return Xm.apply(this,arguments)}function Xm(){return(Xm=Cr(br().mark((function e(t,n){var r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Zo(t)).currentUser.isEqual(n)){e.next=11;break}return Vo("SyncEngine","User change. New user:",n.toKey()),e.next=5,up(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.ka.forEach((function(e){e.forEach((function(e){e.reject(new Qo(Ko.CANCELLED,t))}))})),e.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Km(r,i.hs);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jm(e,t){var n=Zo(e),r=n.Na.get(t);if(r&&r.va)return Sl().add(r.key);var i=Sl(),a=n.Ma.get(t);if(!a)return i;var o,u=Dr(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Fa.get(s);i=i.unionWith(c.view.Va)}}catch(l){u.e(l)}finally{u.f()}return i}function $m(e,t){return ey.apply(this,arguments)}function ey(){return(ey=Cr(br().mark((function e(t,n){var r,i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zo(t),e.next=3,yp(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ba(i),e.abrupt("return",(r.isPrimaryClient&&Wm(r,n.targetId,a.wa),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ty(e,t){return ny.apply(this,arguments)}function ny(){return(ny=Cr(br().mark((function e(t,n){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zo(t),e.abrupt("return",kp(r.localStore,n).then((function(e){return Km(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ry(e,t,n,r){return iy.apply(this,arguments)}function iy(){return(iy=Cr(br().mark((function e(t,n,r,i){var a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Zo(t),e.next=3,function(e,t){var n=Zo(e),r=Zo(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Mn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Ru.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,_v(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Bm(a,n,i||null),Vm(a,n),function(e,t){Zo(Zo(e).mutationQueue).On(t)}(a.localStore,n)):Wo();case 11:return e.next=13,Km(a,o);case 13:e.next=16;break;case 15:Vo("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ay(e,t){return oy.apply(this,arguments)}function oy(){return(oy=Cr(br().mark((function e(t,n){var r,i,a,o,u,s,c,l;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vy(r=Zo(t)),my(r),!0!==n||!0===r.Qa){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,uy(r,i.toArray());case 5:return a=e.sent,r.Qa=!0,e.next=9,Uv(r.remoteStore,!0);case 9:o=Dr(a);try{for(o.s();!(u=o.n()).done;)s=u.value,rv(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Qa){e.next=25;break}return c=[],l=Promise.resolve(),r.Ma.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return qm(r,t),vp(r.localStore,t,!0)})),iv(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,uy(r,c);case 21:return function(e){var t=Zo(e);t.Na.forEach((function(e,n){iv(t.remoteStore,n)})),t.La.pr(),t.Na=new Map,t.Oa=new Ts(mu.comparator)}(r),r.Qa=!1,e.next=25,Uv(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uy(e,t,n){return sy.apply(this,arguments)}function sy(){return(sy=Cr(br().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Zo(t),a=[],o=[],u=Dr(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.Ma.get(c))||0===f.length){e.next=34;break}return e.next=11,pp(i.localStore,nl(f[0]));case 11:l=e.sent,h=Dr(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Fa.get(p),e.next=20,$m(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,gp(i.localStore,c);case 36:return y=e.sent,e.next=39,pp(i.localStore,y);case 39:return l=e.sent,e.next=42,_m(i,cy(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Ca.d_(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])})))).apply(this,arguments)}function cy(e){return Xc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ly(e){return function(e){return Zo(Zo(e).persistence).Qi()}(Zo(e).localStore)}function fy(e,t,n,r){return hy.apply(this,arguments)}function hy(){return(hy=Cr(br().mark((function e(t,n,r,i){var a,o,u,s;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Zo(t)).Qa){e.next=3;break}return e.abrupt("return",void Vo("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.Ma.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,kp(a.localStore,ll(o[0]));case 10:return u=e.sent,s=wf.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Ls.EMPTY_BYTE_STRING),e.next=14,Km(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,vp(a.localStore,n,!0);case 17:return qm(a,n,i),e.abrupt("break",20);case 19:Wo();case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dy(e,t,n){return py.apply(this,arguments)}function py(){return(py=Cr(br().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=vy(t)).Qa){e.next=45;break}a=Dr(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.Ma.has(u)||!i.sharedClientState.isActiveQueryTarget(u)){e.next=10;break}return Vo("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,gp(i.localStore,u);case 12:return s=e.sent,e.next=15,pp(i.localStore,s);case 15:return c=e.sent,e.next=18,_m(i,cy(s),c.targetId,!1,c.resumeToken);case 18:rv(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Dr(r),e.prev=30,h=br().mark((function e(){var t;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Ma.has(t),!e.t0){e.next=5;break}return e.next=5,vp(i.localStore,t,!1).then((function(){iv(i.remoteStore,t),qm(i,t)})).catch(Cu);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function vy(e){var t=Zo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Rm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Pm.bind(null,t),t.Ca.d_=nm.bind(null,t.eventManager),t.Ca.$a=rm.bind(null,t.eventManager),t}function my(e){var t=Zo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Lm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Fm.bind(null,t),t}function yy(e,t,n){var r=Zo(e);(function(){var e=Cr(br().mark((function e(t,n,r){var i,a,o,u,s;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Zo(e),r=Uf(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Gr.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(cm(i)),a=new sm(i,t.localStore,n.serializer),e.next=15,n.Ua();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.la(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.Ua();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Km(t,s.Ia,void 0);case 31:return e.next=33,function(e,t){var n=Zo(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Gr.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Pa));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(qo("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var gy=function(){function e(){Rr(this,e),this.kind="memory",this.synchronizeTabs=!1}return Pr(e,[{key:"initialize",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Wp(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),e.next=5,this.persistence.start();case 5:this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ja",value:function(e,t){return null}},{key:"Ha",value:function(e,t){return null}},{key:"za",value:function(e){return op(this.persistence,new ip,e.initialUser,this.serializer)}},{key:"Ga",value:function(e){return new Gd(Kd.Zr,this.serializer)}},{key:"Wa",value:function(e){return new Dp}},{key:"terminate",value:function(){var e=Cr(br().mark((function e(){var t,n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(n=this.indexBackfillerScheduler)||void 0===n||n.stop(),this.sharedClientState.shutdown(),e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();gy.provider={build:function(){return new gy}};var ky=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i){var a;return Rr(this,n),(a=t.call(this)).Ja=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.kind="persistent",a.synchronizeTabs=!1,a}return Pr(n,[{key:"initialize",value:function(){var e=Cr(br().mark((function e(t){var r=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wo(Ur(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ja.initialize(this,t);case 4:return e.next=6,my(this.Ja.syncEngine);case 6:return e.next=8,_v(this.Ja.remoteStore);case 8:return e.next=10,this.persistence.yi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"za",value:function(e){return op(this.persistence,new ip,e.initialUser,this.serializer)}},{key:"ja",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new wd(n,e.asyncQueue,t)}},{key:"Ha",value:function(e,t){var n=new Bu(t,this.persistence);return new Vu(e.asyncQueue,n)}},{key:"Ga",value:function(e){var t=tp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?od.withCacheSize(this.cacheSizeBytes):od.DEFAULT;return new Jd(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,qp(),Hp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"Wa",value:function(e){return new Dp}}]),n}(gy),by=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this,e,r,!1)).Ja=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Pr(n,[{key:"initialize",value:function(){var e=Cr(br().mark((function e(t){var r,i=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wo(Ur(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ja.syncEngine,e.t0=this.sharedClientState instanceof Pp,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={no:ry.bind(null,r),ro:fy.bind(null,r),io:dy.bind(null,r),Qi:ly.bind(null,r),eo:ty.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.yi(function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ay(i.Ja.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t=qp();if(!Pp.D(t))throw new Qo(Ko.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=tp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(ky),wy=function(){function e(){Rr(this,e)}return Pr(e,[{key:"initialize",value:function(){var e=Cr(br().mark((function e(t,n){var r=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Om(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ym.bind(null,this.syncEngine),e.next=12,Uv(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Yv}},{key:"createDatastore",value:function(e){var t=Wp(e.databaseInfo.databaseId),n=function(e){return new Bp(e)}(e.databaseInfo);return function(e,t,n,r){return new Yp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new Jp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return Om(t.syncEngine,e,0)}),Mp.D()?new Mp:new Lp)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new vm(e,t,n,r,i,a);return o&&(u.Qa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){var e=Cr(br().mark((function e(){var t,n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Zo(t),Vo("RemoteStore","RemoteStore shutting down."),n.L_.add(5),e.next=5,tv(n);case 5:n.k_.shutdown(),n.q_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore);case 2:null===(t=this.datastore)||void 0===t||t.terminate(),null===(n=this.eventManager)||void 0===n||n.terminate();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function _y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Cr(br().mark((function r(){var i;return br().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}wy.provider={build:function(){return new wy}};var xy=function(){function e(t){Rr(this,e),this.observer=t,this.muted=!1}return Pr(e,[{key:"next",value:function(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}},{key:"error",value:function(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Bo("Uncaught Error in snapshot listener:",e.toString()))}},{key:"Za",value:function(){this.muted=!0}},{key:"Ya",value:function(e,t){var n=this;setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Sy=function(){function e(t,n){var r=this;Rr(this,e),this.Xa=t,this.serializer=n,this.metadata=new Yo,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then((function(e){e&&e.ua()?r.metadata.resolve(e.aa.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.aa))))}),(function(e){return r.metadata.reject(e)}))}return Pr(e,[{key:"close",value:function(){return this.Xa.cancel()}},{key:"getMetadata",value:function(){var e=Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ua",value:function(){var e=Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.tu());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"tu",value:function(){var e=Cr(br().mark((function e(){var t,n,r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.nu();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.eu.decode(t),r=Number(n),isNaN(r)&&this.ru("length string (".concat(n,") is not valid number")),e.next=9,this.iu(r);case 9:return i=e.sent,e.abrupt("return",new om(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"su",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"nu",value:function(){var e=Cr(br().mark((function e(){var t,n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.su()<0)){e.next=7;break}return e.next=3,this.ou();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.su())<0&&this.ru("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"iu",value:function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.ou();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.ru("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.eu.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ru",value:function(e){throw this.Xa.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"ou",value:function(){var e=Cr(br().mark((function e(){var t,n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Xa.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ey=function(){function e(t){Rr(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}return Pr(e,[{key:"lookup",value:function(){var e=Cr(br().mark((function e(t){var n,r=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw this.lastTransactionError=new Qo(Ko.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;case 2:return e.next=4,function(){var e=Cr(br().mark((function e(t,n){var r,i,a,o,u;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zo(t),i={documents:n.map((function(e){return Bf(r.serializer,e)}))},e.next=4,r.Lo("BatchGetDocuments",r.serializer.databaseId,du.emptyPath(),i,n.length);case 4:return a=e.sent,o=new Map,a.forEach((function(e){var t=Yf(r.serializer,e);o.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=o.get(e.toString());Go(!!t),u.push(t)})),u));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new of(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Cr(br().mark((function e(){var t,n=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastTransactionError){e.next=2;break}throw this.lastTransactionError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=mu.fromPath(t);n.mutations.push(new uf(r,n.precondition(r)))})),e.next=7,function(){var e=Cr(br().mark((function e(t,n){var r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zo(t),i={writes:n.map((function(e){return Xf(r.serializer,e)}))},e.next=3,r.Mo("Commit",r.serializer.databaseId,du.emptyPath(),i);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Wo();t=fu.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Qo(Ko.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(fu.min())?Hl.exists(!1):Hl.updateTime(t):Hl.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(fu.min()))throw new Qo(Ko.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hl.updateTime(t)}return Hl.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Iy=function(){function e(t,n,r,i,a){Rr(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this._u=r.maxAttempts,this.t_=new Gp(this.asyncQueue,"transaction_retry")}return Pr(e,[{key:"au",value:function(){this._u-=1,this.uu()}},{key:"uu",value:function(){var e=this;this.t_.Go(Cr(br().mark((function t(){var n,r;return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Ey(e.datastore),(r=e.cu(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.lu(t)}))}))})).catch((function(t){e.lu(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"cu",value:function(e){try{var t=this.updateFunction(e);return!Hu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"lu",value:function(e){var t=this;this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((function(){return t.uu(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"hu",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!hf(t)}return!1}}]),e}(),Ty=function(){function e(t,n,r,i,a){var o=this;Rr(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Fo.UNAUTHENTICATED,this.clientId=ou.newId(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this._uninitializedComponentsProvider=a,this.authCredentials.start(r,function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vo("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Vo("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return Pr(e,[{key:"configuration",get:function(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Cr(br().mark((function n(){var r;return br().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=qv(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Cy(e,t){return Ny.apply(this,arguments)}function Ny(){return Ny=Cr(br().mark((function e(t,n){var r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Vo("FirestoreClient","Initializing OfflineComponentProvider"),r=t.configuration,e.next=4,n.initialize(r);case 4:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,up(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 6:case"end":return e.stop()}}),e)}))),Ny.apply(this,arguments)}function Ry(e,t){return Ay.apply(this,arguments)}function Ay(){return(Ay=Cr(br().mark((function e(t,n){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Oy(t);case 3:return r=e.sent,Vo("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,n.initialize(r,t.configuration);case 7:t.setCredentialChangeListener((function(e){return Mv(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Mv(n.remoteStore,t)})),t._onlineComponents=n;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oy(e){return Py.apply(this,arguments)}function Py(){return(Py=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Vo("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Cy(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),function(e){return"FirebaseError"===e.name?e.code===Ko.FAILED_PRECONDITION||e.code===Ko.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n=e.t0)){e.next=13;break}throw n;case 13:return qo("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Cy(t,new gy);case 16:e.next=21;break;case 18:return Vo("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Cy(t,new gy);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function Dy(e){return Ly.apply(this,arguments)}function Ly(){return(Ly=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Vo("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Ry(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Vo("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Ry(t,new wy);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function My(e){return Oy(e).then((function(e){return e.persistence}))}function Fy(e){return Oy(e).then((function(e){return e.localStore}))}function Uy(e){return Dy(e).then((function(e){return e.remoteStore}))}function jy(e){return Dy(e).then((function(e){return e.syncEngine}))}function zy(e){return Dy(e).then((function(e){return e.datastore}))}function Vy(e){return By.apply(this,arguments)}function By(){return(By=Cr(br().mark((function e(t){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dy(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=mm.bind(null,n.syncEngine),r.onUnlisten=Sm.bind(null,n.syncEngine),r.onFirstRemoteStoreListen=gm.bind(null,n.syncEngine),r.onLastRemoteStoreUnlisten=Im.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Yo;return e.asyncQueue.enqueueAndForget(Cr(br().mark((function i(){return br().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new xy({next:function(u){a.Za(),t.enqueueAndForget((function(){return em(e,o)}));var s=u.docs.has(n);!s&&u.fromCache?i.reject(new Qo(Ko.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&u.fromCache&&r&&"server"===r.source?i.reject(new Qo(Ko.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(u)},error:function(e){return i.reject(e)}}),o=new am(Jc(n.path),a,{includeMetadataChanges:!0,_a:!0});return Jv(e,o)},i.next=3,Vy(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Hy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Yo;return e.asyncQueue.enqueueAndForget(Cr(br().mark((function i(){return br().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new xy({next:function(n){a.Za(),t.enqueueAndForget((function(){return em(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Qo(Ko.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new am(n,a,{includeMetadataChanges:!0,_a:!0});return Jv(e,o)},i.next=3,Vy(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Wy(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var Gy=new Map;function Zy(e,t,n){if(!n)throw new Qo(Ko.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ky(e,t,n,r){if(!0===t&&!0===r)throw new Qo(Ko.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Qy(e){if(!mu.isDocumentKey(e))throw new Qo(Ko.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Yy(e){if(mu.isDocumentKey(e))throw new Qo(Ko.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Xy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Wo()}function Jy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Qo(Ko.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Xy(e);throw new Qo(Ko.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function $y(e,t){if(t<=0)throw new Qo(Ko.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var eg=function(){function e(t){var n,r;if(Rr(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Qo(Ko.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Qo(Ko.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Ky("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wy(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Qo(Ko.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Qo(Ko.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Qo(Ko.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return Pr(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),tg=function(){function e(t,n,r,i){Rr(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}return Pr(e,[{key:"app",get:function(){if(!this._app)throw new Qo(Ko.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return"notTerminated"!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Qo(Ko.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Jo;switch(e.type){case"firstParty":return new nu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Qo(Ko.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}},{key:"_restart",value:function(){var e=Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("notTerminated"!==this._terminateTask){e.next=5;break}return e.next=3,this._terminate();case 3:e.next=6;break;case 5:this._terminateTask="notTerminated";case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Gy.get(e);t&&(Vo("ComponentProvider","Removing Datastore"),Gy.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function ng(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Jy(e,tg))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=Fo.MOCK_USER;else{u=ui(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Qo(Ko.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Fo(c)}e._authCredentials=new $o(new Xo(u,s))}}var rg=function(){function e(t,n,r){Rr(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Pr(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ig=function(){function e(t,n,r){Rr(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Pr(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ag(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),ag=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i){var a;return Rr(this,n),(a=t.call(this,e,r,Jc(i)))._path=i,a.type="collection",a}return Pr(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new ig(this.firestore,null,new mu(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(rg);function og(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ji(e),Zy("collection","path",t),e instanceof tg){var a=du.fromString.apply(du,[t].concat(r));return Yy(a),new ag(e,null,a)}if(!(e instanceof ig||e instanceof ag))throw new Qo(Ko.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(du.fromString.apply(du,[t].concat(r)));return Yy(o),new ag(e.firestore,null,o)}function ug(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ji(e),1===arguments.length&&(t=ou.newId()),Zy("doc","path",t),e instanceof tg){var a=du.fromString.apply(du,[t].concat(r));return Qy(a),new ig(e,null,new mu(a))}if(!(e instanceof ig||e instanceof ag))throw new Qo(Ko.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(du.fromString.apply(du,[t].concat(r)));return Qy(o),new ig(e.firestore,e instanceof ag?e.converter:null,new mu(o))}function sg(e,t){return e=ji(e),t=ji(t),(e instanceof ig||e instanceof ag)&&(t instanceof ig||t instanceof ag)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function cg(e,t){return e=ji(e),t=ji(t),e instanceof rg&&t instanceof rg&&e.firestore===t.firestore&&ol(e._query,t._query)&&e.converter===t.converter}var lg=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();Rr(this,e),this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Gp(this,"async_queue_retry"),this.Vu=function(){var e=Hp();e&&Vo("AsyncQueue","Visibility state changed to "+e.visibilityState),t.t_.jo()},this.mu=n;var r=Hp();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.Vu)}return Pr(e,[{key:"isShuttingDown",get:function(){return this.Iu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.fu(),this.gu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;var t=Hp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}},{key:"enqueue",value:function(e){var t=this;if(this.fu(),this.Iu)return new Promise((function(){}));var n=new Yo;return this.gu((function(){return t.Iu&&t.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Pu.push(e),t.pu()}))}},{key:"pu",value:function(){var e=Cr(br().mark((function e(){var t=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Pu.length){e.next=14;break}return e.prev=1,e.next=4,this.Pu[0]();case 4:this.Pu.shift(),this.t_.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Mu(e.t0)){e.next=12;break}throw e.t0;case 12:Vo("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Pu.length>0&&this.t_.Go((function(){return t.pu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"gu",value:function(e){var t=this,n=this.mu.then((function(){return t.du=!0,e().catch((function(e){t.Eu=e,t.du=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Bo("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.du=!1,e}))}));return this.mu=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.fu(),this.Ru.indexOf(e)>-1&&(t=0);var i=Bv.createAndSchedule(this,e,t,n,(function(e){return r.yu(e)}));return this.Tu.push(i),i}},{key:"fu",value:function(){this.Eu&&Wo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"wu",value:function(){var e=Cr(br().mark((function e(){var t;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.mu,e.next=3,t;case 3:if(t!==this.mu){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Su",value:function(e){var t,n=Dr(this.Tu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"bu",value:function(e){var t=this;return this.wu().then((function(){t.Tu.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Dr(t.Tu);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.wu()}))}},{key:"Du",value:function(e){this.Ru.push(e)}},{key:"yu",value:function(e){var t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}]),e}();function fg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Dr(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var hg=function(){function e(){Rr(this,e),this._progressObserver={},this._taskCompletionResolver=new Yo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Pr(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),dg=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i,a){var o;return Rr(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new lg,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return Pr(n,[{key:"_terminate",value:function(){var e=Cr(br().mark((function e(){var t;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._firestoreClient){e.next=6;break}return t=this._firestoreClient.terminate(),this._queue=new lg(t),this._firestoreClient=void 0,e.next=6,t;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(tg);function pg(e){if(e._terminated)throw new Qo(Ko.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||vg(e),e._firestoreClient}function vg(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new qs(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Wy(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Ty(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&function(e){var t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function mg(){return(mg=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead."),n=t._freezeSettings(),yg(t,wy.provider,{build:function(e){return new by(e,n.cacheSizeBytes)}});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yg(e,t,n){if((e=Jy(e,dg))._firestoreClient||e._terminated)throw new Qo(Ko.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new Qo(Ko.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},vg(e)}function gg(e){return function(e){var t=new Yo;return e.asyncQueue.enqueueAndForget(Cr(br().mark((function n(){return br().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=jm,n.next=3,jy(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(pg(e=Jy(e,dg)))}function kg(e){return function(e){return e.asyncQueue.enqueue(Cr(br().mark((function t(){var n,r;return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,My(e);case 2:return n=t.sent,t.next=5,Uy(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Zo(e);return t.L_.delete(0),$p(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(pg(e=Jy(e,dg)))}function bg(e){return function(e){return e.asyncQueue.enqueue(Cr(br().mark((function t(){var n,r;return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,My(e);case 2:return n=t.sent,t.next=5,Uy(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Zo(t)).L_.add(0),e.next=4,tv(n);case 4:n.q_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(pg(e=Jy(e,dg)))}function wg(e,t){var n=pg(e=Jy(e,dg)),r=new hg;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Sy(e,t)}(function(e,t){if(e instanceof Uint8Array)return _y(e,t);if(e instanceof ArrayBuffer)return _y(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?vf().encode(e):e),t)}(n,Wp(t));e.asyncQueue.enqueueAndForget(Cr(br().mark((function t(){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=yy,t.next=3,jy(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function _g(e,t){return function(e,t){return e.asyncQueue.enqueue(Cr(br().mark((function n(){return br().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Zo(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Gr.getNamedQuery(e,t)}))},n.next=3,Fy(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(pg(e=Jy(e,dg)),t).then((function(t){return t?new rg(e,null,t.query):null}))}var xg=function(){function e(t){Rr(this,e),this._byteString=t}return Pr(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ls.fromBase64String(t))}catch(t){throw new Qo(Ko.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Ls.fromUint8Array(t))}}]),e}(),Sg=function(){function e(){Rr(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Qo(Ko.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vu(n)}return Pr(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Eg=Pr((function e(t){Rr(this,e),this._methodName=t})),Ig=function(){function e(t,n){if(Rr(this,e),!isFinite(t)||t<-90||t>90)throw new Qo(Ko.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Qo(Ko.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Pr(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return uu(this._lat,e._lat)||uu(this._long,e._long)}}]),e}(),Tg=function(){function e(t){Rr(this,e),this._values=(t||[]).map((function(e){return e}))}return Pr(e,[{key:"toArray",value:function(){return this._values.map((function(e){return e}))}},{key:"isEqual",value:function(e){return function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}]),e}(),Cg=/^__.*__$/,Ng=function(){function e(t,n,r){Rr(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Pr(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new $l(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jl(e,this.data,t,this.fieldTransforms)}}]),e}(),Rg=function(){function e(t,n,r){Rr(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Pr(e,[{key:"toMutation",value:function(e,t){return new $l(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Ag(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wo()}}var Og=function(){function e(t,n,r,i,a,o){Rr(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Pr(e,[{key:"path",get:function(){return this.settings.path}},{key:"Cu",get:function(){return this.settings.Cu}},{key:"Fu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Mu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}},{key:"Nu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}},{key:"Lu",value:function(e){return this.Fu({path:void 0,xu:!0})}},{key:"Bu",value:function(e){return Jg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"vu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}},{key:"Ou",value:function(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Ag(this.Cu)&&Cg.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}]),e}(),Pg=function(){function e(t,n,r){Rr(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Wp(t)}return Pr(e,[{key:"Qu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Og({Cu:e,methodName:t,qu:n,path:vu.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function Dg(e){var t=e._freezeSettings(),n=Wp(e._databaseId);return new Pg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lg(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Qu(a.merge||a.mergeFields?2:0,t,n,i);Kg("Data must be an object, but it was:",o,r);var u,s,c=Gg(r,o);if(a.merge)u=new Ps(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Dr(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Qg(t,l.value,n);if(!o.contains(d))throw new Qo(Ko.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));$g(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Ps(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Ng(new vc(c),u,s)}var Mg=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return Pr(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Eg);function Fg(e,t,n){return new Og({Cu:3,qu:t.settings.qu,methodName:e._methodName,xu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var Ug=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return Pr(n,[{key:"_toFieldTransform",value:function(e){return new Bl(e.path,new Dl)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Eg),jg=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this,e)).Ku=r,i}return Pr(n,[{key:"_toFieldTransform",value:function(e){var t=Fg(this,e,!0),n=this.Ku.map((function(e){return Wg(e,t)})),r=new Ll(n);return new Bl(e.path,r)}},{key:"isEqual",value:function(e){return e instanceof n&&Ci(this.Ku,e.Ku)}}]),n}(Eg),zg=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this,e)).Ku=r,i}return Pr(n,[{key:"_toFieldTransform",value:function(e){var t=Fg(this,e,!0),n=this.Ku.map((function(e){return Wg(e,t)})),r=new Fl(n);return new Bl(e.path,r)}},{key:"isEqual",value:function(e){return e instanceof n&&Ci(this.Ku,e.Ku)}}]),n}(Eg),Vg=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this,e)).$u=r,i}return Pr(n,[{key:"_toFieldTransform",value:function(e){var t=new jl(e.serializer,Nl(e.serializer,this.$u));return new Bl(e.path,t)}},{key:"isEqual",value:function(e){return e instanceof n&&this.$u===e.$u}}]),n}(Eg);function Bg(e,t,n,r){var i=e.Qu(1,t,n);Kg("Data must be an object, but it was:",i,r);var a=[],o=vc.empty();Es(r,(function(e,r){var u=Xg(t,e,n);r=ji(r);var s=i.Nu(u);if(r instanceof Mg)a.push(u);else{var c=Wg(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Ps(a);return new Rg(o,u,i.fieldTransforms)}function qg(e,t,n,r,i,a){var o=e.Qu(1,t,n),u=[Qg(t,r,n)],s=[i];if(a.length%2!=0)throw new Qo(Ko.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Qg(t,a[c])),s.push(a[c+1]);for(var l=[],f=vc.empty(),h=u.length-1;h>=0;--h)if(!$g(l,u[h])){var d=u[h],p=s[h];p=ji(p);var v=o.Nu(d);if(p instanceof Mg)l.push(d);else{var m=Wg(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Ps(l);return new Rg(f,y,o.fieldTransforms)}function Hg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Wg(n,e.Qu(r?4:3,t))}function Wg(e,t){if(Zg(e=ji(e)))return Kg("Unsupported field value:",t,e),Gg(e,t);if(e instanceof Eg)return function(e,t){if(!Ag(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Dr(e);try{for(a.s();!(n=a.n()).done;){var o=Wg(n.value,t.Lu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ji(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Nl(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=lu.fromDate(e);return{timestampValue:Lf(t.serializer,n)}}if(e instanceof lu){var r=new lu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Lf(t.serializer,r)}}if(e instanceof Ig)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof xg)return{bytesValue:Mf(t.serializer,e._byteString)};if(e instanceof ig){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Bu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:jf(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Tg)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((function(e){if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Tl(t.serializer,e)}))}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(Xy(e)))}(e,t)}function Gg(e,t){var n={};return Is(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Es(e,(function(e,r){var i=Wg(r,t.Mu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Zg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof lu||e instanceof Ig||e instanceof xg||e instanceof ig||e instanceof Eg||e instanceof Tg)}function Kg(e,t,n){if(!Zg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Xy(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Qg(e,t,n){if((t=ji(t))instanceof Sg)return t._internalPath;if("string"==typeof t)return Xg(e,t);throw Jg("Field path arguments must be of type string or ",e,!1,void 0,n)}var Yg=new RegExp("[~\\*/\\[\\]]");function Xg(e,t,n){if(t.search(Yg)>=0)throw Jg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Br(Sg,w(t.split(".")))._internalPath}catch(r){throw Jg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Jg(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Qo(Ko.INVALID_ARGUMENT,u+e+s)}function $g(e,t){return e.some((function(e){return e.isEqual(t)}))}var ek=function(){function e(t,n,r,i,a){Rr(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Pr(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new ig(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new tk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(nk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),tk=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return Pr(n,[{key:"data",value:function(){return wo(Ur(n.prototype),"data",this).call(this)}}]),n}(ek);function nk(e,t){return"string"==typeof t?Xg(e,t):t instanceof Sg?t._internalPath:t._delegate._internalPath}function rk(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Qo(Ko.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ik=Pr((function e(){Rr(this,e)})),ak=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return Pr(n)}(ik);function ok(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof ik&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof sk})).length,n=e.filter((function(e){return e instanceof uk})).length;if(t>1||t>0&&n>0)throw new Qo(Ko.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=Dr(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var uk=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i){var a;return Rr(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return Pr(n,[{key:"_apply",value:function(e){var t=this._parse(e);return bk(e._query,t),new rg(e.firestore,e.converter,il(e._query,t))}},{key:"_parse",value:function(e){var t=Dg(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Qo(Ko.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){kk(o,a);var s,c=[],l=Dr(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(gk(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=gk(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||kk(o,a),u=Hg(n,t,o,"in"===a||"not-in"===a);return Sc.create(i,a,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ak);var sk=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return Pr(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Ec.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=Dr(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;bk(r,a),r=il(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new rg(e.firestore,e.converter,il(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ik);var ck=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return Pr(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Qo(Ko.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Qo(Ko.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wc(t,n)}(e._query,this._field,this._direction);return new rg(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Yc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ak);var lk=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i){var a;return Rr(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return Pr(n,[{key:"_apply",value:function(e){return new rg(e.firestore,e.converter,al(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ak);var fk=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i){var a;return Rr(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Pr(n,[{key:"_apply",value:function(e){var t=yk(e,this.type,this._docOrFields,this._inclusive);return new rg(e.firestore,e.converter,function(e,t){return new Yc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ak);function hk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fk._create("startAt",t,!0)}function dk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fk._create("startAfter",t,!1)}var pk=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i){var a;return Rr(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Pr(n,[{key:"_apply",value:function(e){var t=yk(e,this.type,this._docOrFields,this._inclusive);return new rg(e.firestore,e.converter,function(e,t){return new Yc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ak);function vk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pk._create("endBefore",t,!1)}function mk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pk._create("endAt",t,!0)}function yk(e,t,n,r){if(n[0]=ji(n[0]),n[0]instanceof ek)return function(e,t,n,r,i){if(!r)throw new Qo(Ko.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Dr(tl(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(tc(t,r.key));else{var c=r.data.field(s.field);if(zs(c))throw new Qo(Ko.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Qo(Ko.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new gc(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Dg(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Qo(Ko.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Qo(Ko.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!el(e)&&-1!==c.indexOf("/"))throw new Qo(Ko.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(du.fromString(c));if(!mu.isDocumentKey(l))throw new Qo(Ko.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new mu(l);u.push(tc(t,f))}else{var h=Hg(n,r,c);u.push(h)}}return new gc(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function gk(e,t,n){if("string"==typeof(n=ji(n))){if(""===n)throw new Qo(Ko.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!el(t)&&-1!==n.indexOf("/"))throw new Qo(Ko.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(du.fromString(n));if(!mu.isDocumentKey(r))throw new Qo(Ko.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return tc(e,new mu(r))}if(n instanceof ig)return tc(e,n._key);throw new Qo(Ko.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Xy(n),"."))}function kk(e,t){if(!Array.isArray(e)||0===e.length)throw new Qo(Ko.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function bk(e,t){var n=function(e,t){var n,r=Dr(e);try{for(r.s();!(n=r.n()).done;){var i,a=Dr(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Qo(Ko.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Qo(Ko.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}var wk=function(){function e(){Rr(this,e)}return Pr(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Us(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Wo()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Es(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertVectorValue",value:function(e){var t,n,r,i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((function(e){return Us(e.doubleValue)}));return new Tg(i)}},{key:"convertGeoPoint",value:function(e){return new Ig(Us(e.latitude),Us(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Vs(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Bs(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Fs(e);return new lu(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=du.fromString(e);Go(lh(n));var r=new Hs(n.get(1),n.get(3)),i=new mu(n.popFirst(5));return r.isEqual(t)||Bo("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function _k(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var xk=function(e){Fr(n,e);var t=Vr(n);function n(e){var r;return Rr(this,n),(r=t.call(this)).firestore=e,r}return Pr(n,[{key:"convertBytes",value:function(e){return new xg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ig(this.firestore,null,t)}}]),n}(wk);var Sk=function(){function e(t,n){Rr(this,e),this.hasPendingWrites=t,this.fromCache=n}return Pr(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Ek=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i,a,o,u){var s;return Rr(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Pr(n,[{key:"exists",value:function(){return wo(Ur(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Ik(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(nk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(ek),Ik=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return Pr(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return wo(Ur(n.prototype),"data",this).call(this,e)}}]),n}(Ek),Tk=function(){function e(t,n,r,i){Rr(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Sk(i.hasPendingWrites,i.fromCache),this.query=r}return Pr(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Ik(n._firestore,n._userDataWriter,r.key,r,new Sk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Qo(Ko.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Ik(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Sk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Ik(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Sk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Ck(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function Ck(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wo()}}function Nk(e,t){return e instanceof Ek&&t instanceof Ek?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Tk&&t instanceof Tk&&e._firestore===t._firestore&&cg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var Rk=function(e){Fr(n,e);var t=Vr(n);function n(e){var r;return Rr(this,n),(r=t.call(this)).firestore=e,r}return Pr(n,[{key:"convertBytes",value:function(e){return new xg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ig(this.firestore,null,t)}}]),n}(wk);function Ak(e){e=Jy(e,ig);var t=Jy(e.firestore,dg),n=pg(t),r=new Rk(t);return function(e,t){var n=new Yo;return e.asyncQueue.enqueueAndForget(Cr(br().mark((function r(){return br().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Cr(br().mark((function e(t,n,r){var i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Zo(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Qo(Ko.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=qv(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Fy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Ek(t,r,e._key,n,new Sk(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Ok(e){e=Jy(e,rg);var t=Jy(e.firestore,dg),n=pg(t),r=new Rk(t);return rk(e._query),Hy(n,e._query).then((function(n){return new Tk(t,r,e,n)}))}function Pk(e){e=Jy(e,rg);var t=Jy(e.firestore,dg),n=pg(t),r=new Rk(t);return function(e,t){var n=new Yo;return e.asyncQueue.enqueueAndForget(Cr(br().mark((function r(){return br().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Cr(br().mark((function e(t,n,r){var i,a,o,u,s;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yp(t,n,!0);case 3:i=e.sent,a=new hm(n,i.Ts),o=a.ma(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=qv(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Fy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Tk(t,r,e,n)}))}function Dk(e){e=Jy(e,rg);var t=Jy(e.firestore,dg),n=pg(t),r=new Rk(t);return Hy(n,e._query,{source:"server"}).then((function(n){return new Tk(t,r,e,n)}))}function Lk(e,t,n){e=Jy(e,ig);var r=Jy(e.firestore,dg),i=_k(e.converter,t,n);return jk(r,[Lg(Dg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Hl.none())])}function Mk(e,t,n){e=Jy(e,ig);for(var r=Jy(e.firestore,dg),i=Dg(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return jk(r,[("string"==typeof(t=ji(t))||t instanceof Sg?qg(i,"updateDoc",e._key,t,n,o):Bg(i,"updateDoc",e._key,t)).toMutation(e._key,Hl.exists(!0))])}function Fk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ji(e);var u={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof n[s]||fg(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(fg(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof ig)l=Jy(e.firestore,dg),f=Jc(e._key.path),c={next:function(t){n[s]&&n[s](zk(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Jy(e,rg);l=Jy(p.firestore,dg),f=p._query;var v=new Rk(l);c={next:function(e){n[s]&&n[s](new Tk(l,v,p,e))},error:n[s+1],complete:n[s+2]},rk(e._query)}return function(e,t,n,r){var i=new xy(r),a=new am(t,i,n);return e.asyncQueue.enqueueAndForget(Cr(br().mark((function t(){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Jv,t.next=3,Vy(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Za(),e.asyncQueue.enqueueAndForget(Cr(br().mark((function t(){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=em,t.next=3,Vy(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(pg(l),f,h,c)}function Uk(e,t){return function(e,t){var n=new xy(t);return e.asyncQueue.enqueueAndForget(Cr(br().mark((function t(){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Zo(e).Y_.add(t),t.next()},t.next=3,Vy(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Za(),e.asyncQueue.enqueueAndForget(Cr(br().mark((function t(){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Zo(e).Y_.delete(t)},t.next=3,Vy(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(pg(e=Jy(e,dg)),fg(t)?t:{next:t})}function jk(e,t){return function(e,t){var n=new Yo;return e.asyncQueue.enqueueAndForget(Cr(br().mark((function r(){return br().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Cm,r.next=3,jy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(pg(e),t)}function zk(e,t,n){var r=n.docs.get(t._key),i=new Rk(e);return new Ek(e,i,t._key,r,new Sk(n.hasPendingWrites,n.fromCache),t.converter)}var Vk={maxAttempts:5},Bk=function(){function e(t,n){Rr(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Dg(t)}return Pr(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=qk(e,this._firestore),i=_k(r.converter,t,n),a=Lg(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Hl.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=qk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ji(t))||t instanceof Sg?qg(this._dataReader,"WriteBatch.update",i._key,t,n,o):Bg(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Hl.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=qk(e,this._firestore);return this._mutations=this._mutations.concat(new of(t._key,Hl.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Qo(Ko.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function qk(e,t){if((e=ji(e)).firestore!==t)throw new Qo(Ko.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Hk=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this,e,r))._firestore=e,i}return Pr(n,[{key:"get",value:function(e){var t=this,r=qk(e,this._firestore),i=new Rk(this._firestore);return wo(Ur(n.prototype),"get",this).call(this,e).then((function(e){return new Ek(t._firestore,i,r._key,e._document,new Sk(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Rr(this,e),this._firestore=t,this._transaction=n,this._dataReader=Dg(t)}return Pr(e,[{key:"get",value:function(e){var t=this,n=qk(e,this._firestore),r=new xk(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Wo();var i=e[0];if(i.isFoundDocument())return new ek(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ek(t._firestore,r,n._key,null,n.converter);throw Wo()}))}},{key:"set",value:function(e,t,n){var r=qk(e,this._firestore),i=_k(r.converter,t,n),a=Lg(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=qk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ji(t))||t instanceof Sg?qg(this._dataReader,"Transaction.update",i._key,t,n,o):Bg(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=qk(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Wk(e,t,n){e=Jy(e,dg);var r=Object.assign(Object.assign({},Vk),n);return function(e){if(e.maxAttempts<1)throw new Qo(Ko.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Yo;return e.asyncQueue.enqueueAndForget(Cr(br().mark((function i(){var a;return br().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,zy(e);case 2:a=i.sent,new Iy(e.asyncQueue,a,n,t,r).au();case 4:case"end":return i.stop()}}),i)})))),r.promise}(pg(e),(function(n){return t(new Hk(e,n))}),r)}function Gk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jg("arrayUnion",t)}function Zk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new zg("arrayRemove",t)}new WeakMap;!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Uo=e}(ja),Na(new zi("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new dg(new eu(e.getProvider("auth-internal")),new iu(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Qo(Ko.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hs(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Ga(Mo,"4.7.3",e),Ga(Mo,"4.7.3","esm2017")}();function Kk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Qo("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Qk(){if("undefined"===typeof Uint8Array)throw new Qo("unimplemented","Uint8Arrays are not available in this environment.")}function Yk(){if("undefined"==typeof atob)throw new Qo("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Xk=function(){function e(t){Rr(this,e),this._delegate=t}return Pr(e,[{key:"toBase64",value:function(){return Yk(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Qk(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Yk(),new e(xg.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Qk(),new e(xg.fromUint8Array(t))}}]),e}();function Jk(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Dr(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var $k=function(){function e(){Rr(this,e)}return Pr(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){qo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings();return yg(e,wy.provider,{build:function(e){return new ky(e,n.cacheSizeBytes,null==t?void 0:t.forceOwnership)}}),Promise.resolve()}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){return mg.apply(this,arguments)}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Qo(Ko.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Yo;return e._queue.enqueueAndForgetEvenWhileRestricted(Cr(br().mark((function n(){return br().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ou.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Ou.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(tp(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),eb=function(){function e(t,n,r){var i=this;Rr(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Hs||(this._appCompat=t)}return Pr(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||qo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ng(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return kg(this._delegate)}},{key:"disableNetwork",value:function(){return bg(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Ky("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return gg(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Uk(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Qo("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new pb(this,og(this._delegate,e))}catch(t){throw ob(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new ab(this,ug(this._delegate,e))}catch(t){throw ob(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new fb(this,function(e,t){if(e=Jy(e,tg),Zy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Qo(Ko.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new rg(e,null,function(e){return new Yc(du.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw ob(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Wk(this._delegate,(function(n){return e(new nb(t,n))}))}},{key:"batch",value:function(){var e=this;return pg(this._delegate),new rb(new Bk(this._delegate,(function(t){return jk(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return wg(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return _g(this._delegate,e).then((function(e){return e?new fb(t,e):null}))}}]),e}(),tb=function(e){Fr(n,e);var t=Vr(n);function n(e){var r;return Rr(this,n),(r=t.call(this)).firestore=e,r}return Pr(n,[{key:"convertBytes",value:function(e){return new Xk(new xg(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return ab.forKey(t,this.firestore,null)}}]),n}(wk);var nb=function(){function e(t,n){Rr(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new tb(t)}return Pr(e,[{key:"get",value:function(e){var t=this,n=vb(e);return this._delegate.get(n).then((function(e){return new cb(t._firestore,new Ek(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=vb(e);return n?(Kk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=vb(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=vb(e);return this._delegate.delete(t),this}}]),e}(),rb=function(){function e(t){Rr(this,e),this._delegate=t}return Pr(e,[{key:"set",value:function(e,t,n){var r=vb(e);return n?(Kk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=vb(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=vb(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),ib=function(){function e(t,n,r){Rr(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Pr(e,[{key:"fromFirestore",value:function(e,t){var n=new Ik(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new lb(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new tb(t),n),i.set(n,a)),a}}]),e}();ib.INSTANCES=new WeakMap;var ab=function(){function e(t,n){Rr(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new tb(t)}return Pr(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new pb(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new pb(this.firestore,og(this._delegate,e))}catch(t){throw ob(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ji(e))instanceof ig&&sg(this._delegate,e)}},{key:"set",value:function(e,t){t=Kk("DocumentReference.set",t);try{return t?Lk(this._delegate,e,t):Lk(this._delegate,e)}catch(n){throw ob(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Mk(this._delegate,e):Mk.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw ob(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return jk(Jy((e=this._delegate).firestore,dg),[new of(e._key,Hl.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ub(n),a=sb(n,(function(t){return new cb(e.firestore,new Ek(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Fk(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Ak(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Jy(e,ig);var t=Jy(e.firestore,dg);return qy(pg(t),e._key,{source:"server"}).then((function(n){return zk(t,e,n)}))}(this._delegate):function(e){e=Jy(e,ig);var t=Jy(e.firestore,dg);return qy(pg(t),e._key).then((function(n){return zk(t,e,n)}))}(this._delegate)).then((function(e){return new cb(t.firestore,new Ek(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(ib.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Qo("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new ig(n._delegate,r,new mu(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new ig(n._delegate,r,t))}}]),e}();function ob(e,t,n){return e.message=e.message.replace(t,n),e}function ub(e){var t,n=Dr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Jk(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function sb(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Jk(e[0])?e[0]:Jk(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var cb=function(){function e(t,n){Rr(this,e),this._firestore=t,this._delegate=n}return Pr(e,[{key:"ref",get:function(){return new ab(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Nk(this._delegate,e._delegate)}}]),e}(),lb=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return Pr(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Wo(),t}}]),n}(cb),fb=function(){function e(t,n){Rr(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new tb(t)}return Pr(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,ok(this._delegate,function(e,t,n){var r=t,i=nk("where",e);return uk._create(i,r,n)}(t,n,r)))}catch(i){throw ob(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,ok(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=nk("orderBy",e);return ck._create(n,t)}(t,n)))}catch(r){throw ob(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,ok(this._delegate,($y("limit",n=t),lk._create("limit",n,"F"))))}catch(n){throw ob(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,ok(this._delegate,($y("limitToLast",n=t),lk._create("limitToLast",n,"L"))))}catch(n){throw ob(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,ok(this._delegate,hk.apply(void 0,arguments)))}catch(t){throw ob(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,ok(this._delegate,dk.apply(void 0,arguments)))}catch(t){throw ob(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,ok(this._delegate,vk.apply(void 0,arguments)))}catch(t){throw ob(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,ok(this._delegate,mk.apply(void 0,arguments)))}catch(t){throw ob(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return cg(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Pk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?Dk(this._delegate):Ok(this._delegate)).then((function(e){return new db(t.firestore,new Tk(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ub(n),a=sb(n,(function(t){return new db(e.firestore,new Tk(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Fk(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(ib.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),hb=function(){function e(t,n){Rr(this,e),this._firestore=t,this._delegate=n}return Pr(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new lb(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),db=function(){function e(t,n){Rr(this,e),this._firestore=t,this._delegate=n}return Pr(e,[{key:"query",get:function(){return new fb(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new lb(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new hb(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new lb(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Nk(this._delegate,e._delegate)}}]),e}(),pb=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Pr(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new ab(this.firestore,e):null}},{key:"doc",value:function(e){try{return new ab(this.firestore,void 0===e?ug(this._delegate):ug(this._delegate,e))}catch(t){throw ob(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Jy(e.firestore,dg),r=ug(e),i=_k(e.converter,t);return jk(n,[Lg(Dg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Hl.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new ab(t.firestore,e)}))}},{key:"isEqual",value:function(e){return sg(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(ib.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(fb);function vb(e){return Jy(e,ig)}var mb,yb=function(){function e(){Rr(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Br(Sg,n)}return Pr(e,[{key:"isEqual",value:function(e){return(e=ji(e))instanceof Sg&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(vu.keyField().canonicalString())}}]),e}(),gb=function(){function e(t){Rr(this,e),this._delegate=t}return Pr(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Ug("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Mg("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Gk.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Zk.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new Vg("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),kb={Firestore:eb,GeoPoint:Ig,Timestamp:lu,Blob:Xk,Transaction:nb,WriteBatch:rb,DocumentReference:ab,DocumentSnapshot:cb,Query:fb,QueryDocumentSnapshot:lb,QuerySnapshot:db,CollectionReference:pb,FieldPath:yb,FieldValue:gb,setLogLevel:function(e){var t;t=e,jo.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function bb(e){return v(e)||b(e)||y(e)||g()}(function(e,t){e.INTERNAL.registerComponent(new zi("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},kb)))})(mb=bo,(function(e,t){return new eb(e,t,new $k)})),mb.registerVersion("@firebase/firestore-compat","0.3.38");function wb(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var _b,xb={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Sb="EMAIL_SIGNIN",Eb="PASSWORD_RESET",Ib="RECOVER_EMAIL",Tb="REVERT_SECOND_FACTOR_ADDITION",Cb="VERIFY_AND_CHANGE_EMAIL",Nb="VERIFY_EMAIL";function Rb(){return(0,Nr.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Ab=function(){var e;return e={},(0,Nr.Z)(e,"admin-restricted-operation","This operation is restricted to administrators only."),(0,Nr.Z)(e,"argument-error",""),(0,Nr.Z)(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,Nr.Z)(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,Nr.Z)(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,Nr.Z)(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,Nr.Z)(e,"cordova-not-ready","Cordova framework is not ready."),(0,Nr.Z)(e,"cors-unsupported","This browser is not supported."),(0,Nr.Z)(e,"credential-already-in-use","This credential is already associated with a different user account."),(0,Nr.Z)(e,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,Nr.Z)(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,Nr.Z)(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,Nr.Z)(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,Nr.Z)(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,Nr.Z)(e,"email-already-in-use","The email address is already in use by another account."),(0,Nr.Z)(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,Nr.Z)(e,"expired-action-code","The action code has expired."),(0,Nr.Z)(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,Nr.Z)(e,"internal-error","An internal AuthError has occurred."),(0,Nr.Z)(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,Nr.Z)(e,"invalid-app-id","The mobile app identifier is not registered for the current project."),(0,Nr.Z)(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,Nr.Z)(e,"invalid-auth-event","An internal AuthError has occurred."),(0,Nr.Z)(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,Nr.Z)(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,Nr.Z)(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,Nr.Z)(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,Nr.Z)(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,Nr.Z)(e,"invalid-email","The email address is badly formatted."),(0,Nr.Z)(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,Nr.Z)(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,Nr.Z)(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,Nr.Z)(e,"invalid-credential","The supplied auth credential is incorrect, malformed or has expired."),(0,Nr.Z)(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,Nr.Z)(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,Nr.Z)(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,Nr.Z)(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,Nr.Z)(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,Nr.Z)(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,Nr.Z)(e,"wrong-password","The password is invalid or the user does not have a password."),(0,Nr.Z)(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,Nr.Z)(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,Nr.Z)(e,"invalid-provider-id","The specified provider ID is invalid."),(0,Nr.Z)(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,Nr.Z)(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,Nr.Z)(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,Nr.Z)(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,Nr.Z)(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),(0,Nr.Z)(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,Nr.Z)(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,Nr.Z)(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,Nr.Z)(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,Nr.Z)(e,"missing-continue-uri","A continue URL must be provided in the request."),(0,Nr.Z)(e,"missing-iframe-start","An internal AuthError has occurred."),(0,Nr.Z)(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,Nr.Z)(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,Nr.Z)(e,"missing-password","A non-empty password must be provided"),(0,Nr.Z)(e,"missing-multi-factor-info","No second factor identifier is provided."),(0,Nr.Z)(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,Nr.Z)(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,Nr.Z)(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,Nr.Z)(e,"app-deleted","This instance of FirebaseApp has been deleted."),(0,Nr.Z)(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,Nr.Z)(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,Nr.Z)(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,Nr.Z)(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,Nr.Z)(e,"no-auth-event","An internal AuthError has occurred."),(0,Nr.Z)(e,"no-such-provider","User was not linked to an account with the given provider."),(0,Nr.Z)(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,Nr.Z)(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,Nr.Z)(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,Nr.Z)(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,Nr.Z)(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,Nr.Z)(e,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,Nr.Z)(e,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,Nr.Z)(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,Nr.Z)(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,Nr.Z)(e,"rejected-credential","The request contains malformed or mismatching credentials."),(0,Nr.Z)(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,Nr.Z)(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,Nr.Z)(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,Nr.Z)(e,"timeout","The operation has timed out."),(0,Nr.Z)(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,Nr.Z)(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,Nr.Z)(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,Nr.Z)(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,Nr.Z)(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,Nr.Z)(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,Nr.Z)(e,"unverified-email","The operation requires a verified email."),(0,Nr.Z)(e,"user-cancelled","The user did not grant your application the permissions it requested."),(0,Nr.Z)(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,Nr.Z)(e,"user-disabled","The user account has been disabled by an administrator."),(0,Nr.Z)(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,Nr.Z)(e,"user-signed-out",""),(0,Nr.Z)(e,"weak-password","The password must be 6 characters long or more."),(0,Nr.Z)(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,Nr.Z)(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),(0,Nr.Z)(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),(0,Nr.Z)(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),(0,Nr.Z)(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),(0,Nr.Z)(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),(0,Nr.Z)(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),(0,Nr.Z)(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),(0,Nr.Z)(e,"invalid-req-type","Invalid request parameters."),(0,Nr.Z)(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),(0,Nr.Z)(e,"unsupported-password-policy-schema-version","The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK."),(0,Nr.Z)(e,"password-does-not-meet-requirements","The password does not meet the requirements."),e},Ob=Rb,Pb=new ki("auth","Firebase",Rb()),Db=new Ji("@firebase/auth");function Lb(e){if(Db.logLevel<=Wi.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Db.warn.apply(Db,["Auth (".concat(ja,"): ").concat(e)].concat(n))}}function Mb(e){if(Db.logLevel<=Wi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Db.error.apply(Db,["Auth (".concat(ja,"): ").concat(e)].concat(n))}}function Fb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Bb.apply(void 0,[e].concat(n))}function Ub(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Bb.apply(void 0,[e].concat(n))}function jb(e,t,n){var r=Object.assign(Object.assign({},Ob()),(0,Nr.Z)({},t,n));return new ki("auth","Firebase",r).create(t,{appName:e.name})}function zb(e){return jb(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vb(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Fb(e,"argument-error"),jb(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Bb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=w(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(w(o)))}return Pb.create.apply(Pb,[e].concat(n))}function qb(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Bb.apply(void 0,[t].concat(r))}}function Hb(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Mb(t),new Error(t)}function Wb(e,t){e||Hb(t)}function Gb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Zb(){return"http:"===Kb()||"https:"===Kb()}function Kb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Qb=function(){function e(t,n){Rr(this,e),this.shortDelay=t,this.longDelay=n,Wb(n>t,"Short delay should be less than long delay!"),this.isMobile=ci()||di()}return Pr(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Zb()||hi()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Yb(e,t){Wb(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Xb=function(){function e(){Rr(this,e)}return Pr(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Hb("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}))},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Hb("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Hb("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Jb=(_b={},(0,Nr.Z)(_b,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,Nr.Z)(_b,"MISSING_CUSTOM_TOKEN","internal-error"),(0,Nr.Z)(_b,"INVALID_IDENTIFIER","invalid-email"),(0,Nr.Z)(_b,"MISSING_CONTINUE_URI","internal-error"),(0,Nr.Z)(_b,"INVALID_PASSWORD","wrong-password"),(0,Nr.Z)(_b,"MISSING_PASSWORD","missing-password"),(0,Nr.Z)(_b,"INVALID_LOGIN_CREDENTIALS","invalid-credential"),(0,Nr.Z)(_b,"EMAIL_EXISTS","email-already-in-use"),(0,Nr.Z)(_b,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,Nr.Z)(_b,"INVALID_IDP_RESPONSE","invalid-credential"),(0,Nr.Z)(_b,"INVALID_PENDING_TOKEN","invalid-credential"),(0,Nr.Z)(_b,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,Nr.Z)(_b,"MISSING_REQ_TYPE","internal-error"),(0,Nr.Z)(_b,"EMAIL_NOT_FOUND","user-not-found"),(0,Nr.Z)(_b,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,Nr.Z)(_b,"EXPIRED_OOB_CODE","expired-action-code"),(0,Nr.Z)(_b,"INVALID_OOB_CODE","invalid-action-code"),(0,Nr.Z)(_b,"MISSING_OOB_CODE","internal-error"),(0,Nr.Z)(_b,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,Nr.Z)(_b,"INVALID_ID_TOKEN","invalid-user-token"),(0,Nr.Z)(_b,"TOKEN_EXPIRED","user-token-expired"),(0,Nr.Z)(_b,"USER_NOT_FOUND","user-token-expired"),(0,Nr.Z)(_b,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,Nr.Z)(_b,"PASSWORD_DOES_NOT_MEET_REQUIREMENTS","password-does-not-meet-requirements"),(0,Nr.Z)(_b,"INVALID_CODE","invalid-verification-code"),(0,Nr.Z)(_b,"INVALID_SESSION_INFO","invalid-verification-id"),(0,Nr.Z)(_b,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,Nr.Z)(_b,"MISSING_SESSION_INFO","missing-verification-id"),(0,Nr.Z)(_b,"SESSION_EXPIRED","code-expired"),(0,Nr.Z)(_b,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,Nr.Z)(_b,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,Nr.Z)(_b,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,Nr.Z)(_b,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,Nr.Z)(_b,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,Nr.Z)(_b,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,Nr.Z)(_b,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,Nr.Z)(_b,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,Nr.Z)(_b,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,Nr.Z)(_b,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,Nr.Z)(_b,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),(0,Nr.Z)(_b,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),(0,Nr.Z)(_b,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),(0,Nr.Z)(_b,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),(0,Nr.Z)(_b,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),(0,Nr.Z)(_b,"MISSING_CLIENT_TYPE","missing-client-type"),(0,Nr.Z)(_b,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),(0,Nr.Z)(_b,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),(0,Nr.Z)(_b,"INVALID_REQ_TYPE","invalid-req-type"),_b),$b=new Qb(3e4,6e4);function ew(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function tw(e,t,n,r){return nw.apply(this,arguments)}function nw(){return nw=Cr(br().mark((function e(t,n,r,i){var a,o=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",rw(t,a,Cr(br().mark((function e(){var a,o,u,s,c;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Ri(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),c=Object.assign({method:n,headers:s},a),"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(c.referrerPolicy="no-referrer"),e.abrupt("return",Xb.fetch()(uw(t,t.config.apiHost,r,u),c));case 12:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),nw.apply(this,arguments)}function rw(e,t,n){return iw.apply(this,arguments)}function iw(){return iw=Cr(br().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Jb),n),e.prev=2,a=new cw(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw lw(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=k(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw lw(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw lw(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw lw(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw jb(t,d,h);case 34:Fb(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof gi)){e.next=41;break}throw e.t0;case 41:Fb(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),iw.apply(this,arguments)}function aw(e,t,n,r){return ow.apply(this,arguments)}function ow(){return ow=Cr(br().mark((function e(t,n,r,i){var a,o,u=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,tw(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Fb(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),ow.apply(this,arguments)}function uw(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Yb(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function sw(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var cw=function(){function e(t){var n=this;Rr(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Ub(n.auth,"network-request-failed"))}),$b.get())}))}return Pr(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function lw(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Ub(e,t,r);return i.customData._tokenResponse=n,i}function fw(e){return void 0!==e&&void 0!==e.getResponse}function hw(e){return void 0!==e&&void 0!==e.enterprise}var dw=function(){function e(t){if(Rr(this,e),this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}return Pr(e,[{key:"getProviderEnforcementState",value:function(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;var t,n=Dr(this.recaptchaEnforcementState);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.provider&&r.provider===e)return sw(r.enforcementState)}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"isProviderEnabled",value:function(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}]),e}();function pw(e){return vw.apply(this,arguments)}function vw(){return vw=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tw(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),vw.apply(this,arguments)}function mw(e,t){return yw.apply(this,arguments)}function yw(){return yw=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tw(t,"GET","/v2/recaptchaConfig",ew(t,n)));case 1:case"end":return e.stop()}}),e)}))),yw.apply(this,arguments)}function gw(e,t){return kw.apply(this,arguments)}function kw(){return kw=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tw(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),kw.apply(this,arguments)}function bw(e,t){return ww.apply(this,arguments)}function ww(){return ww=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tw(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ww.apply(this,arguments)}function _w(e,t){return xw.apply(this,arguments)}function xw(){return xw=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tw(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),xw.apply(this,arguments)}function Sw(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Ew(){return Ew=Cr(br().mark((function e(t){var n,r,i,a,o,u,s=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=ji(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,qb((a=Tw(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Sw(Iw(a.auth_time)),issuedAtTime:Sw(Iw(a.iat)),expirationTime:Sw(Iw(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ew.apply(this,arguments)}function Iw(e){return 1e3*Number(e)}function Tw(e){var t=k(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Mb("JWT malformed, contained fewer than 3 sections"),null;try{var a=ei(r);return a?JSON.parse(a):(Mb("Failed to decode base64 JWT payload"),null)}catch(o){return Mb("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Cw(e){var t=Tw(e);return qb(t,"internal-error"),qb("undefined"!==typeof t.exp,"internal-error"),qb("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}function Nw(e,t){return Rw.apply(this,arguments)}function Rw(){return Rw=Cr(br().mark((function e(t,n){var r=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof gi&&Aw(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Rw.apply(this,arguments)}function Aw(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Ow=function(){function e(t){Rr(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Pr(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Cr(br().mark((function t(){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Pw=function(){function e(t,n){Rr(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Pr(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Sw(this.lastLoginAt),this.creationTime=Sw(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Dw(e){return Lw.apply(this,arguments)}function Lw(){return Lw=Cr(br().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Nw(t,_w(r,{idToken:i}));case 6:qb(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Uw(o.providerUserInfo):[],s=Fw(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Pw(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Lw.apply(this,arguments)}function Mw(){return(Mw=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ji(t),e.next=3,Dw(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fw(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(w(n),w(t))}function Uw(e){return e.map((function(e){var t=e.providerId,n=wb(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function jw(e,t){return zw.apply(this,arguments)}function zw(){return zw=Cr(br().mark((function e(t,n){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rw(t,{},Cr(br().mark((function e(){var r,i,a,o,u,s;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ri({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=uw(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Xb.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),zw.apply(this,arguments)}function Vw(e,t){return Bw.apply(this,arguments)}function Bw(){return Bw=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tw(t,"POST","/v2/accounts:revokeToken",ew(t,n)));case 1:case"end":return e.stop()}}),e)}))),Bw.apply(this,arguments)}var qw=function(){function e(){Rr(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Pr(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){qb(e.idToken,"internal-error"),qb("undefined"!==typeof e.idToken,"internal-error"),qb("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Cw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"updateFromIdToken",value:function(e){qb(0!==e.length,"internal-error");var t=Cw(e);this.updateTokensAndExpiration(e,null,t)}},{key:"getToken",value:function(){var e=Cr(br().mark((function e(t){var n=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.length>1&&void 0!==n[1]&&n[1]||!this.accessToken||this.isExpired){e.next=3;break}return e.abrupt("return",this.accessToken);case 3:if(qb(this.refreshToken,t,"user-token-expired"),!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Cr(br().mark((function e(t,n){var r,i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jw(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Hb("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(qb("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(qb("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(qb("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Hw(e,t){qb("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Ww=function(){function e(t){Rr(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=wb(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ow(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?w(a.providerData):[],this.metadata=new Pw(a.createdAt||void 0,a.lastLoginAt||void 0)}return Pr(e,[{key:"getIdToken",value:function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nw(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(qb(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Ew.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Mw.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(qb(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){qb(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Cr(br().mark((function e(t){var n,r,i=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Dw(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Cr(br().mark((function e(){var t;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pa(this.auth.app)){e.next=2;break}return e.abrupt("return",Promise.reject(zb(this.auth)));case 2:return e.next=4,this.getIdToken();case 4:return t=e.sent,e.next=7,Nw(this,gw(this.auth,{idToken:t}));case 7:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;qb(k&&x,t,"internal-error");var S=qw.fromJSON(this.name,x);qb("string"===typeof k,t,"internal-error"),Hw(f,t.name),Hw(h,t.name),qb("boolean"===typeof b,t,"internal-error"),qb("boolean"===typeof w,t,"internal-error"),Hw(d,t.name),Hw(p,t.name),Hw(v,t.name),Hw(m,t.name),Hw(y,t.name),Hw(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=Cr(br().mark((function t(n,r){var i,a,o,u=arguments;return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new qw).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Dw(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_fromGetAccountInfoResponse",value:function(){var t=Cr(br().mark((function t(n,r,i){var a,o,u,s,c,l;return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return qb(void 0!==(a=r.users[0]).localId,"internal-error"),o=void 0!==a.providerUserInfo?Uw(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(null===o||void 0===o?void 0:o.length),(s=new qw).updateFromIdToken(i),c=new e({uid:a.localId,auth:n,stsTokenManager:s,isAnonymous:u}),l={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Pw(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(null===o||void 0===o?void 0:o.length)},Object.assign(c,l),t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}(),Gw=new Map;function Zw(e){Wb(e instanceof Function,"Expected a class definition");var t=Gw.get(e);return t?(Wb(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Gw.set(e,t),t)}var Kw=function(){function e(){Rr(this,e),this.type="NONE",this.storage={}}return Pr(e,[{key:"_isAvailable",value:function(){var e=Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Kw.type="NONE";var Qw=Kw;function Yw(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Xw=function(){function e(t,n,r){Rr(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Yw(this.userKey,a.apiKey,o),this.fullPersistenceKey=Yw("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Pr(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Cr(br().mark((function e(){var t;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ww._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Cr(br().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Zw(Qw),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Zw(Qw),u=Yw(i,n.config.apiKey,n.name),s=null,c=Dr(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Ww._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Jw(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(n_(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if($w(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(i_(t))return"Blackberry";if(a_(t))return"Webos";if(e_(t))return"Safari";if((t.includes("chrome/")||t_(t))&&!t.includes("edge/"))return"Chrome";if(r_(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function $w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si();return/firefox\//i.test(e)}function e_(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:si()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function t_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si();return/crios\//i.test(e)}function n_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si();return/iemobile/i.test(e)}function r_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si();return/android/i.test(e)}function i_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si();return/blackberry/i.test(e)}function a_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si();return/webos/i.test(e)}function o_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function u_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si();return o_(e)||r_(e)||a_(e)||i_(e)||/windows phone/i.test(e)||n_(e)}function s_(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Jw(si());break;case"Worker":t="".concat(Jw(si()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ja,"/").concat(r)}var c_=function(){function e(t){Rr(this,e),this.auth=t,this.queue=[]}return Pr(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Cr(br().mark((function e(t){var n,r,i,a,o,u,s;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=Dr(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=Dr(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function l_(e){return f_.apply(this,arguments)}function f_(){return f_=Cr(br().mark((function e(t){var n,r=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",tw(t,"GET","/v2/passwordPolicy",ew(t,n)));case 2:case"end":return e.stop()}}),e)}))),f_.apply(this,arguments)}var h_=function(){function e(t){var n,r,i,a;Rr(this,e);var o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=o.minPasswordLength)&&void 0!==n?n:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=t.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(a=t.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=t.schemaVersion}return Pr(e,[{key:"validatePassword",value:function(e){var t,n,r,i,a,o,u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(n=u.meetsMaxPasswordLength)||void 0===n||n),u.isValid&&(u.isValid=null===(r=u.containsLowercaseLetter)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsUppercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(a=u.containsNumericCharacter)||void 0===a||a),u.isValid&&(u.isValid=null===(o=u.containsNonAlphanumericCharacter)||void 0===o||o),u}},{key:"validatePasswordLengthOptions",value:function(e,t){var n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}},{key:"validatePasswordCharacterOptions",value:function(e,t){var n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(var r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}},{key:"updatePasswordCharacterOptionsStatuses",value:function(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}]),e}(),d_=function(){function e(t,n,r,i){Rr(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new v_(this),this.idTokenSubscription=new v_(this),this.beforeStateQueue=new c_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return Pr(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Zw(t)),this._initializationPromise=this.queue(Cr(br().mark((function r(){var i,a;return br().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Xw.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Cr(br().mark((function e(){var t;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUserFromIdToken",value:function(){var e=Cr(br().mark((function e(t){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_w(this,{idToken:t});case 3:return n=e.sent,e.next=6,Ww._fromGetAccountInfoResponse(this,n,t);case 6:return r=e.sent,e.next=9,this.directlySetCurrentUser(r);case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(0),console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e.t0),e.next=16,this.directlySetCurrentUser(null);case 16:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Cr(br().mark((function e(t){var n,r,i,a,o,u,s,c,l=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pa(this.app)){e.next=7;break}if(!(r=this.app.settings.authIdToken)){e.next=6;break}return e.abrupt("return",new Promise((function(e){setTimeout((function(){return l.initializeCurrentUserFromIdToken(r).then(e,e)}))})));case 6:return e.abrupt("return",this.directlySetCurrentUser(null));case 7:return e.next=9,this.assertedPersistence.getCurrentUser();case 9:if(i=e.sent,a=i,o=!1,!t||!this.config.authDomain){e.next=21;break}return e.next=15,this.getOrInitRedirectPersistenceManager();case 15:return u=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===a||void 0===a?void 0:a._redirectEventId,e.next=19,this.tryRedirectSignIn(t);case 19:c=e.sent,u&&u!==s||!(null===c||void 0===c?void 0:c.user)||(a=c.user,o=!0);case 21:if(a){e.next=23;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 23:if(a._redirectEventId){e.next=39;break}if(!o){e.next=34;break}return e.prev=25,e.next=28,this.beforeStateQueue.runMiddleware(a);case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(25),a=i,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 34:if(!a){e.next=38;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(a));case 38:return e.abrupt("return",this.directlySetCurrentUser(null));case 39:return qb(this._popupRedirectResolver,this,"argument-error"),e.next=42,this.getOrInitRedirectPersistenceManager();case 42:if(!this.redirectUser||this.redirectUser._redirectEventId!==a._redirectEventId){e.next=44;break}return e.abrupt("return",this.directlySetCurrentUser(a));case 44:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(a));case 45:case"end":return e.stop()}}),e,this,[[25,30]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dw(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pa(this.app)){e.next=2;break}return e.abrupt("return",Promise.reject(zb(this)));case 2:return(n=t?ji(t):null)&&qb(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Cr(br().mark((function e(t){var n,r=this,i=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&qb(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pa(this.app)){e.next=2;break}return e.abrupt("return",Promise.reject(zb(this)));case 2:return e.next=4,this.beforeStateQueue.runMiddleware(null);case 4:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=7;break}return e.next=7,this._setRedirectUser(null);case 7:return e.abrupt("return",this._updateCurrentUser(null,!0));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return Pa(this.app)?Promise.reject(zb(this)):this.queue(Cr(br().mark((function n(){return br().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Zw(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"validatePassword",value:function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._getPasswordPolicyInternal()){e.next=3;break}return e.next=3,this._updatePasswordPolicy();case 3:if((n=this._getPasswordPolicyInternal()).schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION){e.next=6;break}return e.abrupt("return",Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})));case 6:return e.abrupt("return",n.validatePassword(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPasswordPolicyInternal",value:function(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}},{key:"_updatePasswordPolicy",value:function(){var e=Cr(br().mark((function e(){var t,n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l_(this);case 2:t=e.sent,n=new h_(t),null===this.tenantId?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new ki("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"authStateReady",value:function(){var e=this;return new Promise((function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged((function(){r(),t()}),n)}))}},{key:"revokeAccessToken",value:function(){var e=Cr(br().mark((function e(t){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.currentUser){e.next=8;break}return e.next=3,this.currentUser.getIdToken();case 3:return n=e.sent,r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n},null!=this.tenantId&&(r.tenantId=this.tenantId),e.next=8,Vw(this,r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Cr(br().mark((function e(t,n){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return qb(n=t&&Zw(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Xw.create(this,[Zw(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Cr(br().mark((function e(t){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Cr(br().mark((function e(t){var n=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(qb(u,this,"internal-error"),u.then((function(){o||a(i.currentUser)})),"function"===typeof t){var s=e.addObserver(t,n,r);return function(){o=!0,s()}}var c=e.addObserver(t);return function(){o=!0,c()}}},{key:"directlySetCurrentUser",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return qb(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=s_(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Cr(br().mark((function e(){var t,n,r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,Nr.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Cr(br().mark((function e(){var t,n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&Lb("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function p_(e){return ji(e)}var v_=function(){function e(t){var n=this;Rr(this,e),this.auth=t,this.observer=null,this.addObserver=Di((function(e){return n.observer=e}))}return Pr(e,[{key:"next",get:function(){return qb(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}(),m_={loadJS:function(){return Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Unable to load external scripts");case 1:case"end":return e.stop()}}),e)})))()},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y_(e){return m_.loadJS(e)}function g_(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var k_=function(){function e(t){Rr(this,e),this.type="recaptcha-enterprise",this.auth=p_(t)}return Pr(e,[{key:"verify",value:function(){var e=Cr(br().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;hw(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=Cr(br().mark((function e(n,r){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mw(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new dw(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&hw(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));var i=m_.recaptchaEnterpriseScript;0!==i.length&&(i+=r),y_(i).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function b_(e,t,n){return w_.apply(this,arguments)}function w_(){return w_=Cr(br().mark((function e(t,n,r){var i,a,o,u,s=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new k_(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),w_.apply(this,arguments)}function __(e,t,n,r){return x_.apply(this,arguments)}function x_(){return x_=Cr(br().mark((function e(t,n,r,i){var a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(a=t._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))){e.next=7;break}return e.next=3,b_(t,n,r,"getOobCode"===r);case 3:return o=e.sent,e.abrupt("return",i(t,o));case 7:return e.abrupt("return",i(t,n).catch(function(){var e=Cr(br().mark((function e(a){var o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("".concat(r," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.")),e.next=4,b_(t,n,r,"getOobCode"===r);case 4:return o=e.sent,e.abrupt("return",i(t,o));case 8:return e.abrupt("return",Promise.reject(a));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:case"end":return e.stop()}}),e)}))),x_.apply(this,arguments)}function S_(e,t,n){var r=p_(e);qb(r._canInitEmulator,r,"emulator-config-failed"),qb(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=E_(t),o=function(e){var t=E_(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:I_(r.substr(a.length+1))}}var o=k(r.split(":"),2);return{host:o[0],port:I_(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function E_(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function I_(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var T_=function(){function e(t,n){Rr(this,e),this.providerId=t,this.signInMethod=n}return Pr(e,[{key:"toJSON",value:function(){return Hb("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Hb("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Hb("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Hb("not implemented")}}]),e}();function C_(e,t){return N_.apply(this,arguments)}function N_(){return N_=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tw(t,"POST","/v1/accounts:resetPassword",ew(t,n)));case 1:case"end":return e.stop()}}),e)}))),N_.apply(this,arguments)}function R_(e,t){return A_.apply(this,arguments)}function A_(){return A_=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tw(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),A_.apply(this,arguments)}function O_(e,t){return P_.apply(this,arguments)}function P_(){return P_=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tw(t,"POST","/v1/accounts:signUp",n));case 1:case"end":return e.stop()}}),e)}))),P_.apply(this,arguments)}function D_(e,t){return L_.apply(this,arguments)}function L_(){return L_=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tw(t,"POST","/v1/accounts:update",ew(t,n)));case 1:case"end":return e.stop()}}),e)}))),L_.apply(this,arguments)}function M_(e,t){return F_.apply(this,arguments)}function F_(){return F_=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aw(t,"POST","/v1/accounts:signInWithPassword",ew(t,n)));case 1:case"end":return e.stop()}}),e)}))),F_.apply(this,arguments)}function U_(e,t){return j_.apply(this,arguments)}function j_(){return j_=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tw(t,"POST","/v1/accounts:sendOobCode",ew(t,n)));case 1:case"end":return e.stop()}}),e)}))),j_.apply(this,arguments)}function z_(e,t){return V_.apply(this,arguments)}function V_(){return V_=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U_(t,n));case 1:case"end":return e.stop()}}),e)}))),V_.apply(this,arguments)}function B_(e,t){return q_.apply(this,arguments)}function q_(){return q_=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U_(t,n));case 1:case"end":return e.stop()}}),e)}))),q_.apply(this,arguments)}function H_(e,t){return W_.apply(this,arguments)}function W_(){return W_=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U_(t,n));case 1:case"end":return e.stop()}}),e)}))),W_.apply(this,arguments)}function G_(e,t){return Z_.apply(this,arguments)}function Z_(){return Z_=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U_(t,n));case 1:case"end":return e.stop()}}),e)}))),Z_.apply(this,arguments)}function K_(e,t){return Q_.apply(this,arguments)}function Q_(){return Q_=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aw(t,"POST","/v1/accounts:signInWithEmailLink",ew(t,n)));case 1:case"end":return e.stop()}}),e)}))),Q_.apply(this,arguments)}function Y_(e,t){return X_.apply(this,arguments)}function X_(){return X_=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aw(t,"POST","/v1/accounts:signInWithEmailLink",ew(t,n)));case 1:case"end":return e.stop()}}),e)}))),X_.apply(this,arguments)}var J_=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Rr(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Pr(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?5:6;break;case 3:return n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},e.abrupt("return",__(t,n,"signInWithPassword",M_));case 5:return e.abrupt("return",K_(t,{email:this._email,oobCode:this._password}));case 6:Fb(t,"internal-error");case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Cr(br().mark((function e(t,n){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?5:6;break;case 3:return r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},e.abrupt("return",__(t,r,"signUpPassword",O_));case 5:return e.abrupt("return",Y_(t,{idToken:n,email:this._email,oobCode:this._password}));case 6:Fb(t,"internal-error");case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(T_);function $_(e,t){return ex.apply(this,arguments)}function ex(){return ex=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aw(t,"POST","/v1/accounts:signInWithIdp",ew(t,n)));case 1:case"end":return e.stop()}}),e)}))),ex.apply(this,arguments)}var tx=function(e){Fr(n,e);var t=Vr(n);function n(){var e;return Rr(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Pr(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return $_(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,$_(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,$_(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ri(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fb("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=wb(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(T_);function nx(e,t){return rx.apply(this,arguments)}function rx(){return rx=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tw(t,"POST","/v1/accounts:sendVerificationCode",ew(t,n)));case 1:case"end":return e.stop()}}),e)}))),rx.apply(this,arguments)}function ix(){return ix=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aw(t,"POST","/v1/accounts:signInWithPhoneNumber",ew(t,n)));case 1:case"end":return e.stop()}}),e)}))),ix.apply(this,arguments)}function ax(){return ax=Cr(br().mark((function e(t,n){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aw(t,"POST","/v1/accounts:signInWithPhoneNumber",ew(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw lw(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),ax.apply(this,arguments)}var ox=(0,Nr.Z)({},"USER_NOT_FOUND","user-not-found");function ux(){return ux=Cr(br().mark((function e(t,n){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",aw(t,"POST","/v1/accounts:signInWithPhoneNumber",ew(t,r),ox));case 2:case"end":return e.stop()}}),e)}))),ux.apply(this,arguments)}var sx=function(e){Fr(n,e);var t=Vr(n);function n(e){var r;return Rr(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Pr(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return ix.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return ax.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ux.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(T_);var cx=function(){function e(t){var n,r,i,a,o,u;Rr(this,e);var s=Ai(Oi(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);qb(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Pr(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Ai(Oi(e)).link,n=t?Ai(Oi(t)).deep_link_id:null,r=Ai(Oi(e)).deep_link_id;return(r?Ai(Oi(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(hq){return null}}}]),e}();var lx=function(){function e(){Rr(this,e),this.providerId=e.PROVIDER_ID}return Pr(e,null,[{key:"credential",value:function(e,t){return J_._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=cx.parseLink(t);return qb(n,"argument-error"),J_._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();lx.PROVIDER_ID="password",lx.EMAIL_PASSWORD_SIGN_IN_METHOD="password",lx.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var fx=function(){function e(t){Rr(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Pr(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),hx=function(e){Fr(n,e);var t=Vr(n);function n(){var e;return Rr(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Pr(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return w(this.scopes)}}]),n}(fx),dx=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return Pr(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return qb(e.idToken||e.accessToken,"argument-error"),tx._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return qb("providerId"in t&&"signInMethod"in t,"argument-error"),tx._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(hx),px=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.call(this,"facebook.com")}return Pr(n,null,[{key:"credential",value:function(e){return tx._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(hq){return null}}}]),n}(hx);px.FACEBOOK_SIGN_IN_METHOD="facebook.com",px.PROVIDER_ID="facebook.com";var vx=function(e){Fr(n,e);var t=Vr(n);function n(){var e;return Rr(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Pr(n,null,[{key:"credential",value:function(e,t){return tx._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(hq){return null}}}]),n}(hx);vx.GOOGLE_SIGN_IN_METHOD="google.com",vx.PROVIDER_ID="google.com";var mx=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.call(this,"github.com")}return Pr(n,null,[{key:"credential",value:function(e){return tx._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(hq){return null}}}]),n}(hx);mx.GITHUB_SIGN_IN_METHOD="github.com",mx.PROVIDER_ID="github.com";var yx=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i;return Rr(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Pr(n,[{key:"_getIdTokenResponse",value:function(e){return $_(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,$_(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,$_(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(T_),gx=function(e){Fr(n,e);var t=Vr(n);function n(e){return Rr(this,n),qb(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Pr(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=yx.fromJSON(e);return qb(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return yx._create(r,n)}catch(i){return null}}}]),n}(fx),kx=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.call(this,"twitter.com")}return Pr(n,null,[{key:"credential",value:function(e,t){return tx._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(hq){return null}}}]),n}(hx);function bx(e,t){return wx.apply(this,arguments)}function wx(){return wx=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aw(t,"POST","/v1/accounts:signUp",ew(t,n)));case 1:case"end":return e.stop()}}),e)}))),wx.apply(this,arguments)}kx.TWITTER_SIGN_IN_METHOD="twitter.com",kx.PROVIDER_ID="twitter.com";var _x=function(){function e(t){Rr(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Pr(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Cr(br().mark((function t(n,r,i){var a,o,u,s,c=arguments;return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Ww._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=xx(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Cr(br().mark((function t(n,r,i){var a;return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=xx(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function xx(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Sx(){return Sx=Cr(br().mark((function e(t){var n,r,i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pa(t.app)){e.next=2;break}return e.abrupt("return",Promise.reject(zb(t)));case 2:return r=p_(t),e.next=5,r._initializationPromise;case 5:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=7;break}return e.abrupt("return",new _x({user:r.currentUser,providerId:null,operationType:"signIn"}));case 7:return e.next=9,bx(r,{returnSecureToken:!0});case 9:return i=e.sent,e.next=12,_x._fromIdTokenResponse(r,"signIn",i,!0);case 12:return a=e.sent,e.next=15,r._updateCurrentUser(a.user);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Sx.apply(this,arguments)}var Ex=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i,a){var o,u;return Rr(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Lr(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Pr(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(gi);function Ix(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ex._fromErrorAndOperation(e,n,t,r);throw n}))}function Tx(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Cx(e,t){return Nx.apply(this,arguments)}function Nx(){return(Nx=Cr(br().mark((function e(t,n){var r,i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ji(t),e.next=3,Ox(!0,r,n);case 3:return e.t0=bw,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Tx(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rx(e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=Cr(br().mark((function e(t,n){var r,i,a=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Nw,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",_x._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Ax.apply(this,arguments)}function Ox(e,t,n){return Px.apply(this,arguments)}function Px(){return(Px=Cr(br().mark((function e(t,n,r){var i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dw(n);case 2:i=Tx(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",qb(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dx(e,t){return Lx.apply(this,arguments)}function Lx(){return Lx=Cr(br().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]&&c[2],!Pa((i=t.auth).app)){e.next=4;break}return e.abrupt("return",Promise.reject(zb(i)));case 4:return a="reauthenticate",e.prev=5,e.next=8,Nw(t,Ix(i,a,n,t),r);case 8:return qb((o=e.sent).idToken,i,"internal-error"),qb(u=Tw(o.idToken),i,"internal-error"),s=u.sub,qb(t.uid===s,i,"user-mismatch"),e.abrupt("return",_x._forOperation(t,a,o));case 17:throw e.prev=17,e.t0=e.catch(5),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Fb(i,"user-mismatch"),e.t0;case 21:case"end":return e.stop()}}),e,null,[[5,17]])}))),Lx.apply(this,arguments)}function Mx(e,t){return Fx.apply(this,arguments)}function Fx(){return Fx=Cr(br().mark((function e(t,n){var r,i,a,o,u=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]&&u[2],!Pa(t.app)){e.next=3;break}return e.abrupt("return",Promise.reject(zb(t)));case 3:return i="signIn",e.next=6,Ix(t,i,n);case 6:return a=e.sent,e.next=9,_x._fromIdTokenResponse(t,i,a);case 9:if(o=e.sent,r){e.next=13;break}return e.next=13,t._updateCurrentUser(o.user);case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)}))),Fx.apply(this,arguments)}function Ux(e,t){return jx.apply(this,arguments)}function jx(){return jx=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mx(p_(t),n));case 1:case"end":return e.stop()}}),e)}))),jx.apply(this,arguments)}function zx(e,t){return Vx.apply(this,arguments)}function Vx(){return(Vx=Cr(br().mark((function e(t,n){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ji(t),e.next=3,Ox(!1,r,n.providerId);case 3:return e.abrupt("return",Rx(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bx(e,t){return qx.apply(this,arguments)}function qx(){return(qx=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dx(ji(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hx(e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aw(t,"POST","/v1/accounts:signInWithCustomToken",ew(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wx.apply(this,arguments)}function Gx(){return Gx=Cr(br().mark((function e(t,n){var r,i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pa(t.app)){e.next=2;break}return e.abrupt("return",Promise.reject(zb(t)));case 2:return r=p_(t),e.next=5,Hx(r,{token:n,returnSecureToken:!0});case 5:return i=e.sent,e.next=8,_x._fromIdTokenResponse(r,"signIn",i);case 8:return a=e.sent,e.next=11,r._updateCurrentUser(a.user);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)}))),Gx.apply(this,arguments)}var Zx=function(){function e(t,n){Rr(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Pr(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Kx._fromServerResponse(e,t):"totpInfo"in t?Qx._fromServerResponse(e,t):Fb(e,"internal-error")}}]),e}(),Kx=function(e){Fr(n,e);var t=Vr(n);function n(e){var r;return Rr(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Pr(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Zx),Qx=function(e){Fr(n,e);var t=Vr(n);function n(e){return Rr(this,n),t.call(this,"totp",e)}return Pr(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Zx);function Yx(e,t,n){var r;qb((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),qb("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(qb(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(qb(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Xx(e){return Jx.apply(this,arguments)}function Jx(){return Jx=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=p_(t))._getPasswordPolicyInternal()){e.next=4;break}return e.next=4,n._updatePasswordPolicy();case 4:case"end":return e.stop()}}),e)}))),Jx.apply(this,arguments)}function $x(){return $x=Cr(br().mark((function e(t,n,r){var i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=p_(t),a={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},r&&Yx(i,a,r),e.next=5,__(i,a,"getOobCode",B_);case 5:case"end":return e.stop()}}),e)}))),$x.apply(this,arguments)}function eS(){return eS=Cr(br().mark((function e(t,n,r){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C_(ji(t),{oobCode:n,newPassword:r}).catch(function(){var e=Cr(br().mark((function e(n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&Xx(t),n;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),eS.apply(this,arguments)}function tS(){return tS=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D_(ji(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),tS.apply(this,arguments)}function nS(e,t){return rS.apply(this,arguments)}function rS(){return rS=Cr(br().mark((function e(t,n){var r,i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ji(t),e.next=3,C_(r,{oobCode:n});case 3:i=e.sent,qb(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return qb(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:qb(i.mfaInfo,r,"internal-error");case 13:qb(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Zx._fromServerResponse(p_(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),rS.apply(this,arguments)}function iS(){return iS=Cr(br().mark((function e(t,n){var r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nS(ji(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),iS.apply(this,arguments)}function aS(e,t,n){return oS.apply(this,arguments)}function oS(){return oS=Cr(br().mark((function e(t,n,r){var i,a,o,u;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pa(t.app)){e.next=2;break}return e.abrupt("return",Promise.reject(zb(t)));case 2:return i=p_(t),a=__(i,{returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bx),e.next=7,a.catch((function(e){throw e.code==="auth/".concat("password-does-not-meet-requirements")&&Xx(t),e}));case 7:return o=e.sent,e.next=10,_x._fromIdTokenResponse(i,"signIn",o);case 10:return u=e.sent,e.next=13,i._updateCurrentUser(u.user);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),oS.apply(this,arguments)}function uS(){return uS=Cr(br().mark((function e(t,n,r){var i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e,t){qb(t.handleCodeInApp,i,"argument-error"),t&&Yx(i,e,t)},i=p_(t),o(a={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},r),e.next=6,__(i,a,"getOobCode",H_);case 6:case"end":return e.stop()}}),e)}))),uS.apply(this,arguments)}function sS(){return sS=Cr(br().mark((function e(t,n,r){var i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pa(t.app)){e.next=2;break}return e.abrupt("return",Promise.reject(zb(t)));case 2:return i=ji(t),qb((a=lx.credentialWithLink(n,r||Gb()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ux(i,a));case 6:case"end":return e.stop()}}),e)}))),sS.apply(this,arguments)}function cS(e,t){return lS.apply(this,arguments)}function lS(){return lS=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tw(t,"POST","/v1/accounts:createAuthUri",ew(t,n)));case 1:case"end":return e.stop()}}),e)}))),lS.apply(this,arguments)}function fS(){return fS=Cr(br().mark((function e(t,n){var r,i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zb()?Gb():"http://localhost",i={identifier:n,continueUri:r},e.next=4,cS(ji(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),fS.apply(this,arguments)}function hS(){return(hS=Cr(br().mark((function e(t,n){var r,i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ji(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Yx(r.auth,a,n),e.next=8,z_(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dS(){return(dS=Cr(br().mark((function e(t,n,r){var i,a,o,u;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ji(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Yx(i.auth,o,r),e.next=8,G_(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pS(e,t){return vS.apply(this,arguments)}function vS(){return vS=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tw(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),vS.apply(this,arguments)}function mS(){return(mS=Cr(br().mark((function e(t,n){var r,i,a,o,u,s,c;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ji(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Nw(a,pS(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yS(e,t,n){return gS.apply(this,arguments)}function gS(){return gS=Cr(br().mark((function e(t,n,r){var i,a,o,u;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Nw(t,R_(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),gS.apply(this,arguments)}var kS=Pr((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Rr(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),bS=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i,a){var o;return Rr(this,n),(o=t.call(this,e,r,i)).username=a,o}return Pr(n)}(kS),wS=function(e){Fr(n,e);var t=Vr(n);function n(e,r){return Rr(this,n),t.call(this,e,"facebook.com",r)}return Pr(n)}(kS),_S=function(e){Fr(n,e);var t=Vr(n);function n(e,r){return Rr(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Pr(n)}(bS),xS=function(e){Fr(n,e);var t=Vr(n);function n(e,r){return Rr(this,n),t.call(this,e,"google.com",r)}return Pr(n)}(kS),SS=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i){return Rr(this,n),t.call(this,e,"twitter.com",r,i)}return Pr(n)}(bS);function ES(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Tw(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new kS(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new wS(a,i);case"github.com":return new _S(a,i);case"google.com":return new xS(a,i);case"twitter.com":return new SS(a,i,e.screenName||null);case"custom":case"anonymous":return new kS(a,null);default:return new kS(a,r,i)}}(n)}var IS=function(){function e(t,n,r){Rr(this,e),this.type=t,this.credential=n,this.user=r}return Pr(e,[{key:"toJSON",value:function(){var e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:(0,Nr.Z)({},e,this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),TS=function(){function e(t,n,r){Rr(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Pr(e,[{key:"resolveSignIn",value:function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=p_(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Zx._fromServerResponse(r,e)}));qb(i.mfaPendingCredential,r,"internal-error");var o=IS._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Cr(br().mark((function e(t){var a,u,s;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,_x._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return qb(n.user,r,"internal-error"),e.abrupt("return",_x._forOperation(n.user,n.operationType,u));case 17:Fb(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function CS(e,t){return tw(e,"POST","/v2/accounts/mfaEnrollment:start",ew(e,t))}function NS(e,t){return tw(e,"POST","/v2/accounts/mfaEnrollment:start",ew(e,t))}function RS(e,t){return tw(e,"POST","/v2/accounts/mfaEnrollment:finalize",ew(e,t))}function AS(e,t){return tw(e,"POST","/v2/accounts/mfaEnrollment:withdraw",ew(e,t))}var OS=function(){function e(t){var n=this;Rr(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Zx._fromServerResponse(t.auth,e)})))}))}return Pr(e,[{key:"getSession",value:function(){var e=Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=IS,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Cr(br().mark((function e(t,n){var r,i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Nw(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Cr(br().mark((function e(t){var n,r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,Nw(this.user,AS(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),PS=new WeakMap;var DS="__sak",LS=function(){function e(t,n){Rr(this,e),this.storageRetriever=t,this.type=n}return Pr(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(DS,"1"),this.storage.removeItem(DS),Promise.resolve(!0)):Promise.resolve(!1)}catch(hq){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}(),MS=function(e){Fr(n,e);var t=Vr(n);function n(){var e;return Rr(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.fallbackToPolling=u_(),e._shouldAllowMigration=!0,e}return Pr(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;n?this.detachListener():this.stopPolling();var i=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},a=this.storage.getItem(r);pi()&&10===document.documentMode&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Cr(br().mark((function e(t,r){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wo(Ur(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Cr(br().mark((function e(t){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wo(Ur(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wo(Ur(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(LS);MS.type="LOCAL";var FS=MS,US=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Pr(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(LS);US.type="SESSION";var jS=US;function zS(e){return Promise.all(e.map(function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var VS=function(){function e(t){Rr(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Pr(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Cr(br().mark((function e(t){var n,r,i,a,o,u,s,c;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,zS(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function BS(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}VS.receivers=[];var qS=function(){function e(t){Rr(this,e),this.target=t,this.handlers=new Set}return Pr(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Cr(br().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=BS("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function HS(){return window}function WS(e){HS().location.href=e}function GS(){return"undefined"!==typeof HS().WorkerGlobalScope&&"function"===typeof HS().importScripts}function ZS(){return KS.apply(this,arguments)}function KS(){return(KS=Cr(br().mark((function e(){var t;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function QS(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var YS="firebaseLocalStorageDb",XS="firebaseLocalStorage",JS="fbase_key",$S=function(){function e(t){Rr(this,e),this.request=t}return Pr(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function eE(e,t){return e.transaction([XS],t?"readwrite":"readonly").objectStore(XS)}function tE(){var e=indexedDB.deleteDatabase(YS);return new $S(e).toPromise()}function nE(){var e=indexedDB.open(YS,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(XS,{keyPath:JS})}catch(r){n(r)}})),e.addEventListener("success",Cr(br().mark((function n(){var r;return br().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(XS)){n.next=12;break}return r.close(),n.next=5,tE();case 5:return n.t0=t,n.next=8,nE();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function rE(e,t,n){return iE.apply(this,arguments)}function iE(){return(iE=Cr(br().mark((function e(t,n,r){var i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=eE(t,!0).put((i={},(0,Nr.Z)(i,JS,n),(0,Nr.Z)(i,"value",r),i)),e.abrupt("return",new $S(a).toPromise());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aE(e,t){return oE.apply(this,arguments)}function oE(){return(oE=Cr(br().mark((function e(t,n){var r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eE(t,!1).get(n),e.next=3,new $S(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uE(e,t){var n=eE(e,!0).delete(t);return new $S(n).toPromise()}var sE=function(){function e(){Rr(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Pr(e,[{key:"_openDb",value:function(){var e=Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,nE();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Cr(br().mark((function e(t){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",GS()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Cr(br().mark((function e(){var t=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=VS._getInstance(GS()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Cr(br().mark((function e(n,r){var i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Cr(br().mark((function e(){var t,n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZS();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new qS(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&QS()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Cr(br().mark((function e(){var t;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,nE();case 5:return t=e.sent,e.next=8,rE(t,DS,"1");case 8:return e.next=10,uE(t,DS);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Cr(br().mark((function e(t,n){var r=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return rE(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return aE(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Cr(br().mark((function e(t){var n=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return uE(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Cr(br().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=eE(e,!1).getAll();return new $S(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:if(n=[],r=new Set,0!==t.length){i=Dr(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Cr(br().mark((function t(){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();sE.type="LOCAL";var cE=sE;function lE(e,t){return tw(e,"POST","/v2/accounts/mfaSignIn:start",ew(e,t))}function fE(e,t){return tw(e,"POST","/v2/accounts/mfaSignIn:finalize",ew(e,t))}var hE=1e12,dE=function(){function e(t){Rr(this,e),this.auth=t,this.counter=hE,this._widgets=new Map}return Pr(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new pE(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||hE;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||hE;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Cr(br().mark((function e(t){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||hE,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),pE=function(){function e(t,n,r){var i=this;Rr(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;qb(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Pr(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var vE=g_("rcb"),mE=new Qb(3e4,6e4),yE=function(){function e(){var t;Rr(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=HS().grecaptcha)||void 0===t?void 0:t.render)}return Pr(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return qb(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&fw(HS().grecaptcha)?Promise.resolve(HS().grecaptcha):new Promise((function(r,i){var a=HS().setTimeout((function(){i(Ub(e,"network-request-failed"))}),mE.get());HS()[vE]=function(){HS().clearTimeout(a),delete HS()[vE];var o=HS().grecaptcha;if(o&&fw(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Ub(e,"internal-error"))},y_("".concat(m_.recaptchaV2Script,"?").concat(Ri({onload:vE,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Ub(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=HS().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var gE=function(){function e(){Rr(this,e)}return Pr(e,[{key:"load",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new dE(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),kE="recaptcha",bE={theme:"light",type:"image"},wE=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},bE);Rr(this,e),this.parameters=r,this.type=kE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=p_(t),this.isInvisible="invisible"===this.parameters.size,qb("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof n?document.getElementById(n):n;qb(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gE:new yE,this.validateStartingState()}return Pr(e,[{key:"verify",value:function(){var e=Cr(br().mark((function e(){var t,n,r,i=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){qb(!this.parameters.sitekey,this.auth,"argument-error"),qb(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),qb("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=HS()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){qb(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Cr(br().mark((function e(){var t,n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Cr(br().mark((function e(){var t;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qb(Zb()&&!GS(),this.auth,"internal-error"),e.next=3,_E();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,pw(this.auth);case 8:qb(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return qb(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function _E(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var xE=function(){function e(t,n){Rr(this,e),this.verificationId=t,this.onConfirmation=n}return Pr(e,[{key:"confirm",value:function(e){var t=sx._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function SE(){return SE=Cr(br().mark((function e(t,n,r){var i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pa(t.app)){e.next=2;break}return e.abrupt("return",Promise.reject(zb(t)));case 2:return i=p_(t),e.next=5,CE(i,n,ji(r));case 5:return a=e.sent,e.abrupt("return",new xE(a,(function(e){return Ux(i,e)})));case 7:case"end":return e.stop()}}),e)}))),SE.apply(this,arguments)}function EE(e,t,n){return IE.apply(this,arguments)}function IE(){return(IE=Cr(br().mark((function e(t,n,r){var i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ji(t),e.next=3,Ox(!1,i,"phone");case 3:return e.next=5,CE(i.auth,n,ji(r));case 5:return a=e.sent,e.abrupt("return",new xE(a,(function(e){return zx(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function TE(){return(TE=Cr(br().mark((function e(t,n,r){var i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pa((i=ji(t)).auth.app)){e.next=3;break}return e.abrupt("return",Promise.reject(zb(i.auth)));case 3:return e.next=5,CE(i.auth,n,ji(r));case 5:return a=e.sent,e.abrupt("return",new xE(a,(function(e){return Bx(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CE(e,t,n){return NE.apply(this,arguments)}function NE(){return NE=Cr(br().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,qb("string"===typeof a,t,"argument-error"),qb(r.type===kE,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return qb("enroll"===u.type,t,"internal-error"),e.next=13,CS(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return qb("signin"===u.type,t,"internal-error"),qb(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,lE(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,nx(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),NE.apply(this,arguments)}function RE(){return(RE=Cr(br().mark((function e(t,n){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pa((r=ji(t)).auth.app)){e.next=3;break}return e.abrupt("return",Promise.reject(zb(r.auth)));case 3:return e.next=5,Rx(r,n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var AE=function(){function e(t){Rr(this,e),this.providerId=e.PROVIDER_ID,this.auth=p_(t)}return Pr(e,[{key:"verifyPhoneNumber",value:function(e,t){return CE(this.auth,e,ji(t))}}],[{key:"credential",value:function(e,t){return sx._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?sx._fromTokenResponse(n,r):null}}]),e}();function OE(e,t){return t?Zw(t):(qb(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}AE.PROVIDER_ID="phone",AE.PHONE_SIGN_IN_METHOD="phone";var PE=function(e){Fr(n,e);var t=Vr(n);function n(e){var r;return Rr(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Pr(n,[{key:"_getIdTokenResponse",value:function(e){return $_(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return $_(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return $_(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(T_);function DE(e){return Mx(e.auth,new PE(e),e.bypassAuthState)}function LE(e){var t=e.auth,n=e.user;return qb(n,t,"internal-error"),Dx(n,new PE(e),e.bypassAuthState)}function ME(e){return FE.apply(this,arguments)}function FE(){return FE=Cr(br().mark((function e(t){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,qb(r=t.user,n,"internal-error"),e.abrupt("return",Rx(r,new PE(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),FE.apply(this,arguments)}var UE=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Rr(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Pr(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Cr(br().mark((function t(n,r){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Cr(br().mark((function e(t){var n,r,i,a,o,u,s;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DE;case"linkViaPopup":case"linkViaRedirect":return ME;case"reauthViaPopup":case"reauthViaRedirect":return LE;default:Fb(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Wb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Wb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),jE=new Qb(2e3,1e4);function zE(e,t,n){return VE.apply(this,arguments)}function VE(){return VE=Cr(br().mark((function e(t,n,r){var i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pa(t.app)){e.next=2;break}return e.abrupt("return",Promise.reject(Ub(t,"operation-not-supported-in-this-environment")));case 2:return i=p_(t),Vb(t,n,fx),a=OE(i,r),o=new WE(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 7:case"end":return e.stop()}}),e)}))),VE.apply(this,arguments)}function BE(){return(BE=Cr(br().mark((function e(t,n,r){var i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pa((i=ji(t)).auth.app)){e.next=3;break}return e.abrupt("return",Promise.reject(Ub(i.auth,"operation-not-supported-in-this-environment")));case 3:return Vb(i.auth,n,fx),a=OE(i.auth,r),o=new WE(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qE(e,t,n){return HE.apply(this,arguments)}function HE(){return(HE=Cr(br().mark((function e(t,n,r){var i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vb((i=ji(t)).auth,n,fx),a=OE(i.auth,r),o=new WE(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var WE=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i,a,o){var u;return Rr(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Lr(u),u}return Pr(n,[{key:"executeNotNull",value:function(){var e=Cr(br().mark((function e(){var t;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return qb(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Cr(br().mark((function e(){var t,n=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wb(1===this.filter.length,"Popup operations only handle one event"),t=BS(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Ub(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Ub(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Ub(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,jE.get())}()}}]),n}(UE);WE.currentPopupAction=null;var GE="pendingRedirect",ZE=new Map,KE=function(e){Fr(n,e);var t=Vr(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Rr(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Pr(n,[{key:"execute",value:function(){var e=Cr(br().mark((function e(){var t,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ZE.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,QE(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,wo(Ur(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:ZE.set(this.auth._key(),t);case 21:return this.bypassAuthState||ZE.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Cr(br().mark((function e(t){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",wo(Ur(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",wo(Ur(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(UE);function QE(e,t){return YE.apply(this,arguments)}function YE(){return YE=Cr(br().mark((function e(t,n){var r,i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=tI(n),i=eI(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),YE.apply(this,arguments)}function XE(e,t){return JE.apply(this,arguments)}function JE(){return JE=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eI(t)._set(tI(n),"true"));case 1:case"end":return e.stop()}}),e)}))),JE.apply(this,arguments)}function $E(e,t){ZE.set(e._key(),t)}function eI(e){return Zw(e._redirectPersistence)}function tI(e){return Yw(GE,e.config.apiKey,e.name)}function nI(e,t,n){return function(e,t,n){return rI.apply(this,arguments)}(e,t,n)}function rI(){return rI=Cr(br().mark((function e(t,n,r){var i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pa(t.app)){e.next=2;break}return e.abrupt("return",Promise.reject(zb(t)));case 2:return i=p_(t),Vb(t,n,fx),e.next=6,i._initializationPromise;case 6:return a=OE(i,r),e.next=9,XE(a,i);case 9:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 10:case"end":return e.stop()}}),e)}))),rI.apply(this,arguments)}function iI(e,t,n){return function(e,t,n){return aI.apply(this,arguments)}(e,t,n)}function aI(){return(aI=Cr(br().mark((function e(t,n,r){var i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vb((i=ji(t)).auth,n,fx),!Pa(i.auth.app)){e.next=4;break}return e.abrupt("return",Promise.reject(zb(i.auth)));case 4:return e.next=6,i.auth._initializationPromise;case 6:return a=OE(i.auth,r),e.next=9,XE(a,i.auth);case 9:return e.next=11,hI(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oI(e,t,n){return function(e,t,n){return uI.apply(this,arguments)}(e,t,n)}function uI(){return(uI=Cr(br().mark((function e(t,n,r){var i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vb((i=ji(t)).auth,n,fx),e.next=4,i.auth._initializationPromise;case 4:return a=OE(i.auth,r),e.next=7,Ox(!1,i,n.providerId);case 7:return e.next=9,XE(a,i.auth);case 9:return e.next=11,hI(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sI(e,t){return cI.apply(this,arguments)}function cI(){return cI=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p_(t)._initializationPromise;case 2:return e.abrupt("return",lI(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),cI.apply(this,arguments)}function lI(e,t){return fI.apply(this,arguments)}function fI(){return fI=Cr(br().mark((function e(t,n){var r,i,a,o,u,s=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]&&s[2],!Pa(t.app)){e.next=3;break}return e.abrupt("return",Promise.reject(zb(t)));case 3:return i=p_(t),a=OE(i,n),o=new KE(i,a,r),e.next=8,o.execute();case 8:if(!(u=e.sent)||r){e.next=15;break}return delete u.user._redirectEventId,e.next=13,i._persistUserIfCurrent(u.user);case 13:return e.next=15,i._setRedirectUser(null,n);case 15:return e.abrupt("return",u);case 16:case"end":return e.stop()}}),e)}))),fI.apply(this,arguments)}function hI(e){return dI.apply(this,arguments)}function dI(){return(dI=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=BS("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pI=function(){function e(t){Rr(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Pr(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mI(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!mI(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ub(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(vI(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(vI(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function vI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function mI(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function yI(e){return gI.apply(this,arguments)}function gI(){return gI=Cr(br().mark((function e(t){var n,r=arguments;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",tw(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),gI.apply(this,arguments)}var kI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bI=/^https?/;function wI(){return wI=Cr(br().mark((function e(t){var n,r,i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,yI(t);case 4:n=e.sent,r=n.authorizedDomains,i=Dr(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!_I(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Fb(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),wI.apply(this,arguments)}function _I(e){var t=Gb(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!bI.test(r))return!1;if(kI.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var xI=new Qb(3e4,6e4);function SI(){var e=HS().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=w(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}function EI(e){return new Promise((function(t,n){var r,i,a;function o(){SI(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){SI(),n(Ub(e,"network-request-failed"))},timeout:xI.get()})}if(null===(i=null===(r=HS().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=HS().gapi)||void 0===a?void 0:a.load)){var u=g_("iframefcb");return HS()[u]=function(){gapi.load?o():n(Ub(e,"network-request-failed"))},y_("".concat(m_.gapiScript,"?onload=").concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw II=null,e}))}var II=null;function TI(e){return II=II||EI(e)}var CI=new Qb(5e3,15e3),NI="__/auth/iframe",RI="emulator/auth/iframe",AI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PI(e){var t=e.config;qb(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Yb(t,RI):"https://".concat(e.config.authDomain,"/").concat(NI),r={apiKey:t.apiKey,appName:e.name,v:ja},i=OI.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ri(r).slice(1))}function DI(e){return LI.apply(this,arguments)}function LI(){return LI=Cr(br().mark((function e(t){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TI(t);case 2:return n=e.sent,qb(r=HS().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:PI(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AI,dontclear:!0},(function(e){return new Promise(function(){var n=Cr(br().mark((function n(r,i){var a,o,u;return br().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){HS().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Ub(t,"network-request-failed"),o=HS().setTimeout((function(){i(a)}),CI.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),LI.apply(this,arguments)}var MI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FI=function(){function e(t){Rr(this,e),this.window=t,this.associatedEvent=null}return Pr(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function UI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},MI),{width:r.toString(),height:i.toString(),top:a,left:o}),c=si().toLowerCase();n&&(u=t_(c)?"_blank":n),$w(c)&&(t=t||"http://localhost",s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=k(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return o_(arguments.length>0&&void 0!==arguments[0]?arguments[0]:si())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new FI(null);var f=window.open(t||"",u,l);qb(f,e,"popup-blocked");try{f.focus()}catch(h){}return new FI(f)}var jI="__/auth/handler",zI="emulator/auth/handler",VI=encodeURIComponent("fac");function BI(e,t,n,r,i,a){return qI.apply(this,arguments)}function qI(){return qI=Cr(br().mark((function e(t,n,r,i,a,o){var u,s,c,l,f,h,d,p,v,m,y,g,b;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qb(t.config.authDomain,t,"auth-domain-config-required"),qb(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:ja,eventId:a},n instanceof fx)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",Ii(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),s=0,c=Object.entries(o||{});s<c.length;s++)l=k(c[s],2),f=l[0],h=l[1],u[f]=h;for(n instanceof hx&&(d=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=d.join(",")),t.tenantId&&(u.tid=t.tenantId),p=u,v=0,m=Object.keys(p);v<m.length;v++)y=m[v],void 0===p[y]&&delete p[y];return e.next=10,t._getAppCheckToken();case 10:return g=e.sent,b=g?"#".concat(VI,"=").concat(encodeURIComponent(g)):"",e.abrupt("return","".concat(HI(t),"?").concat(Ri(p).slice(1)).concat(b));case 13:case"end":return e.stop()}}),e)}))),qI.apply(this,arguments)}function HI(e){var t=e.config;return t.emulator?Yb(t,zI):"https://".concat(t.authDomain,"/").concat(jI)}var WI="webStorageSupport",GI=function(){function e(){Rr(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jS,this._completeRedirectFn=lI,this._overrideRedirectResult=$E}return Pr(e,[{key:"_openPopup",value:function(){var e=Cr(br().mark((function e(t,n,r,i){var a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wb(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,BI(t,n,r,Gb(),i);case 3:return o=e.sent,e.abrupt("return",UI(t,o,BS()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Cr(br().mark((function e(t,n,r,i){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,BI(t,n,r,Gb(),i);case 4:return WS(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Wb(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Cr(br().mark((function e(t){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,DI(t);case 2:return n=e.sent,r=new pI(t),n.register("authEvent",(function(e){return qb(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(WI,{type:WI},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[WI];void 0!==i&&t(!!i),Fb(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return wI.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return u_()||e_()||o_()}}]),e}(),ZI=GI,KI=function(){function e(t){Rr(this,e),this.factorId=t}return Pr(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Hb("unexpected MultiFactorSessionType")}}}]),e}(),QI=function(e){Fr(n,e);var t=Vr(n);function n(e){var r;return Rr(this,n),(r=t.call(this,"phone")).credential=e,r}return Pr(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return tw(e,"POST","/v2/accounts/mfaEnrollment:finalize",ew(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return tw(e,"POST","/v2/accounts/mfaSignIn:finalize",ew(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(KI),YI=function(){function e(){Rr(this,e)}return Pr(e,null,[{key:"assertion",value:function(e){return QI._fromCredential(e)}}]),e}();YI.FACTOR_ID="phone";var XI=function(){function e(){Rr(this,e)}return Pr(e,null,[{key:"assertionForEnrollment",value:function(e,t){return JI._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return JI._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=Cr(br().mark((function e(t){var n,r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qb("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,NS(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});case 4:return i=e.sent,e.abrupt("return",$I._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();XI.FACTOR_ID="totp";var JI=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i){var a;return Rr(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return Pr(n,[{key:"_finalizeEnroll",value:function(){var e=Cr(br().mark((function e(t,n,r){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qb("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",RS(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=Cr(br().mark((function e(t,n){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qb(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",fE(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(KI),$I=function(){function e(t,n,r,i,a,o,u){Rr(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return Pr(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(eT(e)||eT(t))&&(r=!0),r&&(eT(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),eT(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function eT(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var tT="@firebase/auth",nT="1.7.9",rT=function(){function e(t){Rr(this,e),this.auth=t,this.internalListeners=new Map}return Pr(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){qb(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var iT,aT;!function(e){var t;null===(t=ri())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function oT(){return window}iT={loadJS:function(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Ub("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},m_=iT,aT="Browser",Na(new zi("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;qb(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:aT,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:s_(aT)},l=new d_(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zw);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Na(new zi("auth-internal",(function(e){return function(e){return new rT(e)}(p_(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ga(tT,nT,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(aT)),Ga(tT,nT,"esm2017");var uT=2e3;function sT(e,t,n){return cT.apply(this,arguments)}function cT(){return cT=Cr(br().mark((function e(t,n,r){var i,a,o,u,s;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=oT(),o=a.BuildInfo,Wb(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,vT(n.sessionId);case 4:return u=e.sent,s={},o_()?s.ibi=o.packageName:r_()?s.apn=o.packageName:Fb(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",BI(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),cT.apply(this,arguments)}function lT(){return lT=Cr(br().mark((function e(t){var n,r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oT(),r=n.BuildInfo,i={},o_()?i.iosBundleId=r.packageName:r_()?i.androidPackageName=r.packageName:Fb(t,"operation-not-supported-in-this-environment"),e.next=5,yI(t,i);case 5:case"end":return e.stop()}}),e)}))),lT.apply(this,arguments)}function fT(e){var t=oT().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function hT(e,t,n){return dT.apply(this,arguments)}function dT(){return dT=Cr(br().mark((function e(t,n,r){var i,a,o;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=oT(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Ub(t,"redirect-cancelled-by-user"))}),uT))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),r_()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),dT.apply(this,arguments)}function pT(e){var t,n,r,i,a,o,u,s,c,l,f=oT();qb("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),qb("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),qb("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),qb("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),qb("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function vT(e){return mT.apply(this,arguments)}function mT(){return(mT=Cr(br().mark((function e(t){var n,r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=yT(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yT(e){if(Wb(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var gT=20,kT=function(e){Fr(n,e);var t=Vr(n);function n(){var e;return Rr(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInitialized=t})),e}return Pr(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInitialized(),this.passiveListeners.forEach((function(t){return t(e)})),wo(Ur(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(pI);function bT(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:ET(),postBody:null,tenantId:e.tenantId,error:Ub(e,"no-auth-event")}}function wT(e,t){return IT()._set(TT(e),t)}function _T(e){return xT.apply(this,arguments)}function xT(){return xT=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,IT()._get(TT(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,IT()._remove(TT(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),xT.apply(this,arguments)}function ST(e,t){var n,r,i=function(e){var t=CT(e),n=t.link?decodeURIComponent(t.link):void 0,r=CT(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return CT(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=CT(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Ub(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function ET(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<gT;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function IT(){return Zw(FS)}function TT(e){return Yw("authEvent",e.config.apiKey,e.name)}function CT(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=bb(e.split("?"));t[0];return Ai(t.slice(1).join("?"))}var NT=function(){function e(){Rr(this,e),this._redirectPersistence=jS,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=lI,this._overrideRedirectResult=$E}return Pr(e,[{key:"_initialize",value:function(){var e=Cr(br().mark((function e(t){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new kT(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Fb(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Cr(br().mark((function e(t,n,r,i){var a,o,u,s;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pT(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),ZE.clear(),e.next=10,this._originValidation(t);case 10:return o=bT(t,r,i),e.next=13,wT(t,o);case 13:return e.next=15,sT(t,o,n);case 15:return u=e.sent,e.next=18,fT(u);case 18:return s=e.sent,e.abrupt("return",hT(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return lT.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=oT(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Cr(br().mark((function n(){return br().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_T(e);case 2:t.onEvent(AT());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Cr(br().mark((function n(r){var i,a;return br().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,_T(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=ST(i,r.url)),t.onEvent(a||AT());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");oT().handleOpenURL=function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),RT=NT;function AT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ub("no-auth-event")}}var OT=1e3;function PT(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function DT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si();return!("file:"!==PT()&&"ionic:"!==PT()&&"capacitor:"!==PT()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function LT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si();return pi()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si();return/Edge\/\d+/.test(e)}(e)}function MT(){try{var e=self.localStorage,t=BS();if(e)return e.setItem(t,"1"),e.removeItem(t),!LT()||yi()}catch(n){return FT()&&yi()}return!1}function FT(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function UT(){return("http:"===PT()||"https:"===PT()||hi()||DT())&&!(di()||li())&&MT()&&!FT()}function jT(){return DT()&&"undefined"!==typeof document}function zT(){return VT.apply(this,arguments)}function VT(){return(VT=Cr(br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(jT()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),OT);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var BT={LOCAL:"local",NONE:"none",SESSION:"session"},qT=qb,HT="persistence";function WT(e,t){qT(Object.values(BT).includes(t),e,"invalid-persistence-type"),di()?qT(t!==BT.SESSION,e,"unsupported-persistence-type"):li()?qT(t===BT.NONE,e,"unsupported-persistence-type"):FT()?qT(t===BT.NONE||t===BT.LOCAL&&yi(),e,"unsupported-persistence-type"):qT(t===BT.NONE||MT(),e,"unsupported-persistence-type")}function GT(e){return ZT.apply(this,arguments)}function ZT(){return ZT=Cr(br().mark((function e(t){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=KT(),r=Yw(HT,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),ZT.apply(this,arguments)}function KT(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var QT=qb,YT=function(){function e(){Rr(this,e),this.browserResolver=Zw(ZI),this.cordovaResolver=Zw(RT),this.underlyingResolver=null,this._redirectPersistence=jS,this._completeRedirectFn=lI,this._overrideRedirectResult=$E}return Pr(e,[{key:"_initialize",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Cr(br().mark((function e(t,n,r,i){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Cr(br().mark((function e(t,n,r,i){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return jT()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return QT(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Cr(br().mark((function e(){var t;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,zT();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function XT(e){return e.unwrap()}function JT(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new rC(e,function(e,t){var n,r=ji(e),i=t;return qb(t.customData.operationType,r,"argument-error"),qb(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),TS._fromError(r,i)}(e,t));else if(r){var i=$T(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function $T(e){var t=(e instanceof gi?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof gi)&&"temporaryProof"in t&&"phoneNumber"in t)return AE.credentialFromResult(e);var n,r=t.providerId;if(!r||r===xb.PASSWORD)return null;switch(r){case xb.GOOGLE:n=vx;break;case xb.FACEBOOK:n=px;break;case xb.GITHUB:n=mx;break;case xb.TWITTER:n=kx;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?yx._create(r,u):tx._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new dx(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof gi?n.credentialFromError(e):n.credentialFromResult(e)}function eC(e,t){return t.catch((function(t){throw t instanceof gi&&JT(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,$T(t)),additionalUserInfo:ES(e),user:iC.getOrCreate(r)}}))}function tC(e,t){return nC.apply(this,arguments)}function nC(){return nC=Cr(br().mark((function e(t,n){var r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return eC(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),nC.apply(this,arguments)}var rC=function(){function e(t,n){Rr(this,e),this.resolver=n,this.auth=function(e){return e.wrapped()}(t)}return Pr(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return eC(XT(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),iC=function(){function e(t){Rr(this,e),this._delegate=t,this.multiFactor=function(e){var t=ji(e);return PS.has(t)||PS.set(t,OS._fromUser(t)),PS.get(t)}(t)}return Pr(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eC(this.auth,zx(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tC(this.auth,EE(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eC(this.auth,qE(this._delegate,t,YT)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GT(p_(this.auth));case 2:return e.abrupt("return",oI(this._delegate,t,YT));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eC(this.auth,Bx(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return tC(this.auth,function(e,t,n){return TE.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return eC(this.auth,function(e,t,n){return BE.apply(this,arguments)}(this._delegate,e,YT))}},{key:"reauthenticateWithRedirect",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GT(p_(this.auth));case 2:return e.abrupt("return",iI(this._delegate,t,YT));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return hS.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cx(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){var n=ji(e);return Pa(n.auth.app)?Promise.reject(zb(n.auth)):yS(n,t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return yS(ji(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return RE.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return mS.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return dS.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();iC.USER_MAP=new WeakMap;var aC=qb,oC=function(){function e(t,n){if(Rr(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;aC(r,"invalid-api-key",{appName:t.name}),aC(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?YT:void 0;this._delegate=n.initialize({options:{persistence:sC(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Ab),this.linkUnderlyingAuth()}return Pr(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?iC.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){S_(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return tS.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return nS(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return eS.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Cr(br().mark((function e(t,n){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eC(this._delegate,aS(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return fS.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=cx.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Cr(br().mark((function e(){var t;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return aC(UT(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,sI(this._delegate,YT);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",eC(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){p_(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=uC(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=uC(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return uS.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return $x.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Cr(br().mark((function e(t){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:WT(this._delegate,t),e.t0=t,e.next=e.t0===BT.SESSION?4:e.t0===BT.LOCAL?6:e.t0===BT.NONE?11:13;break;case 4:return n=jS,e.abrupt("break",14);case 6:return e.next=8,Zw(cE)._isAvailable();case 8:return r=e.sent,n=r?cE:FS,e.abrupt("break",14);case 11:return n=Qw,e.abrupt("break",14);case 13:return e.abrupt("return",Fb("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return eC(this._delegate,function(e){return Sx.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return eC(this._delegate,Ux(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return eC(this._delegate,function(e,t){return Gx.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return eC(this._delegate,function(e,t,n){return Pa(e.app)?Promise.reject(zb(e)):Ux(ji(e),lx.credential(t,n)).catch(function(){var t=Cr(br().mark((function t(n){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&Xx(e),n;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return eC(this._delegate,function(e,t,n){return sS.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return tC(this._delegate,function(e,t,n){return SE.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return aC(UT(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",eC(this._delegate,zE(this._delegate,t,YT)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return aC(UT(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,GT(this._delegate);case 3:return e.abrupt("return",nI(this._delegate,t,YT));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return iS.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function uC(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&iC.getOrCreate(e))},error:t,complete:n}}function sC(e,t){var n=function(e,t){var n=KT();if(!n)return[];var r=Yw(HT,e,t);switch(n.getItem(r)){case BT.NONE:return[Qw];case BT.LOCAL:return[cE,jS];case BT.SESSION:return[jS];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(cE)||n.push(cE),"undefined"!==typeof window)for(var r=0,i=[FS,jS];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Qw)||n.push(Qw),n}oC.Persistence=BT;var cC=function(){function e(){Rr(this,e),this.providerId="phone",this._delegate=new AE(XT(bo.auth()))}return Pr(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return AE.credential(e,t)}}]),e}();cC.PHONE_SIGN_IN_METHOD=AE.PHONE_SIGN_IN_METHOD,cC.PROVIDER_ID=AE.PROVIDER_ID;var lC=qb,fC=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bo.app();Rr(this,e),lC(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new wE(i.auth(),t,n),this.type=this._delegate.type}return Pr(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new zi("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new oC(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Sb,PASSWORD_RESET:Eb,RECOVER_EMAIL:Ib,REVERT_SECOND_FACTOR_ADDITION:Tb,VERIFY_AND_CHANGE_EMAIL:Cb,VERIFY_EMAIL:Nb}},EmailAuthProvider:lx,FacebookAuthProvider:px,GithubAuthProvider:mx,GoogleAuthProvider:vx,OAuthProvider:dx,SAMLAuthProvider:gx,PhoneAuthProvider:cC,PhoneMultiFactorGenerator:YI,RecaptchaVerifier:fC,TwitterAuthProvider:kx,Auth:oC,AuthCredential:T_,Error:gi}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.14")}(bo);bo.initializeApp({apiKey:"AIzaSyBy2NHjTYP7Gp6_QgzM48ShZhd0gmob0cY",authDomain:"chat-quiz-website-project.firebaseapp.com",projectId:"chat-quiz-website-project",storageBucket:"chat-quiz-website-project.appspot.com",messagingSenderId:"641262663115",appId:"1:641262663115:web:135f2785b6df4bda7af24e"});var hC=bo.auth(),dC=bo.firestore(),pC=bo,vC=dC,mC=function(){var e=Cr(br().mark((function e(){var t,n,r,i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="",n=new pC.auth.GoogleAuthProvider,e.next=5,hC.signInWithPopup(n);case 5:return r=e.sent,i=r.user,a=pC.firestore().collection("users"),e.next=10,a.where("uid","==",i.uid).get();case 10:if(0!==e.sent.docs.length){e.next=14;break}return e.next=14,a.add({uid:i.uid,name:i.displayName,photoURL:i.photoURL,email:i.email}).then((function(e){return t=e.id}));case 14:return e.abrupt("return",{uid:i.uid,docId:t});case 17:e.prev=17,e.t0=e.catch(0),console.error("Google Login Error:",e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),yC=function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return n=vC.collection("users"),e.next=4,n.doc(t).delete();case 4:return e.next=6,hC.signOut();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gC=function(){var e=Cr(br().mark((function e(t){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.prev=1,r=vC.collection("questions"),e.next=5,r.get();case 5:if(0!==e.sent.docs.length){e.next=9;break}return e.next=9,r.add({questions:t}).then((function(e){return n=e.id}));case 9:return e.abrupt("return",n);case 12:throw e.prev=12,e.t0=e.catch(1),console.error("Error adding questions to Firestore:",e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),kC=function(){var e=Cr(br().mark((function e(){var t,n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=hC.currentUser,n="",r=vC.collection("usersReadiness"),e.next=5,r.where("uid","==",t.uid).get();case 5:if(0!==e.sent.docs.length){e.next=9;break}return e.next=9,vC.collection("usersReadiness").add({uid:t.uid,displayName:t.displayName,photoURL:t.photoURL}).then((function(e){return n=e.id}));case 9:return e.abrupt("return",{uid:t.uid,userReadinessDocId:n});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bC=function(){var e=Cr(br().mark((function e(t){var n,r,i,a,o,u;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=hC.currentUser,r=n.uid,i=n.photoURL,a=n.displayName,o="",u=vC.collection("usersResults"),e.next=6,u.where("uid","==",r).get();case 6:if(0!==e.sent.docs.length){e.next=10;break}return e.next=10,vC.collection("usersResults").add({uid:r,displayName:a,photoURL:i,correctAnswersCount:t}).then((function(e){return o=e.id}));case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wC=function(){var e=Cr(br().mark((function e(){var t,n,r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=vC.collection("users"),n=vC.collection("usersReadiness"),e.prev=2,e.next=5,t.get();case 5:return r=e.sent,e.next=8,n.get();case 8:return i=e.sent,e.abrupt("return",r.docs.length&&r.docs.length===i.docs.length);case 12:e.prev=12,e.t0=e.catch(2),console.error("error",e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),_C=function(){var e=Cr(br().mark((function e(t){var n,r,i;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.type,r=t.docId,i=vC.collection(n),e.next=4,i.doc(r).delete();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xC=br().mark(NC),SC=br().mark(RC),EC=br().mark(AC),IC=function(e){return e.userState.userDocId},TC=function(e){return e.userState.userId},CC=function(e){var t;return null===(t=e.quizState.currentUserReadiness[0])||void 0===t?void 0:t.userReadinessDocId};function NC(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ir(on,AC);case 2:return e.next=4,Ir(un,RC);case 4:case"end":return e.stop()}}),xC)}function RC(){var e,t,n;return br().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ht(TC);case 2:if(!r.sent){r.next=5;break}return r.abrupt("return");case 5:return r.prev=5,r.next=8,lt(mC);case 8:return e=r.sent,t=e.uid,n=e.docId,r.next=13,ut(hn(t));case 13:return r.next=15,ut(vn(n));case 15:return r.next=17,ut(dn({fieldType:"authData",data:{uid:t,docId:n}}));case 17:r.next=22;break;case 19:r.prev=19,r.t0=r.catch(5),console.error("error",r.t0);case 22:case"end":return r.stop()}}),SC,null,[[5,19]])}function AC(){var e,t;return br().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ht(IC);case 2:return e=n.sent,n.next=5,ht(CC);case 5:if(t=n.sent,n.t0=t,!n.t0){n.next=10;break}return n.next=10,lt(_C,{type:"usersReadiness",docId:t});case 10:return n.prev=10,n.next=13,lt(yC,e);case 13:return n.next=15,ut(hn(""));case 15:return n.next=17,ut(pn());case 17:n.next=22;break;case 19:n.prev=19,n.t1=n.catch(10),console.error("error",n.t1);case 22:case"end":return n.stop()}}),EC,null,[[10,19]])}var OC="@firebase/database",PC="1.0.8",DC="";function LC(e){DC=e}var MC=function(){function e(t){Rr(this,e),this.domStorage_=t,this.prefix_="firebase:"}return Pr(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),_i(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:wi(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),FC=function(){function e(){Rr(this,e),this.cache_={},this.isInMemoryStorage=!0}return Pr(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Si(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),UC=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new MC(t)}}catch(n){}return new FC},jC=UC("localStorage"),zC=UC("sessionStorage"),VC=new Ji("@firebase/database"),BC=function(){var e=1;return function(){return e++}}(),qC=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Zr(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Pi;n.update(t);var r=n.digest();return Yr.encodeByteArray(r)},HC=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?_i(r):r,t+=" "}return t},WC=null,GC=!0,ZC=function(e,t){Zr(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(VC.logLevel=Wi.VERBOSE,WC=VC.log.bind(VC),t&&zC.set("logging_enabled",!0)):"function"===typeof e?WC=e:(WC=null,zC.remove("logging_enabled"))},KC=function(){if(!0===GC&&(GC=!1,null===WC&&!0===zC.get("logging_enabled")&&ZC(!0)),WC){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=HC.apply(null,t);WC(r)}},QC=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];KC.apply(void 0,[e].concat(n))}},YC=function(){var e="FIREBASE INTERNAL ERROR: "+HC.apply(void 0,arguments);VC.error(e)},XC=function(){var e="FIREBASE FATAL ERROR: ".concat(HC.apply(void 0,arguments));throw VC.error(e),new Error(e)},JC=function(){var e="FIREBASE WARNING: "+HC.apply(void 0,arguments);VC.warn(e)},$C=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},eN="[MIN_NAME]",tN="[MAX_NAME]",nN=function(e,t){if(e===t)return 0;if(e===eN||t===tN)return-1;if(t===eN||e===tN)return 1;var n=lN(e),r=lN(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},rN=function(e,t){return e===t?0:e<t?-1:1},iN=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+_i(t))},aN=function e(t){if("object"!==typeof t||null===t)return _i(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=_i(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},oN=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function uN(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var sN=function(e){Zr(!$C(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var cN=new RegExp("^-?(0*)\\d{1,10}$"),lN=function(e){if(cN.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},fN=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw JC("Exception was thrown by user callback.",e),t}),Math.floor(0))}},hN=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},dN=function(){function e(t,n){var r=this;Rr(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return Pr(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){JC('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),pN=function(){function e(t,n,r){var i=this;Rr(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return Pr(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(KC("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',JC(e)}}]),e}(),vN=function(){function e(t){Rr(this,e),this.accessToken=t}return Pr(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();vN.OWNER="owner";var mN="5",yN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gN="ac",kN="websocket",bN="long_polling",wN=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Rr(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jC.get("host:"+t)||this._host}return Pr(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&jC.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function _N(e,t,n){var r;if(Zr("string"===typeof t,"typeof type must == string"),Zr("object"===typeof n,"typeof params must == object"),t===kN)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==bN)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return uN(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var xN=function(){function e(){Rr(this,e),this.counters_={}}return Pr(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Si(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return ti(void 0,this.counters_)}}]),e}(),SN={},EN={};function IN(e){var t=e.toString();return SN[t]||(SN[t]=new xN),SN[t]}var TN=function(){function e(t){Rr(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return Pr(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&fN((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),1;n.currentResponseNum++};this.pendingResponses[this.currentResponseNum]&&!r(););}}]),e}(),CN="start",NN=function(){function e(t,n,r,i,a,o,u){var s=this;Rr(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=QC(t),this.stats_=IN(n),this.urlFn=function(e){return s.appCheckToken&&(e[gN]=s.appCheckToken),_N(n,bN,e)}}return Pr(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new TN(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(vi()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new RN((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===CN)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[CN]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=mN,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[gN]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&yN.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=_i(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Jr(t),r=oN(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!vi()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=_i(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!vi()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),RN=function(){function e(t,n,r,i){if(Rr(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,vi())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=BC(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){KC("frame writing exception"),u.stack&&KC(u.stack),KC(u)}}}return Pr(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;vi()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){KC("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||KC("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),AN=null;"undefined"!==typeof MozWebSocket?AN=MozWebSocket:"undefined"!==typeof WebSocket&&(AN=WebSocket);var ON=function(){function e(t,n,r,i,a,o,u){Rr(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=QC(this.connId),this.stats_=IN(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return Pr(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jC.set("previous_websocket_failure",!0);try{var r;if(vi()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(mN,"/").concat(DC,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/Chat-Quiz-Website-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new AN(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){jC.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=wi(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Zr(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=_i(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=oN(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=mN,!vi()&&"undefined"!==typeof location&&location.hostname&&yN.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[gN]=r),i&&(a.p=i),_N(e,kN,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==AN&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return jC.isInMemoryStorage||!0===jC.get("previous_websocket_failure")}}]),e}();ON.responsesRequiredToBeHealthy=2,ON.healthyTimeout=3e4;var PN=function(){function e(t){Rr(this,e),this.initTransports_(t)}return Pr(e,[{key:"initTransports_",value:function(t){var n=ON&&ON.isAvailable(),r=n&&!ON.previouslyFailed();if(t.webSocketOnly&&(n||JC("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ON];else{var i,a=this.transports_=[],o=Dr(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[NN,ON]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();PN.globalTransportInitialized_=!1;var DN=function(){function e(t,n,r,i,a,o,u,s,c,l){Rr(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=QC("c:"+this.id+":"),this.transportManager_=new PN(n),this.log_("Connection created"),this.start_()}return Pr(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=hN((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=iN("t",e),n=iN("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=iN("t",e),n=iN("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=iN("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?YC("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):YC("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),mN!==n&&JC("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),hN((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hN((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jC.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),LN=function(){function e(){Rr(this,e)}return Pr(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),MN=function(){function e(t){Rr(this,e),this.allowedEvents_=t,this.listeners_={},Zr(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return Pr(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=w(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Zr(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),FN=function(e){Fr(n,e);var t=Vr(n);function n(){var e;return Rr(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||ci()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Pr(n,[{key:"getInitialEvent",value:function(e){return Zr("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(MN),UN=32,jN=768,zN=function(){function e(t,n){if(Rr(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return Pr(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function VN(){return new zN("")}function BN(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function qN(e){return e.pieces_.length-e.pieceNum_}function HN(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new zN(e.pieces_,t)}function WN(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function GN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function ZN(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new zN(t,0)}function KN(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof zN)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new zN(n,0)}function QN(e){return e.pieceNum_>=e.pieces_.length}function YN(e,t){var n=BN(e),r=BN(t);if(null===n)return t;if(n===r)return YN(HN(e),HN(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function XN(e,t){if(qN(e)!==qN(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function JN(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(qN(e)>qN(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var $N=Pr((function e(t,n){Rr(this,e),this.errorPrefix_=n,this.parts_=GN(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Ui(this.parts_[r]);eR(this)}));function eR(e){if(e.byteLength_>jN)throw new Error(e.errorPrefix_+"has a key path longer than "+jN+" bytes ("+e.byteLength_+").");if(e.parts_.length>UN)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+UN+") or object contains a cycle "+tR(e))}function tR(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var nR=function(e){Fr(n,e);var t=Vr(n);function n(){var e,r,i;return Rr(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return Pr(n,[{key:"getInitialEvent",value:function(e){return Zr("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(MN),rR=1e3,iR=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i,a,o,u,s,c){var l;if(Rr(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=QC("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=rR,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!vi())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return nR.getInstance().on("visible",l.onVisible_,Lr(l)),-1===e.host.indexOf("fblocal")&&FN.getInstance().on("online",l.onOnline_,Lr(l)),l}return Pr(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(_i(i)),Zr(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new oi,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Zr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Zr(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=xi(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=xi(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Zr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+_i(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):YC("Unrecognized action received from server: "+_i(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Zr(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rR,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=rR,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=rR),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Cr(br().mark((function e(){var t,r,i,a,o,u,s,c,l,f,h,d,p,v,m=this;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,c=function(){s?s.close():(u=!0,i())},l=function(e){Zr(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:c,sendRequest:l},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:h=e.sent,d=k(h,2),p=d[0],v=d[1],u?KC("getToken() completed but was canceled"):(KC("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,s=new DN(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){JC(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&JC(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){KC("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){KC("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ii(this.interruptReasons_)&&(this.reconnectDelay_=rR,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return aN(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new zN(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){KC("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){KC("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=Dr(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=Dr(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";vi()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+DC.replace(/\./g,"-")]=1,ci()?e["framework.cordova"]=1:di()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=FN.getInstance().currentlyOnline();return Ii(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Si(e,"w")){var n=Ei(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();JC("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(LN);iR.nextPersistentConnectionId_=0,iR.nextConnectionId_=0;var aR,oR=function(){function e(t,n){Rr(this,e),this.name=t,this.node=n}return Pr(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),uR=function(){function e(){Rr(this,e)}return Pr(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new oR(eN,e),r=new oR(eN,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return oR.MIN}}]),e}(),sR=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return Pr(n,[{key:"compare",value:function(e,t){return nN(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Kr("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return oR.MIN}},{key:"maxPost",value:function(){return new oR(tN,aR)}},{key:"makePost",value:function(e,t){return Zr("string"===typeof e,"KeyIndex indexValue must always be a string."),new oR(e,aR)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return aR},set:function(e){aR=e}}]),n}(uR),cR=new sR,lR=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Rr(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return Pr(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),fR=function(){function e(t,n,r,i,a){Rr(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:pR.EMPTY_NODE,this.right=null!=a?a:pR.EMPTY_NODE}return Pr(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return pR.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return pR.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();fR.RED=!0,fR.BLACK=!1;var hR,dR=function(){function e(){Rr(this,e)}return Pr(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new fR(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),pR=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;Rr(this,e),this.comparator_=t,this.root_=n}return Pr(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,fR.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,fR.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new lR(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new lR(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new lR(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new lR(this.root_,null,this.comparator_,!0,e)}}]),e}();function vR(e,t){return nN(e.name,t.name)}function mR(e,t){return nN(e,t)}pR.EMPTY_NODE=new dR;var yR,gR,kR,bR=function(e){return"number"===typeof e?"number:"+sN(e):"string:"+e},wR=function(e){if(e.isLeafNode()){var t=e.val();Zr("string"===typeof t||"number"===typeof t||"object"===typeof t&&Si(t,".sv"),"Priority must be a string or number.")}else Zr(e===hR||e.isEmpty(),"priority of unexpected type.");Zr(e===hR||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},_R=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;Rr(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Zr(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),wR(this.priorityNode_)}return Pr(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return QN(t)?this:".priority"===BN(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=BN(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Zr(".priority"!==r||1===qN(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(HN(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+bR(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?sN(this.value_):this.value_,this.lazyHash_=qC(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Zr(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Zr(i>=0,"Unknown leaf type: "+n),Zr(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return yR},set:function(e){yR=e}}]),e}();_R.VALUE_TYPE_ORDER=["object","boolean","number","string"];var xR,SR,ER=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return Pr(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?nN(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return oR.MIN}},{key:"maxPost",value:function(){return new oR(tN,new _R("[PRIORITY-POST]",kR))}},{key:"makePost",value:function(e,t){var n=gR(e);return new oR(t,new _R("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(uR),IR=new ER,TR=Math.log(2),CR=function(){function e(t){Rr(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/TR,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return Pr(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),NR=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new fR(o,a.node,fR.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new fR(o,a.node,fR.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],f=n?n(l):l;s(new fR(f,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?u(f,fR.BLACK):(u(f,fR.BLACK),u(f,fR.RED))}return a}(new CR(e.length));return new pR(r||t,a)},RR={},AR=function(){function e(t,n){Rr(this,e),this.indexes_=t,this.indexSet_=n}return Pr(e,[{key:"get",value:function(e){var t=Ei(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof pR?t:null}},{key:"hasIndex",value:function(e){return Si(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Zr(t!==cR,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(oR.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?NR(i,t.getCompare()):RR;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this,i=Ti(this.indexes_,(function(e,i){var a=Ei(r.indexSet_,i);if(Zr(a,"Missing index implementation for "+i),e===RR){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(oR.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),NR(o,a.getCompare())}return RR}var c=n.get(t.name),l=e;return c&&(l=l.remove(new oR(t.name,c))),l.insert(t,t.node)}));return new e(i,this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Ti(this.indexes_,(function(e){if(e===RR)return e;var r=n.get(t.name);return r?e.remove(new oR(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Zr(RR&&IR,"ChildrenNode.ts has not been loaded"),xR=xR||new e({".priority":RR},{".priority":IR})}}]),e}(),OR=function(){function e(t,n,r){Rr(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&wR(this.priorityNode_),this.children_.isEmpty()&&Zr(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Pr(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||SR}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?SR:t}},{key:"getChild",value:function(e){var t=BN(e);return null===t?this:this.getImmediateChild(t).getChild(HN(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Zr(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new oR(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?SR:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=BN(e);if(null===n)return t;Zr(".priority"!==BN(e)||1===qN(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(HN(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(IR,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+bR(this.getPriority().val())+":"),this.forEachChild(IR,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":qC(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new oR(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new oR(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new oR(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,oR.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,oR.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===PR?-1:0}},{key:"withIndex",value:function(t){if(t===cR||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===cR||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(IR),r=t.getIterator(IR),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===cR?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return SR||(SR=new e(new pR(mR),null,AR.Default))}}]),e}();OR.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var PR=new(function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.call(this,new pR(mR),OR.EMPTY_NODE,AR.Default)}return Pr(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return OR.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(OR));Object.defineProperties(oR,{MIN:{value:new oR(eN,OR.EMPTY_NODE)},MAX:{value:new oR(tN,PR)}}),sR.__EMPTY_NODE=OR.EMPTY_NODE,_R.__childrenNodeConstructor=OR,hR=PR,function(e){kR=e}(PR);var DR=!0;function LR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return OR.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Zr(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new _R(e,LR(t));if(e instanceof Array||!DR){var n=OR.EMPTY_NODE;return uN(e,(function(t,r){if(Si(e,t)&&"."!==t.substring(0,1)){var i=LR(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(LR(t))}var r=[],i=!1;if(uN(e,(function(e,t){if("."!==e.substring(0,1)){var n=LR(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new oR(e,n)))}})),0===r.length)return OR.EMPTY_NODE;var a=NR(r,vR,(function(e){return e.name}),mR);if(i){var o=NR(r,IR.getCompare());return new OR(a,LR(t),new AR({".priority":o},{".priority":IR}))}return new OR(a,LR(t),AR.Default)}!function(e){gR=e}(LR);var MR=function(e){Fr(n,e);var t=Vr(n);function n(e){var r;return Rr(this,n),(r=t.call(this)).indexPath_=e,Zr(!QN(e)&&".priority"!==BN(e),"Can't create PathIndex with empty path or .priority key"),r}return Pr(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?nN(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=LR(e),r=OR.EMPTY_NODE.updateChild(this.indexPath_,n);return new oR(t,r)}},{key:"maxPost",value:function(){var e=OR.EMPTY_NODE.updateChild(this.indexPath_,PR);return new oR(tN,e)}},{key:"toString",value:function(){return GN(this.indexPath_,0).join("/")}}]),n}(uR),FR=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return Pr(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?nN(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return oR.MIN}},{key:"maxPost",value:function(){return oR.MAX}},{key:"makePost",value:function(e,t){var n=LR(e);return new oR(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(uR),UR=new FR;function jR(e){return{type:"value",snapshotNode:e}}function zR(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function VR(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function BR(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var qR=function(){function e(){Rr(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=IR}return Pr(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Zr(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Zr(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:eN}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Zr(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Zr(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:tN}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Zr(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===IR}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function HR(e){var t,n={};if(e.isDefault())return n;if(e.index_===IR?t="$priority":e.index_===UR?t="$value":e.index_===cR?t="$key":(Zr(e.index_ instanceof MR,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=_i(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=_i(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+_i(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=_i(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+_i(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function WR(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==IR&&(t.i=e.index_.toString()),t}var GR=function(e){Fr(n,e);var t=Vr(n);function n(e,r,i,a){var o;return Rr(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=QC("p:rest:"),o.listens_={},o}return Pr(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=HR(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Ei(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=HR(e._queryParams),r=e._path.toString(),i=new oi;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=k(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Ri(n);t.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=wi(c.responseText)}catch(n){JC("Failed to parse JSON response for "+s+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&JC("Got unsuccessful REST response for "+s+" Status: "+c.status),r(c.status);r=null}},c.open("GET",s,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Zr(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(LN),ZR=function(){function e(){Rr(this,e),this.rootNode_=OR.EMPTY_NODE}return Pr(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function KR(){return{value:null,children:new Map}}function QR(e,t,n){if(QN(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=BN(t);e.children.has(r)||e.children.set(r,KR()),QR(e.children.get(r),t=HN(t),n)}}function YR(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){YR(r,new zN(t.toString()+"/"+e),n)}))}var XR,JR=function(){function e(t){Rr(this,e),this.collection_=t,this.last_=null}return Pr(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&uN(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),$R=function(){function e(t,n){Rr(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new JR(t);var r=1e4+2e4*Math.random();hN(this.reportStats_.bind(this),Math.floor(r))}return Pr(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;uN(t,(function(t,i){i>0&&Si(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),hN(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function eA(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(XR||(XR={}));var tA,nA=function(){function e(t,n,r){Rr(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=XR.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return Pr(e,[{key:"operationForChild",value:function(t){if(QN(this.path)){if(null!=this.affectedTree.value)return Zr(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new zN(t));return new e(VN(),n,this.revert)}return Zr(BN(this.path)===t,"operationForChild called for unrelated child."),new e(HN(this.path),this.affectedTree,this.revert)}}]),e}(),rA=function(){function e(t,n,r){Rr(this,e),this.source=t,this.path=n,this.snap=r,this.type=XR.OVERWRITE}return Pr(e,[{key:"operationForChild",value:function(t){return QN(this.path)?new e(this.source,VN(),this.snap.getImmediateChild(t)):new e(this.source,HN(this.path),this.snap)}}]),e}(),iA=function(){function e(t,n,r){Rr(this,e),this.source=t,this.path=n,this.children=r,this.type=XR.MERGE}return Pr(e,[{key:"operationForChild",value:function(t){if(QN(this.path)){var n=this.children.subtree(new zN(t));return n.isEmpty()?null:n.value?new rA(this.source,VN(),n.value):new e(this.source,VN(),n)}return Zr(BN(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,HN(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),aA=function(){function e(t,n,r){Rr(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return Pr(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(QN(e))return this.isFullyInitialized()&&!this.filtered_;var t=BN(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function oA(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Kr("Should only compare child_ events.");var r=new oR(t.childName,t.snapshotNode),i=new oR(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function uA(e,t){return{eventCache:e,serverCache:t}}function sA(e,t,n,r){return uA(new aA(t,n,r),e.serverCache)}function cA(e,t,n,r){return uA(e.eventCache,new aA(t,n,r))}function lA(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function fA(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var hA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(tA||(tA=new pR(rN)),tA);Rr(this,e),this.value=t,this.children=n}return Pr(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:VN(),value:this.value};if(QN(e))return null;var n=BN(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(HN(e),t);return null!=i?{path:KN(new zN(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(QN(t))return this;var n=BN(t),r=this.children.get(n);return null!==r?r.subtree(HN(t)):new e(null)}},{key:"set",value:function(t,n){if(QN(t))return new e(n,this.children);var r=BN(t),i=(this.children.get(r)||new e(null)).set(HN(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(QN(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=BN(t),r=this.children.get(n);if(r){var i,a=r.remove(HN(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(QN(e))return this.value;var t=BN(e),n=this.children.get(t);return n?n.get(HN(e)):null}},{key:"setTree",value:function(t,n){if(QN(t))return n;var r,i=BN(t),a=(this.children.get(i)||new e(null)).setTree(HN(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(VN(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(KN(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,VN(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(QN(e))return null;var i=BN(e),a=this.children.get(i);return a?a.findOnPath_(HN(e),KN(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,VN(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(QN(t))return this;this.value&&r(n,this.value);var i=BN(t),a=this.children.get(i);return a?a.foreachOnPath_(HN(t),KN(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(VN(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(KN(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return uN(t,(function(e,t){n=n.set(new zN(e),t)})),n}}]),e}(),dA=function(){function e(t){Rr(this,e),this.writeTree_=t}return Pr(e,null,[{key:"empty",value:function(){return new e(new hA(null))}}]),e}();function pA(e,t,n){if(QN(t))return new dA(new hA(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=YN(i,t);return a=a.updateChild(o,n),new dA(e.writeTree_.set(i,a))}var u=new hA(n),s=e.writeTree_.setTree(t,u);return new dA(s)}function vA(e,t,n){var r=e;return uN(n,(function(e,n){r=pA(r,KN(t,e),n)})),r}function mA(e,t){if(QN(t))return dA.empty();var n=e.writeTree_.setTree(t,new hA(null));return new dA(n)}function yA(e,t){return null!=gA(e,t)}function gA(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(YN(n.path,t)):null}function kA(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(IR,(function(e,n){t.push(new oR(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new oR(e,n.value))})),t}function bA(e,t){if(QN(t))return e;var n=gA(e,t);return new dA(null!=n?new hA(n):e.writeTree_.subtree(t))}function wA(e){return e.writeTree_.isEmpty()}function _A(e,t){return xA(VN(),e.writeTree_,t)}function xA(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Zr(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=xA(KN(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(KN(e,".priority"),r)),n}function SA(e,t){return FA(t,e)}function EA(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Zr(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&IA(u,r.path)?i=!1:JN(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=CA(e.allWrites,TA,VN()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=mA(e.visibleWrites,r.path):uN(r.children,(function(t){e.visibleWrites=mA(e.visibleWrites,KN(r.path,t))}));return!0}return!1}function IA(e,t){if(e.snap)return JN(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&JN(KN(e.path,n),t))return!0;return!1}function TA(e){return e.visible}function CA(e,t,n){for(var r=dA.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)JN(n,o)?r=pA(r,u=YN(n,o),a.snap):JN(o,n)&&(u=YN(o,n),r=pA(r,VN(),a.snap.getChild(u)));else{if(!a.children)throw Kr("WriteRecord should have .snap or .children");if(JN(n,o))r=vA(r,u=YN(n,o),a.children);else if(JN(o,n))if(QN(u=YN(o,n)))r=vA(r,VN(),a.children);else{var s=Ei(a.children,BN(u));if(s){var c=s.getChild(HN(u));r=pA(r,VN(),c)}}}}}return r}function NA(e,t,n,r,i){if(r||i){var a=bA(e.visibleWrites,t);if(!i&&wA(a))return n;if(i||null!=n||yA(a,VN())){return _A(CA(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(JN(e.path,t)||JN(t,e.path))}),t),n||OR.EMPTY_NODE)}return null}var o=gA(e.visibleWrites,t);if(null!=o)return o;var u=bA(e.visibleWrites,t);return wA(u)?n:null!=n||yA(u,VN())?_A(u,n||OR.EMPTY_NODE):null}function RA(e,t,n,r){return NA(e.writeTree,e.treePath,t,n,r)}function AA(e,t){return function(e,t,n){var r=OR.EMPTY_NODE,i=gA(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(IR,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=bA(e.visibleWrites,t);return n.forEachChild(IR,(function(e,t){var n=_A(bA(a,new zN(e)),t);r=r.updateImmediateChild(e,n)})),kA(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return kA(bA(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function OA(e,t,n,r){return function(e,t,n,r,i){Zr(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=KN(t,n);if(yA(e.visibleWrites,a))return null;var o=bA(e.visibleWrites,a);return wA(o)?i.getChild(n):_A(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function PA(e,t){return function(e,t){return gA(e.visibleWrites,t)}(e.writeTree,KN(e.treePath,t))}function DA(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=bA(e.visibleWrites,t),c=gA(s,VN());if(null!=c)u=c;else{if(null==n)return[];u=_A(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function LA(e,t,n){return function(e,t,n,r){var i=KN(t,n),a=gA(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?_A(bA(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function MA(e,t){return FA(KN(e.treePath,t),e.writeTree)}function FA(e,t){return{treePath:e,writeTree:t}}var UA=function(){function e(){Rr(this,e),this.changeMap=new Map}return Pr(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Zr("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Zr(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,BR(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,VR(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,zR(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Kr("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,BR(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),jA=new(function(){function e(){Rr(this,e)}return Pr(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),zA=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Rr(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return Pr(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new aA(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return LA(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:fA(this.viewCache_),i=DA(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function VA(e,t,n,r,i){var a,o,u=new UA;if(n.type===XR.OVERWRITE){var s=n;s.source.fromUser?a=HA(e,t,s.path,s.snap,r,i,u):(Zr(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!QN(s.path),a=qA(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===XR.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=KN(n,r);WA(t,BN(c))&&(u=HA(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=KN(n,r);WA(t,BN(c))||(u=HA(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(Zr(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=ZA(e,t,c.path,c.children,r,i,o,u))}else if(n.type===XR.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=PA(r,n))return t;var u,s=new zA(r,t,i),c=t.eventCache.getNode();if(QN(n)||".priority"===BN(n)){var l;if(t.serverCache.isFullyInitialized())l=RA(r,fA(t));else{var f=t.serverCache.getNode();Zr(f instanceof OR,"serverChildren would be complete if leaf node"),l=AA(r,f)}u=e.filter.updateFullNode(c,l,a)}else{var h=BN(n),d=LA(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(u=null!=d?e.filter.updateChild(c,h,d,HN(n),s,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,OR.EMPTY_NODE,HN(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=RA(r,fA(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=PA(r,VN()),sA(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=PA(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(QN(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return qA(e,t,n,s.getNode().getChild(n),i,a,u,o);if(QN(n)){var c=new hA(null);return s.getNode().forEachChild(cR,(function(e,t){c=c.set(new zN(e),t)})),ZA(e,t,n,c,i,a,u,o)}return t}var l=new hA(null);return r.foreach((function(e,t){var r=KN(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),ZA(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==XR.LISTEN_COMPLETE)throw Kr("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=cA(t,a.getNode(),a.isFullyInitialized()||QN(n),a.isFiltered());return BA(e,o,n,r,jA,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=lA(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(jR(lA(t)))}}(t,a,f),{viewCache:a,changes:f}}function BA(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=PA(r,n))return t;if(QN(n))if(Zr(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=fA(t),l=AA(r,c instanceof OR?c:OR.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=RA(r,fA(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=BN(n);if(".priority"===h){Zr(1===qN(n),"Can't have a priority with additional path components");var d=s.getNode(),p=OA(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,m=HN(n);if(s.isCompleteForChild(h)){u=t.serverCache.getNode();var y=OA(r,n,s.getNode(),u);v=null!=y?s.getNode().getImmediateChild(h).updateChild(m,y):s.getNode().getImmediateChild(h)}else v=LA(r,h,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),h,v,m,i,a):s.getNode()}}return sA(t,o,s.isFullyInitialized()||QN(n),e.filter.filtersNodes())}function qA(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(QN(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),f,null)}else{var h=BN(n);if(!c.isCompleteForPath(n)&&qN(n)>1)return t;var d=HN(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);s=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,jA,null)}var v=cA(t,s,c.isFullyInitialized()||QN(n),l.filtersNodes());return BA(e,v,n,i,new zA(i,v,a),u)}function HA(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new zA(i,t,a);if(QN(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=sA(t,s,!0,e.filter.filtersNodes());else{var f=BN(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=sA(t,s,c.isFullyInitialized(),c.isFiltered());else{var h,d=HN(n),p=c.getNode().getImmediateChild(f);if(QN(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===WN(d)&&v.getChild(ZN(d)).isEmpty()?v:v.updateChild(d,r):OR.EMPTY_NODE}if(p.equals(h))u=t;else u=sA(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function WA(e,t){return e.eventCache.isCompleteForChild(t)}function GA(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function ZA(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=QN(n)?r:new hA(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=GA(0,t.serverCache.getNode().getImmediateChild(n),r);c=qA(e,c,new zN(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var f=GA(0,t.serverCache.getNode().getImmediateChild(n),r);c=qA(e,c,new zN(n),f,i,a,o,u)}})),c}var KA;function QA(e,t){var n=fA(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!QN(t)&&!n.getImmediateChild(BN(t)).isEmpty())?n.getChild(t):null}function YA(e,t,n,r){t.type===XR.MERGE&&null!==t.source.queryId&&(Zr(fA(e.viewCache_),"We should always have a full cache before handling merges"),Zr(lA(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=VA(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,Zr(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Zr(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Zr(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,XA(e,u.changes,u.viewCache.eventCache.getNode(),null)}function XA(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),oA(e,i,"child_removed",t,r,n),oA(e,i,"child_added",t,r,n),oA(e,i,"child_moved",a,r,n),oA(e,i,"child_changed",t,r,n),oA(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var JA;function $A(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Zr(null!=a,"SyncTree gave us an op for an invalid query."),YA(a,t,n,r)}var o,u=[],s=Dr(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(YA(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function eO(e,t){var n,r=null,i=Dr(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||QA(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var tO=Pr((function e(t){Rr(this,e),this.listenProvider_=t,this.syncPointTree_=new hA(null),this.pendingWriteTree_={visibleWrites:dA.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function nO(e,t,n,r,i){return function(e,t,n,r,i){Zr(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=pA(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?uO(e,new rA({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function rO(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(EA(e.pendingWriteTree_,t)){var i=new hA(null);return null!=r.snap?i=i.set(VN(),!0):uN(r.children,(function(e){i=i.set(new zN(e),!0)})),uO(e,new nA(r.path,i,n))}return[]}function iO(e,t,n){return uO(e,new rA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function aO(e,t,n,r){var i=lO(e,r);if(null!=i){var a=fO(i),o=a.path,u=a.queryId,s=YN(o,t);return hO(e,o,new rA(eA(u),s,n))}return[]}function oO(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=eO(n,YN(e,t));if(r)return r}));return NA(r,t,i,n,!0)}function uO(e,t){return sO(t,e.syncPointTree_,null,SA(e.pendingWriteTree_,VN()))}function sO(e,t,n,r){if(QN(e.path))return cO(e,t,n,r);var i=t.get(VN());null==n&&null!=i&&(n=eO(i,VN()));var a=[],o=BN(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=MA(r,o);a=a.concat(sO(u,s,c,l))}return i&&(a=a.concat($A(i,e,r,n))),a}function cO(e,t,n,r){var i=t.get(VN());null==n&&null!=i&&(n=eO(i,VN()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=MA(r,t),s=e.operationForChild(t);s&&(a=a.concat(cO(s,i,o,u)))})),i&&(a=a.concat($A(i,e,r,n))),a}function lO(e,t){return e.tagToQueryMap.get(t)}function fO(e){var t=e.indexOf("$");return Zr(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new zN(e.substr(0,t))}}function hO(e,t,n){var r=e.syncPointTree_.get(t);return Zr(r,"Missing sync point for query tag that we're tracking"),$A(r,n,SA(e.pendingWriteTree_,t),null)}var dO=function(){function e(t){Rr(this,e),this.node_=t}return Pr(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),pO=function(){function e(t,n){Rr(this,e),this.syncTree_=t,this.path_=n}return Pr(e,[{key:"getImmediateChild",value:function(t){var n=KN(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return oO(this.syncTree_,this.path_)}}]),e}(),vO=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},mO=function(e,t,n){return e&&"object"===typeof e?(Zr(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?yO(e[".sv"],t,n):"object"===typeof e[".sv"]?gO(e[".sv"],t):void Zr(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},yO=function(e,t,n){if("timestamp"===e)return n.timestamp;Zr(!1,"Unexpected server value: "+e)},gO=function(e,t,n){e.hasOwnProperty("increment")||Zr(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Zr(!1,"Unexpected increment value: "+r);var i=t.node();if(Zr(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},kO=function(e,t,n,r){return wO(t,new pO(n,e),r)},bO=function(e,t,n){return wO(e,new dO(t),n)};function wO(e,t,n){var r,i=e.getPriority().val(),a=mO(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=mO(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new _R(u,LR(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new _R(a))),s.forEachChild(IR,(function(e,i){var a=wO(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var _O=Pr((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};Rr(this,e),this.name=t,this.parent=n,this.node=r}));function xO(e,t){for(var n=t instanceof zN?t:new zN(t),r=e,i=BN(n);null!==i;){var a=Ei(r.node.children,i)||{children:{},childCount:0};r=new _O(i,r,a),i=BN(n=HN(n))}return r}function SO(e){return e.node.value}function EO(e,t){e.node.value=t,RO(e)}function IO(e){return e.node.childCount>0}function TO(e,t){uN(e.node.children,(function(n,r){t(new _O(n,e,r))}))}function CO(e,t,n,r){n&&!r&&t(e),TO(e,(function(e){CO(e,t,!0,r)})),n&&r&&t(e)}function NO(e){return new zN(null===e.parent?e.name:NO(e.parent)+"/"+e.name)}function RO(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===SO(e)&&!IO(e)}(n),i=Si(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,RO(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,RO(e))}(e.parent,e.name,e)}var AO=/[\[\].#$\/\u0000-\u001F\u007F]/,OO=/[\[\].#$\u0000-\u001F\u007F]/,PO=10485760,DO=function(e){return"string"===typeof e&&0!==e.length&&!AO.test(e)},LO=function(e){return"string"===typeof e&&0!==e.length&&!OO.test(e)},MO=function e(t,n,r){var i=r instanceof zN?new $N(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+tR(i));if("function"===typeof n)throw new Error(t+"contains a function "+tR(i)+" with contents = "+n.toString());if($C(n))throw new Error(t+"contains "+n.toString()+" "+tR(i));if("string"===typeof n&&n.length>PO/3&&Ui(n)>PO)throw new Error(t+"contains a string greater than "+PO+" utf8 bytes "+tR(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(uN(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!DO(n)))throw new Error(t+" contains an invalid key ("+n+") "+tR(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=Ui(s),eR(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Ui(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+tR(i)+" in addition to actual children.")}},FO=function(e,t,n,r){if((!r||void 0!==n)&&!LO(n))throw new Error(Fi(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},UO=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),FO(e,t,n,r)},jO=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!DO(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),LO(e)}(n))throw new Error(Fi(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},zO=Pr((function e(){Rr(this,e),this.eventLists_=[],this.recursionDepth_=0}));function VO(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||XN(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function BO(e,t,n){VO(e,n),qO(e,(function(e){return JN(e,t)||JN(t,e)}))}function qO(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(HO(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function HO(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();WC&&KC("event: "+n.toString()),fN(r)}}}var WO="repo_interrupt",GO=25,ZO=function(){function e(t,n,r,i){Rr(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zO,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=KR(),this.transactionQueueTree_=new _O,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return Pr(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function KO(e,t,n){if(e.stats_=IN(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new GR(e.repoInfo_,(function(t,n,r,i){XO(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return JO(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_i(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new iR(e.repoInfo_,t,(function(t,n,r,i){XO(e,t,n,r,i)}),(function(t){JO(e,t)}),(function(t){!function(e,t){uN(t,(function(t,n){$O(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return EN[n]||(EN[n]=t()),EN[n]}(e.repoInfo_,(function(){return new $R(e.stats_,e.server_)})),e.infoData_=new ZR,e.infoSyncTree_=new tO({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=iO(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),$O(e,"connected",!1),e.serverSyncTree_=new tO({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);BO(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function QO(e){var t=e.infoData_.getNode(new zN(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function YO(e){return vO({timestamp:QO(e)})}function XO(e,t,n,r,i){e.dataUpdateCount++;var a=new zN(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=Ti(n,(function(e){return LR(e)}));o=function(e,t,n,r){var i=lO(e,r);if(i){var a=fO(i),o=a.path,u=a.queryId,s=YN(o,t),c=hA.fromObject(n);return hO(e,o,new iA(eA(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=LR(n);o=aO(e.serverSyncTree_,a,s,i)}else if(r){var c=Ti(n,(function(e){return LR(e)}));o=function(e,t,n){var r=hA.fromObject(n);return uO(e,new iA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=LR(n);o=iO(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=aP(e,a)),BO(e.eventQueue_,f,o)}function JO(e,t){$O(e,"connected",t),!1===t&&function(e){nP(e,"onDisconnectEvents");var t=YO(e),n=KR();YR(e.onDisconnect_,VN(),(function(r,i){var a=kO(r,i,e.serverSyncTree_,t);QR(n,r,a)}));var r=[];YR(n,VN(),(function(t,n){r=r.concat(iO(e.serverSyncTree_,t,n));var i=lP(e,t);aP(e,i)})),e.onDisconnect_=KR(),BO(e.eventQueue_,VN(),r)}(e)}function $O(e,t,n){var r=new zN("/.info/"+t),i=LR(n);e.infoData_.updateSnapshot(r,i);var a=iO(e.infoSyncTree_,r,i);BO(e.eventQueue_,r,a)}function eP(e){return e.nextWriteId_++}function tP(e){e.persistentConnection_&&e.persistentConnection_.interrupt(WO)}function nP(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];KC.apply(void 0,[t].concat(r))}function rP(e,t,n){return oO(e.serverSyncTree_,t,n)||OR.EMPTY_NODE}function iP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||cP(e,t),SO(t)){var n=uP(e,t);Zr(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=rP(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];Zr(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=YN(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){nP(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(rO(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);cP(e,xO(e.transactionQueueTree_,t)),iP(e,e.transactionQueueTree_),BO(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)fN(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{JC("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}aP(e,t)}}),o)}(e,NO(t),n)}else IO(t)&&TO(t,(function(t){iP(e,t)}))}function aP(e,t){var n=oP(e,t),r=NO(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s,c=t[a],l=YN(n,c.path),f=!1;if(Zr(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)f=!0,u=c.abortReason,i=i.concat(rO(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=GO)f=!0,u="maxretry",i=i.concat(rO(e.serverSyncTree_,c.currentWriteId,!0));else{var h=rP(e,c.path,o);c.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){MO("transaction failed: Data returned ",d,c.path);var p=LR(d);"object"===typeof d&&null!=d&&Si(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=c.currentWriteId,m=YO(e),y=bO(p,h,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=eP(e),o.splice(o.indexOf(v),1),i=(i=i.concat(nO(e.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(rO(e.serverSyncTree_,v,!0))}else f=!0,u="nodata",i=i.concat(rO(e.serverSyncTree_,c.currentWriteId,!0))}BO(e.eventQueue_,n,i),i=[],f&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===u?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(u),!1,null)}))))},s=0;s<t.length;s++)u(s);cP(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)fN(r[c]);iP(e,e.transactionQueueTree_)}(e,uP(e,n),r),r}function oP(e,t){var n,r=e.transactionQueueTree_;for(n=BN(t);null!==n&&void 0===SO(r);)r=xO(r,n),n=BN(t=HN(t));return r}function uP(e,t){var n=[];return sP(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function sP(e,t,n){var r=SO(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);TO(t,(function(t){sP(e,t,n)}))}function cP(e,t){var n=SO(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,EO(t,n.length>0?n:void 0)}TO(t,(function(t){cP(e,t)}))}function lP(e,t){var n=NO(oP(e,t)),r=xO(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){fP(e,t)})),fP(e,r),CO(r,(function(t){fP(e,t)})),n}function fP(e,t){var n=SO(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Zr(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Zr(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(rO(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?EO(t,void 0):n.length=a+1,BO(e.eventQueue_,NO(t),i);for(var u=0;u<r.length;u++)fN(r[u])}}var hP=function(e,t){var n=dP(e),r=n.namespace;"firebase.com"===n.domain&&XC(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||XC("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&JC("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new wN(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new zN(n.pathString)}},dP=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=Dr(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):JC("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},pP="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",vP=(function(){var e=0,t=[]}(),function(){function e(t,n,r,i){Rr(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return Pr(e,[{key:"key",get:function(){return QN(this._path)?null:WN(this._path)}},{key:"ref",get:function(){return new mP(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=WR(this._queryParams),t=aN(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return WR(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=ji(t))instanceof e))return!1;var n=this._repo===t._repo,r=XN(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}());var mP=function(e){Fr(n,e);var t=Vr(n);function n(e,r){return Rr(this,n),t.call(this,e,r,new qR,!1)}return Pr(n,[{key:"parent",get:function(){var e=ZN(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(vP);function yP(e,t){return(e=ji(e))._checkNotDeleted("ref"),void 0!==t?gP(e._root,t):e._root}function gP(e,t){return null===BN((e=ji(e))._path)?UO("child","path",t,!1):FO("child","path",t,!1),new mP(e._repo,KN(e._path,t))}!function(e){Zr(!KA,"__referenceConstructor has already been defined"),KA=e}(mP),function(e){Zr(!JA,"__referenceConstructor has already been defined"),JA=e}(mP);var kP="FIREBASE_DATABASE_EMULATOR_HOST",bP={},wP=!1;function _P(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||XC("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),KC("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=hP(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/Chat-Quiz-Website-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[kP]),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=hP(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new vN(vN.OWNER):new pN(e.name,e.options,t);jO("Invalid Firebase Database URL",u),QN(u.path)||XC("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=bP[t.name];i||(i={},bP[t.name]=i);var a=i[e.toURLString()];a&&XC("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new ZO(e,wP,n,r),i[e.toURLString()]=a,a}(s,e,l,new dN(e.name,n));return new xP(f,e)}var xP=function(){function e(t,n){Rr(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return Pr(e,[{key:"_repo",get:function(){return this._instanceStarted||(KO(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new mP(this._repo,VN())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=bP[t];n&&n[e.key]===e||XC("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),tP(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&XC("Cannot call "+e+" on a deleted database.")}}]),e}();function SP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba(),t=arguments.length>1?arguments[1]:void 0,n=Ra(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){var r=ii("database");r&&EP.apply(void 0,[n].concat(w(r)))}return n}function EP(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=ji(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&XC("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&XC('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new vN(vN.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:ui(r.mockUserToken,e.app.options.projectId);a=new vN(o)}!function(e,t,n,r){e.repoInfo_=new wN("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}iR.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},iR.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};function IP(){var e=SP(),t=function(e,t){void 0===t&&(t=Be());var n,r=!1,i=Ot(t),a=function(){r||(r=!0,le(n)&&n(),i.close())};return n=Te(n=e((function(e){At(e)?a():i.put(e)}))),r&&n(),{take:i.take,flush:i.flush,close:a}}((function(t){vC.collection("messages").orderBy("createdAt").onSnapshot({includeMetadataChanges:!0},(function(e){var n=e.docChanges().map((function(e){return e.doc.data()}));t(_n(n))})),vC.collection("questions").onSnapshot({includeMetadataChanges:!0},(function(e){var n,r=e.docChanges().map((function(e){return e.doc.data()}));"added"===e.docChanges().map((function(e){return e.type}))[0]&&t(Yn(r.length&&(null===(n=r[0])||void 0===n?void 0:n.questions)))})),vC.collection("usersResults").onSnapshot({includeMetadataChanges:!0},(function(e){var n=e.docChanges().map((function(e){return e.doc.data()}));"added"===e.docChanges().map((function(e){return e.type}))[0]&&t($n(n))}));var n=[yP(e,"messages"),yP(e,"questions"),yP(e,"usersResults")];return function(){return n.forEach((function(e){return e.off(e)}))}}));return t}!function(e){LC(ja),Na(new zi("database",(function(e,t){var n=t.instanceIdentifier;return _P(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Ga(OC,PC,e),Ga(OC,PC,"esm2017")}();var TP=function(){var e=Cr(br().mark((function e(t){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=hC.currentUser,e.prev=1,e.next=4,vC.collection("messages").add({uid:n.uid,displayName:n.displayName,photoURL:n.photoURL,text:t,createdAt:pC.firestore.FieldValue.serverTimestamp()});case 4:e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(1),console.error("Error sending message request:",e.t0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),CP=br().mark(AP),NP=br().mark(DP),RP=function(e){return{type:bn,payload:e}};function AP(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st([ft(DP),Ir(kn,OP),Ir(wn,PP)]);case 2:case"end":return e.stop()}}),CP)}function OP(e){var t=e.payload;return br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt(TP,t);case 2:case"end":return e.stop()}}),e)}))()}function PP(e){var t=e.payload;return br().mark((function e(){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.length){e.next=6;break}if(n=t.filter((function(e){return e.createdAt})),e.t0=n.length,!e.t0){e.next=6;break}return e.next=6,ut(RP(n));case 6:case"end":return e.stop()}}),e)}))()}function DP(){var e,t;return br().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=IP();case 1:return n.next=4,ot(e);case 4:return t=n.sent,n.next=7,ut(t);case 7:n.next=1;break;case 9:case"end":return n.stop()}}),NP)}var LP=function(){var e=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),MP="https://opentdb.com/api.php?amount=10&difficulty=easy",FP=br().mark(YP),UP=br().mark(JP),jP=br().mark(tD),zP=br().mark(nD),VP=br().mark(rD),BP=br().mark(iD),qP=br().mark(aD),HP=function(e){return e.quizState.questionsList},WP=function(e){return e.quizState.questionsDocId},GP=function(e){return e.quizState.isUserReadyToStartQuiz},ZP=function(e){return e.quizState.currentUserReadiness[0].userReadinessDocId},KP=function(e){return e.quizState.correctAnswersCount},QP=function(e){return e.quizState.correctAnswersCountDocId};function YP(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st([lt(tD),Ir(En,XP),Ir(Zn,JP),Ir(Kn,$P),Ir(Qn,eD)]);case 2:case"end":return e.stop()}}),FP)}function XP(e){var t=e.payload;return br().mark((function e(){var n,r,i,a;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ut(nr(t));case 4:return e.next=6,ht(HP);case 6:n=e.sent,r=Dr(n),e.prev=8,r.s();case 10:if((i=r.n()).done){e.next=18;break}return a=i.value,e.next=14,ut(ar(a));case 14:return e.next=16,dt(1e4);case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),r.e(e.t0);case 23:return e.prev=23,r.f(),e.finish(23);case 26:return e.next=28,lt(aD);case 28:case"end":return e.stop()}}),e,null,[[8,20,23,26]])}))()}function JP(){var e,t,n,r;return br().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,ht(GP);case 2:return e=i.sent,i.next=5,ut(dr("correctAnswersCountDocId"));case 5:return i.next=7,ut(rr());case 7:return i.next=9,ht(QP);case 9:return t=i.sent,i.next=12,ut(sr("correctAnswersCountDocId"));case 12:if(i.t0=t,!i.t0){i.next=16;break}return i.next=16,lt(_C,{type:"usersResults",docId:t});case 16:if(e){i.next=34;break}return i.next=19,lt(kC);case 19:return n=i.sent,i.next=22,ut(hr(n));case 22:return i.next=24,ut(pr(!0));case 24:return i.next=26,ut(er({fieldType:"quizData",data:{isUserReadyToStartQuiz:!0,currentUserReadiness:n}}));case 26:return i.next=28,lt(wC);case 28:if(r=i.sent,i.t1=r,!i.t1){i.next=33;break}return i.next=33,lt(iD);case 33:return i.abrupt("return");case 34:return i.next=36,lt(nD);case 36:case"end":return i.stop()}}),UP)}function $P(e){var t=e.payload;return br().mark((function e(){var n;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht(QP);case 2:return n=e.sent,e.next=5,ut(sr("correctAnswersCountDocId"));case 5:if(e.t0=n,!e.t0){e.next=9;break}return e.next=9,lt(_C,{type:"usersResults",docId:n});case 9:return e.next=11,ut(rr());case 11:return e.next=13,ut(ur(""));case 13:return e.next=15,ut(fr());case 15:return e.next=17,ut(Jn());case 17:return e.next=19,ut(tr(t));case 19:case"end":return e.stop()}}),e)}))()}function eD(e){var t=e.payload;return br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(lr(t));case 2:case"end":return e.stop()}}),e)}))()}function tD(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(cr());case 2:case"end":return e.stop()}}),jP)}function nD(){var e;return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ht(ZP);case 2:return e=t.sent,t.next=5,lt(_C,{type:"usersReadiness",docId:e});case 5:return t.next=7,ut(er({fieldType:"quizData",data:{currentUserReadiness:[],isUserReadyToStartQuiz:!1}}));case 7:return t.next=9,ut(pr(!1));case 9:case"end":return t.stop()}}),zP)}function rD(){var e;return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ut(or());case 2:return t.next=4,ut(Xn());case 4:return t.next=6,ht(WP);case 6:if(e=t.sent,t.t0=e,!t.t0){t.next=11;break}return t.next=11,lt(_C,{type:"questions",docId:e});case 11:case"end":return t.stop()}}),VP)}function iD(){var e,t,n;return br().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,lt(LP,MP);case 3:return e=r.sent,t=e.results,r.next=7,lt(gC,t);case 7:return n=r.sent,r.next=10,ut(ir(n));case 10:r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),console.error("error",r.t0);case 15:case"end":return r.stop()}}),BP,null,[[0,12]])}function aD(){var e,t;return br().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,lt(nD);case 2:return n.next=4,ut(tr(!0));case 4:return n.next=6,lt(rD);case 6:return n.next=8,ht(KP);case 8:return e=n.sent,n.next=11,lt(bC,e);case 11:if(!(t=n.sent)){n.next=15;break}return n.next=15,ut(er({fieldType:"correctAnswersCountDocId",data:t}));case 15:return n.next=17,ut(ur(t));case 17:case"end":return n.stop()}}),qP)}var oD=br().mark(hD),uD=br().mark(pD),sD=br().mark(vD),cD=br().mark(mD),lD=br().mark(yD),fD=function(e){return e.userState};function hD(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st([lt(pD),Ir(qn,mD),Ir(cn,yD),Ir(Hn,gD),Ir(Wn,vD),Ir(Gn,dD)]);case 2:case"end":return e.stop()}}),oD)}function dD(e){var t=e.payload;return br().mark((function e(){var n,r;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,lt([localStorage,"getItem"],t);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,lt([JSON,"parse"],n);case 9:return r=e.sent,e.next=12,ut(ur(r));case 12:case"end":return e.stop()}}),e)}))()}function pD(){var e,t,n,r,i;return br().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ht(fD);case 2:if(e=a.sent,t=e.uid,n=e.docId,!t&&!n){a.next=7;break}return a.abrupt("return",!1);case 7:return a.next=9,lt([localStorage,"getItem"],"authData");case 9:if(r=a.sent){a.next=12;break}return a.abrupt("return");case 12:return a.next=14,lt([JSON,"parse"],r);case 14:return i=a.sent,a.next=17,ut(mn({userId:i.uid,userDocId:i.docId}));case 17:case"end":return a.stop()}}),uD)}function vD(){var e,t,n,r,i;return br().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ht(fD);case 2:if(e=a.sent,t=e.uid,n=e.docId,!t&&!n){a.next=7;break}return a.abrupt("return",!1);case 7:return a.next=9,lt([localStorage,"getItem"],"quizData");case 9:if(r=a.sent){a.next=12;break}return a.abrupt("return");case 12:return a.next=14,lt([JSON,"parse"],r);case 14:return i=a.sent,a.next=17,ut(vr({currentUserReadiness:[i.currentUserReadiness],isUserReadyToStartQuiz:i.isUserReadyToStartQuiz}));case 17:case"end":return a.stop()}}),sD)}function mD(e){var t,n,r;return br().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.data,r=t.fieldType,i.next=3,lt([localStorage,"setItem"],r,JSON.stringify(n));case 3:case"end":return i.stop()}}),cD)}function yD(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt([localStorage,"clear"]);case 2:case"end":return e.stop()}}),lD)}function gD(e){var t=e.payload;return br().mark((function e(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt([localStorage,"removeItem"],t);case 2:case"end":return e.stop()}}),e)}))()}var kD=br().mark(bD);function bD(){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st([NC(),AP(),YP(),hD()]);case 2:case"end":return e.stop()}}),kD)}var wD,_D=bD;function xD(){return xD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xD.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(wD||(wD={}));var SD,ED="popstate";function ID(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function TD(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function CD(e,t){return{usr:e.state,key:e.key,idx:t}}function ND(e,t,n,r){return void 0===n&&(n=null),xD({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?AD(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function RD(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function AD(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function OD(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=wD.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=wD.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:m.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:RD(e);return ID(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(xD({},c.state,{idx:h}),""));var m={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(ED,p),f=e,function(){o.removeEventListener(ED,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=wD.Push;var r=ND(m.location,e,t);n&&n(r,e);var i=CD(r,h=d()+1),a=m.createHref(r);try{c.pushState(i,"",a)}catch(YC){if(YC instanceof DOMException&&"DataCloneError"===YC.name)throw YC;o.location.assign(a)}s&&f&&f({action:l,location:m.location,delta:1})},replace:function(e,t){l=wD.Replace;var r=ND(m.location,e,t);n&&n(r,e);var i=CD(r,h=d()),a=m.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:m.location,delta:0})},go:function(e){return c.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(SD||(SD={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function PD(e,t,n){void 0===n&&(n="/");var r=ZD(("string"===typeof t?AD(t):t).pathname||"/",n);if(null==r)return null;var i=DD(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=HD(i[o],GD(r));return a}function DD(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(ID(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=XD([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(ID(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),DD(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:qD(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=Dr(LD(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function LD(e){var t=e.split("/");if(0===t.length)return[];var n=bb(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=LD(i.join("/")),s=[];return s.push.apply(s,w(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,w(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var MD=/^:\w+$/,FD=3,UD=2,jD=1,zD=10,VD=-2,BD=function(e){return"*"===e};function qD(e,t){var n=e.split("/"),r=n.length;return n.some(BD)&&(r+=VD),t&&(r+=UD),n.filter((function(e){return!BD(e)})).reduce((function(e,t){return e+(MD.test(t)?FD:""===t?jD:zD)}),r)}function HD(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=WD({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:XD([i,l.pathname]),pathnameBase:JD(XD([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=XD([i,l.pathnameBase]))}return a}function WD(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);TD("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=k(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1),l=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(YC){return TD(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+YC+")."),e}}(c[n]||"",t),e}),{});return{params:l,pathname:u,pathnameBase:s,pattern:e}}function GD(e){try{return decodeURI(e)}catch(YC){return TD(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+YC+")."),e}}function ZD(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function KD(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function QD(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function YD(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=AD(e):(ID(!(i=xD({},e)).pathname||!i.pathname.includes("?"),KD("?","pathname","search",i)),ID(!i.pathname||!i.pathname.includes("#"),KD("#","pathname","hash",i)),ID(!i.search||!i.search.includes("#"),KD("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?AD(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:$D(a),hash:eL(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var XD=function(e){return e.join("/").replace(/\/\/+/g,"/")},JD=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},$D=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},eL=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},tL=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return Pr(n)}(qr(Error));function nL(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var rL=["post","put","patch","delete"],iL=(new Set(rL),["get"].concat(rL));new Set(iL),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function aL(){return aL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aL.apply(this,arguments)}var oL=t.createContext(null);var uL=t.createContext(null);var sL=t.createContext(null);var cL=t.createContext(null);var lL=t.createContext(null);var fL=t.createContext({outlet:null,matches:[],isDataRoute:!1});var hL=t.createContext(null);function dL(){return null!=t.useContext(lL)}function pL(){return dL()||ID(!1),t.useContext(lL).location}function vL(e){t.useContext(cL).static||t.useLayoutEffect(e)}function mL(){return t.useContext(fL).isDataRoute?function(){var e=IL(SL.UseNavigateStable).router,n=CL(EL.UseNavigateStable),r=t.useRef(!1);return vL((function(){r.current=!0})),t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,aL({fromRouteId:n},i)))}),[e,n])}():function(){dL()||ID(!1);var e=t.useContext(oL),n=t.useContext(cL),r=n.basename,i=n.navigator,a=t.useContext(fL).matches,o=pL().pathname,u=JSON.stringify(QD(a).map((function(e){return e.pathnameBase}))),s=t.useRef(!1);return vL((function(){s.current=!0})),t.useCallback((function(t,n){if(void 0===n&&(n={}),s.current)if("number"!==typeof t){var a=YD(t,JSON.parse(u),o,"path"===n.relative);null==e&&"/"!==r&&(a.pathname="/"===a.pathname?r:XD([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(t)}),[r,i,u,o,e])}()}function yL(e,n){var r=(void 0===n?{}:n).relative,i=t.useContext(fL).matches,a=pL().pathname,o=JSON.stringify(QD(i).map((function(e){return e.pathnameBase})));return t.useMemo((function(){return YD(e,JSON.parse(o),a,"path"===r)}),[e,o,a,r])}function gL(e,n,r){dL()||ID(!1);var i,a=t.useContext(cL).navigator,o=t.useContext(fL).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,pL());if(n){var f,h="string"===typeof n?AD(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||ID(!1),i=h}else i=l;var d=i.pathname||"/",p=PD(e,{pathname:"/"===c?d:d.slice(c.length)||"/"});var v=xL(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:XD([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:XD([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&v?t.createElement(lL.Provider,{value:{location:aL({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:wD.Pop}},v):v}function kL(){var e=function(){var e,n=t.useContext(hL),r=TL(EL.UseRouteError),i=CL(EL.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=nL(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var bL=t.createElement(kL,null),wL=function(e){Fr(r,e);var n=Vr(r);function r(e){var t;return Rr(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return Pr(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(fL.Provider,{value:this.props.routeContext},t.createElement(hL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(t.Component);function _L(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(oL);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(fL.Provider,{value:n},i)}function xL(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}var o=e,u=null==(i=r)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||ID(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;r&&(c=i.route.errorElement||bL);var l=n.concat(o.slice(0,a+1)),f=function(){var n;return n=s?c:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(_L,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(wL,{location:r.location,revalidation:r.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}var SL=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(SL||{}),EL=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(EL||{});function IL(e){var n=t.useContext(oL);return n||ID(!1),n}function TL(e){var n=t.useContext(uL);return n||ID(!1),n}function CL(e){var n=function(e){var n=t.useContext(fL);return n||ID(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||ID(!1),r.route.id}r.startTransition;function NL(e){var n=e.to,r=e.replace,i=e.state,a=e.relative;dL()||ID(!1);var o=t.useContext(fL).matches,u=pL().pathname,s=mL(),c=YD(n,QD(o).map((function(e){return e.pathnameBase})),u,"path"===a),l=JSON.stringify(c);return t.useEffect((function(){return s(JSON.parse(l),{replace:r,state:i,relative:a})}),[s,l,a,r,i]),null}function RL(e){ID(!1)}function AL(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?wD.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;dL()&&ID(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=AD(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,b=void 0===k?"":k,w=p.state,_=void 0===w?null:w,x=p.key,S=void 0===x?"default":x,E=t.useMemo((function(){var e=ZD(m,h);return null==e?null:{location:{pathname:e,search:g,hash:b,state:_,key:S},navigationType:s}}),[h,m,g,b,_,S,s]);return null==E?null:t.createElement(cL.Provider,{value:d},t.createElement(lL.Provider,{children:a,value:E}))}function OL(e){var t=e.children,n=e.location;return gL(LL(t),n)}var PL=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(PL||{}),DL=new Promise((function(){}));t.Component;function LL(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat(w(n),[i]);if(e.type!==t.Fragment){e.type!==RL&&ID(!1),e.props.index&&e.props.children&&ID(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=LL(e.props.children,a)),r.push(o)}else r.push.apply(r,LL(e.props.children,a))}})),r}var ML=n.p+"static/media/correct-answer-image.svg.3d01f9a1aeab72efc481.png",FL=n.p+"static/media/not-correct-answer-image.374b2e258ce8389e62cf.png",UL=n(343),jL=H((function(e){return{text:oM(e),answers:cM(e),correctAnswer:uM(e),answerResultList:nM(e)}}),(function(e){return{setAnswersListStore:function(t){return e(function(e){return{type:Tn,payload:e}}(t))},setCorrectAnswersCountStore:function(){return e({type:Mn,payload:t});var t}}}))((function(e){var n=e.text,r=e.answers,i=e.correctAnswer,a=e.answerResultList,o=e.setAnswersListStore,u=e.setCorrectAnswersCountStore,s=k((0,t.useState)(!1),2),c=s[0],l=s[1];(0,t.useEffect)((function(){l(!1)}),[n,r,i]);return(0,UL.jsxs)("div",{className:"game-wrapper",children:[a.length?(0,UL.jsx)("div",{className:"answer-result-images",children:a.map((function(e,t){return e?(0,UL.jsx)("div",{className:"image-wrapper",children:(0,UL.jsx)("img",{src:ML,alt:"Correct Answer",className:"image"})},t):(0,UL.jsx)("img",{src:FL,alt:"Not Correct Answer",className:"image"},t)}))}):null,(0,UL.jsxs)("div",{className:"game-window",children:[(0,UL.jsx)("div",{className:"question-wrapper",children:(0,UL.jsx)("span",{className:"question-text",children:n})}),(0,UL.jsx)("div",{className:"answer-buttons",children:null===r||void 0===r?void 0:r.map((function(e,t){return(0,UL.jsx)("button",{onClick:function(){return function(e){var t=e===i;l(!0),o(t),t&&u()}(e)},className:"button ".concat(e!==i?"wrong-answer":""," ").concat(c?"disabled":""),disabled:c,children:e},t)}))})]})]})})),zL=function(e){var t=e.name,n=e.image,r=e.scores;return(0,UL.jsxs)("div",{className:"scores-wrapper",children:[(0,UL.jsx)("div",{className:"image-wrapper",children:(0,UL.jsx)("img",{src:n,className:"user-image",alt:""})}),(0,UL.jsx)("span",{className:"user-name",children:t}),(0,UL.jsx)("span",{className:"scores",children:r})]})},VL=H((function(e){return{usersResultsList:rM(e)}}),(function(e){return{setIsShowResults:function(t){return e(function(e){return{type:Kn,payload:e}}(t))}}}))((function(e){var t=e.usersResultsList,n=e.setIsShowResults;return(0,UL.jsxs)("div",{className:"results-wrapper",children:[t.length?(0,UL.jsxs)("div",{className:"scores-container",children:[(0,UL.jsxs)("div",{className:"scores-header",children:[(0,UL.jsx)("span",{className:"user",children:"user"}),(0,UL.jsx)("span",{className:"scores",children:"scores"})]}),t.map((function(e){return(0,UL.jsx)(zL,{name:e.displayName,image:e.photoURL,scores:e.correctAnswersCount},e.photoURL)}))]}):null,(0,UL.jsx)("div",{className:"button-wrapper",children:(0,UL.jsx)("button",{onClick:function(){return n(!1)},className:"button",children:"ok"})})]})})),BL=function(e){var t=e.callback,n=e.isUserReadyToStartQuiz;return(0,UL.jsxs)("div",{className:"ready-for-game-wrapper",children:[(0,UL.jsx)("span",{className:"ready-text",children:n?"Ready to start The Quiz":"START if you are ready to start Quiz"}),(0,UL.jsx)("button",{onClick:t,className:"custom-button ".concat(n?"cancel-button":"start-button"),children:n?"CANCEL":"START"})]})},qL=H((function(e){return{isShowResults:eM(e),isQuizInProcess:aM(e),isUserReadyToStartQuiz:iM(e)}}),(function(e){return{setIsReadyForGame:function(t){return e(function(e){return{type:Zn,payload:e}}(t))}}}))((function(e){var t=e.isShowResults,n=e.isQuizInProcess,r=e.setIsReadyForGame,i=e.isUserReadyToStartQuiz;return(0,UL.jsx)("div",{className:"quiz-wrapper",children:n?t?(0,UL.jsx)(VL,{}):(0,UL.jsx)(jL,{}):(0,UL.jsx)(BL,{callback:r,isUserReadyToStartQuiz:i})})})),HL=function(e){var t=e.userId,n=e.message,r=t===n.uid;return(0,UL.jsxs)("div",{className:"user-message-wrapper ".concat(r?"self-message":""),children:[(0,UL.jsxs)("div",{className:"message-info",children:[(0,UL.jsx)("img",{src:n.photoURL,alt:"User_photo",className:"user-photo"}),(0,UL.jsx)("div",{className:"message-name",children:(0,UL.jsx)("span",{className:"name",children:n.displayName})})]}),(0,UL.jsx)("div",{className:"message-container",children:(0,UL.jsx)("span",{className:"message-text",children:n.text})})]})},WL=function(e){var n=e.sendMessage,r=k((0,t.useState)(""),2),i=r[0],a=r[1],o=(0,t.useRef)();return(0,UL.jsxs)("div",{className:"text-field-container",children:[(0,UL.jsx)("textarea",{ref:o,value:i,onChange:function(e){var t=e.target.value;a(t)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),i&&(n(i),a("")))},placeholder:"Send a message...",className:"text-field"}),(0,UL.jsx)("div",{className:"text-field-button",onClick:function(){i&&(n(i),a(""))},children:"SEND"})]})},GL=H((function(e){return{userId:JL(e),messages:$L(e)}}),(function(e){return{sendMessage:function(t){return e(function(e){return{type:kn,payload:e}}(t))}}}))((function(e){var n=e.userId,r=e.messages,i=e.sendMessage,a=(0,t.useRef)(null);return(0,t.useEffect)((function(){a&&a.current.addEventListener("DOMNodeInserted",(function(e){var t=e.currentTarget;t.scroll({top:t.scrollHeight,behavior:"smooth"})}))}),[]),(0,t.useLayoutEffect)((function(){var e=a.current;e.scroll({top:e.scrollHeight,behavior:"smooth"})}),[r]),(0,UL.jsxs)("div",{className:"chat-container",children:[(0,UL.jsx)("div",{className:"messages-wrapper",ref:a,children:null===r||void 0===r?void 0:r.map((function(e){return(0,UL.jsx)(HL,{userId:n,message:e},e.createdAt)}))}),(0,UL.jsx)(WL,{type:"text",sendMessage:i})]})})),ZL="NOT_FOUND";var KL=function(e,t){return e===t};function QL(e,t){var n="object"===typeof t?t:{equalityCheck:t},r=n.equalityCheck,i=void 0===r?KL:r,a=n.maxSize,o=void 0===a?1:a,u=n.resultEqualityCheck,s=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}}(i),c=1===o?function(e){var t;return{get:function(n){return t&&e(t.key,n)?t.value:ZL},put:function(e,n){t={key:e,value:n}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}(s):function(e,t){var n=[];function r(e){var r=n.findIndex((function(n){return t(e,n.key)}));if(r>-1){var i=n[r];return r>0&&(n.splice(r,1),n.unshift(i)),i.value}return ZL}return{get:r,put:function(t,i){r(t)===ZL&&(n.unshift({key:t,value:i}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(o,s);function l(){var t=c.get(arguments);if(t===ZL){if(t=e.apply(null,arguments),u){var n=c.getEntries().find((function(e){return u(e.value,t)}));n&&(t=n.value)}c.put(arguments,t)}return t}return l.clearCache=function(){return c.clear()},l}function YL(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a,o=0,u={memoizeOptions:void 0},s=r.pop();if("object"===typeof s&&(u=s,s=r.pop()),"function"!==typeof s)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof s+"]");var c=u.memoizeOptions,l=void 0===c?n:c,f=Array.isArray(l)?l:[l],h=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var n=t.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}(r),d=e.apply(void 0,[function(){return o++,s.apply(null,arguments)}].concat(f)),p=e((function(){for(var e=[],t=h.length,n=0;n<t;n++)e.push(h[n].apply(null,arguments));return a=d.apply(null,e)}));return Object.assign(p,{resultFunc:s,memoizedResultFunc:d,dependencies:h,lastResult:function(){return a},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),p}}var XL=YL(QL);var JL=function(e){return e.userState.userId},$L=function(e){return e.chatState.messages},eM=function(e){return e.quizState.isShowResults},tM=function(e){return e.quizState.currentQuestion},nM=function(e){return e.quizState.answersList},rM=function(e){return e.quizState.usersResultsList},iM=function(e){return e.quizState.isUserReadyToStartQuiz},aM=XL((function(e){return e.quizState.questionsList}),eM,(function(e,t){return e.length||t})),oM=XL(tM,(function(e){if(e.length)return e[0].question})),uM=XL(tM,(function(e){if(e.length)return e[0].correct_answer})),sM=XL(tM,(function(e){if(e.length)return e[0].incorrect_answers})),cM=XL(uM,sM,(function(e,t){if(e&&t.length)return[].concat(w(t),[e]).sort()})),lM=function(){return(0,UL.jsxs)("div",{className:"chat-quiz-wrapper",children:[(0,UL.jsx)(qL,{}),(0,UL.jsx)(GL,{})]})};var fM=H(null,(function(e){return{signInWithGoogle:function(){return e({type:un})}}}))((function(e){var t=e.signInWithGoogle;return(0,UL.jsx)("div",{className:"login-wrapper",children:(0,UL.jsx)("button",{className:"login-btn",onClick:t,children:"Login with Google"})})})),hM=function(e){return e.userState.userId},dM=H((function(e){return{user:hM(e)}}))((function(e){return e.user?(0,UL.jsxs)(OL,{children:[(0,UL.jsx)(RL,{path:"/main",element:(0,UL.jsx)(lM,{}),exact:!0}),(0,UL.jsx)(RL,{path:"/chat",element:(0,UL.jsx)(GL,{})}),(0,UL.jsx)(RL,{path:"/quiz",element:(0,UL.jsx)(qL,{})}),(0,UL.jsx)(RL,{path:"*",element:(0,UL.jsx)(NL,{to:"/main"})})]}):(0,UL.jsxs)(OL,{children:[(0,UL.jsx)(RL,{path:"/login",element:(0,UL.jsx)(fM,{}),exact:!0}),(0,UL.jsx)(RL,{path:"*",element:(0,UL.jsx)(NL,{to:"/login"})})]})})),pM=n(954),vM=n.n(pM);function mM(e,t){var n=(0,an.Z)({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}var yM=t.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")},iconPrefixCls:"anticon"});yM.Consumer;var gM=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)};var kM={},bM=[];function wM(e,t){}function _M(e,t){}function xM(e,t,n){t||kM[n]||(e(!1,n),kM[n]=!0)}function SM(e,t){xM(wM,e,t)}SM.preMessage=function(e){bM.push(e)},SM.resetWarned=function(){kM={}},SM.noteOnce=function(e,t){xM(_M,e,t)};var EM=SM;var IM=function(){function e(t){Rr(this,e),(0,Nr.Z)(this,"instanceId",void 0),(0,Nr.Z)(this,"cache",new Map),this.instanceId=t}return Pr(e,[{key:"get",value:function(e){return this.cache.get(e.join("%"))||null}},{key:"update",value:function(e,t){var n=e.join("%"),r=t(this.cache.get(n));null===r?this.cache.delete(n):this.cache.set(n,r)}}]),e}(),TM=IM,CM="data-token-hash",NM="data-css-hash",RM="__cssinjs_instance__";function AM(){var e=Math.random().toString(12).slice(2);if("undefined"!==typeof document&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(NM,"]"))||[],n=document.head.firstChild;Array.from(t).forEach((function(t){t[RM]=t[RM]||e,t[RM]===e&&document.head.insertBefore(t,n)}));var r={};Array.from(document.querySelectorAll("style[".concat(NM,"]"))).forEach((function(t){var n,i=t.getAttribute(NM);r[i]?t[RM]===e&&(null===(n=t.parentNode)||void 0===n||n.removeChild(t)):r[i]=!0}))}return new TM(e)}var OM=t.createContext({hashPriority:"low",cache:AM(),defaultCache:!0}),PM=OM;function DM(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}var LM="data-rc-order",MM="data-rc-priority",FM="rc-util-key",UM=new Map;function jM(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):FM}function zM(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function VM(e){return Array.from((UM.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function BM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!DM())return null;var n=t.csp,r=t.prepend,i=t.priority,a=void 0===i?0:i,o=function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(r),u="prependQueue"===o,s=document.createElement("style");s.setAttribute(LM,o),u&&a&&s.setAttribute(MM,"".concat(a)),null!==n&&void 0!==n&&n.nonce&&(s.nonce=null===n||void 0===n?void 0:n.nonce),s.innerHTML=e;var c=zM(t),l=c.firstChild;if(r){if(u){var f=VM(c).filter((function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(LM)))return!1;var t=Number(e.getAttribute(MM)||0);return a>=t}));if(f.length)return c.insertBefore(s,f[f.length-1].nextSibling),s}c.insertBefore(s,l)}else c.appendChild(s);return s}function qM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return VM(zM(t)).find((function(n){return n.getAttribute(jM(t))===e}))}function HM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=qM(e,t);n&&zM(t).removeChild(n)}function WM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){var n=UM.get(e);if(!n||!function(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}(document,n)){var r=BM("",t),i=r.parentNode;UM.set(e,i),e.removeChild(r)}}(zM(n),n);var r=qM(t,n);if(r){var i,a,o;if(null!==(i=n.csp)&&void 0!==i&&i.nonce&&r.nonce!==(null===(a=n.csp)||void 0===a?void 0:a.nonce))r.nonce=null===(o=n.csp)||void 0===o?void 0:o.nonce;return r.innerHTML!==e&&(r.innerHTML=e),r}var u=BM(e,n);return u.setAttribute(jM(n),t),u}var GM=function(){function e(){Rr(this,e),(0,Nr.Z)(this,"cache",void 0),(0,Nr.Z)(this,"keys",void 0),(0,Nr.Z)(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Pr(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={map:this.cache};return e.forEach((function(e){var t,n;i?i=null===(t=i)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.get(e):i=void 0})),null!==(t=i)&&void 0!==t&&t.value&&r&&(i.value[1]=this.cacheCallTimes++),null===(n=i)||void 0===n?void 0:n.value}},{key:"get",value:function(e){var t;return null===(t=this.internalGet(e,!0))||void 0===t?void 0:t[0]}},{key:"has",value:function(e){return!!this.internalGet(e)}},{key:"set",value:function(t,n){var r=this;if(!this.has(t)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var i=this.keys.reduce((function(e,t){var n=k(e,2)[1];return r.internalGet(t)[1]<n?[t,r.internalGet(t)[1]]:e}),[this.keys[0],this.cacheCallTimes]),a=k(i,1)[0];this.delete(a)}this.keys.push(t)}var o=this.cache;t.forEach((function(e,i){if(i===t.length-1)o.set(e,{value:[n,r.cacheCallTimes++]});else{var a=o.get(e);a?a.map||(a.map=new Map):o.set(e,{map:new Map}),o=o.get(e).map}}))}},{key:"deleteByPath",value:function(e,t){var n,r=e.get(t[0]);if(1===t.length)return r.map?e.set(t[0],{map:r.map}):e.delete(t[0]),null===(n=r.value)||void 0===n?void 0:n[0];var i=this.deleteByPath(r.map,t.slice(1));return r.map&&0!==r.map.size||r.value||e.delete(t[0]),i}},{key:"delete",value:function(e){if(this.has(e))return this.keys=this.keys.filter((function(t){return!function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,e)})),this.deleteByPath(this.cache,e)}}]),e}();(0,Nr.Z)(GM,"MAX_CACHE_SIZE",20),(0,Nr.Z)(GM,"MAX_CACHE_OFFSET",5);var ZM=0,KM=function(){function e(t){Rr(this,e),(0,Nr.Z)(this,"derivatives",void 0),(0,Nr.Z)(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=ZM,0===t.length&&t.length,ZM+=1}return Pr(e,[{key:"getDerivativeToken",value:function(e){return this.derivatives.reduce((function(t,n){return n(e,t)}),void 0)}}]),e}(),QM=new GM;var YM=new WeakMap;function XM(e){var t=YM.get(e)||"";return t||(Object.keys(e).forEach((function(n){var r=e[n];t+=n,r instanceof KM?t+=r.id:r&&"object"===(0,kr.Z)(r)?t+=XM(r):t+=r})),YM.set(e,t)),t}var JM="random-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),$M="_bAmBoO_";function eF(e,t,n){if(DM()){var r,i;WM(e,JM);var a=document.createElement("div");a.style.position="fixed",a.style.left="0",a.style.top="0",null===t||void 0===t||t(a),document.body.appendChild(a);var o=n?n(a):null===(r=getComputedStyle(a).content)||void 0===r?void 0:r.includes($M);return null===(i=a.parentNode)||void 0===i||i.removeChild(a),HM(JM),o}return!1}var tF=void 0;var nF=DM()?t.useLayoutEffect:t.useEffect,rF=function(e,n){var r=t.useRef(!0);nF((function(){return e(r.current)}),n),nF((function(){return r.current=!1,function(){r.current=!0}}),[])},iF=rF,aF=(0,an.Z)({},r).useInsertionEffect,oF=aF?function(e,t,n){return aF((function(){return e(),t()}),n)}:function(e,n,r){t.useMemo(e,r),iF((function(){return n(!0)}),r)},uF="undefined"!==typeof(0,an.Z)({},r).useInsertionEffect?function(e){var n=[],r=!1;return t.useEffect((function(){return r=!1,function(){r=!0,n.length&&n.forEach((function(e){return e()}))}}),e),function(e){r||n.push(e)}}:function(){return function(e){e()}},sF=uF;var cF=function(){return!1};function lF(e,n,r,i,a){var o=t.useContext(PM).cache,u=[e].concat(w(n)),s=u.join("_"),c=sF([s]),l=(cF(),function(e){o.update(u,(function(t){var n=k(t||[],2),i=n[0];var a=[void 0===i?0:i,n[1]||r()];return e?e(a):a}))});t.useMemo((function(){l()}),[s]);var f=o.get(u)[1];return oF((function(){null===a||void 0===a||a(f)}),(function(e){return l((function(t){var n=k(t,2),r=n[0],i=n[1];return e&&0===r&&(null===a||void 0===a||a(f)),[r+1,i]})),function(){o.update(u,(function(e){var t=k(e||[],2),n=t[0],r=void 0===n?0:n,a=t[1];return 0===r-1?(c((function(){return null===i||void 0===i?void 0:i(a,!1)})),null):[r-1,a]}))}}),[s]),f}var fF={},hF="css",dF=new Map;var pF=0;function vF(e,t){dF.set(e,(dF.get(e)||0)-1);var n=Array.from(dF.keys()),r=n.filter((function(e){return(dF.get(e)||0)<=0}));n.length-r.length>pF&&r.forEach((function(e){!function(e,t){"undefined"!==typeof document&&document.querySelectorAll("style[".concat(CM,'="').concat(e,'"]')).forEach((function(e){var n;e[RM]===t&&(null===(n=e.parentNode)||void 0===n||n.removeChild(e))}))}(e,t),dF.delete(e)}))}var mF=function(e,t,n,r){var i=n.getDerivativeToken(e),a=(0,an.Z)((0,an.Z)({},i),t);return r&&(a=r(a)),a};function yF(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,t.useContext)(PM).cache.instanceId,a=r.salt,o=void 0===a?"":a,u=r.override,s=void 0===u?fF:u,c=r.formatToken,l=r.getComputedToken,f=t.useMemo((function(){return Object.assign.apply(Object,[{}].concat(w(n)))}),[n]),h=t.useMemo((function(){return XM(f)}),[f]),d=t.useMemo((function(){return XM(s)}),[s]),p=lF("token",[o,e.id,h,d],(function(){var t=l?l(f,s,e):mF(f,s,e,c),n=function(e,t){return gM("".concat(t,"_").concat(XM(e)))}(t,o);t._tokenKey=n,function(e){dF.set(e,(dF.get(e)||0)+1)}(n);var r="".concat(hF,"-").concat(gM(n));return t._hashId=r,[t,r]}),(function(e){vF(e[0]._tokenKey,i)}));return p}var gF={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},kF="comm",bF="rule",wF="decl",_F="@import",xF="@keyframes",SF="@layer",EF=Math.abs,IF=String.fromCharCode;Object.assign;function TF(e){return e.trim()}function CF(e,t,n){return e.replace(t,n)}function NF(e,t){return e.indexOf(t)}function RF(e,t){return 0|e.charCodeAt(t)}function AF(e,t,n){return e.slice(t,n)}function OF(e){return e.length}function PF(e,t){return t.push(e),e}function DF(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function LF(e,t,n,r){switch(e.type){case SF:if(e.children.length)break;case _F:case wF:return e.return=e.return||e.value;case kF:return"";case xF:return e.return=e.value+"{"+DF(e.children,r)+"}";case bF:if(!OF(e.value=e.props.join(",")))return""}return OF(n=DF(e.children,r))?e.return=e.value+"{"+n+"}":""}var MF=1,FF=1,UF=0,jF=0,zF=0,VF="";function BF(e,t,n,r,i,a,o,u){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:MF,column:FF,length:o,return:"",siblings:u}}function qF(){return zF=jF>0?RF(VF,--jF):0,FF--,10===zF&&(FF=1,MF--),zF}function HF(){return zF=jF<UF?RF(VF,jF++):0,FF++,10===zF&&(FF=1,MF++),zF}function WF(){return RF(VF,jF)}function GF(){return jF}function ZF(e,t){return AF(VF,e,t)}function KF(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function QF(e){return MF=FF=1,UF=OF(VF=e),jF=0,[]}function YF(e){return VF="",e}function XF(e){return TF(ZF(jF-1,eU(91===e?e+2:40===e?e+1:e)))}function JF(e){for(;(zF=WF())&&zF<33;)HF();return KF(e)>2||KF(zF)>3?"":" "}function $F(e,t){for(;--t&&HF()&&!(zF<48||zF>102||zF>57&&zF<65||zF>70&&zF<97););return ZF(e,GF()+(t<6&&32==WF()&&32==HF()))}function eU(e){for(;HF();)switch(zF){case e:return jF;case 34:case 39:34!==e&&39!==e&&eU(zF);break;case 40:41===e&&eU(e);break;case 92:HF()}return jF}function tU(e,t){for(;HF()&&e+zF!==57&&(e+zF!==84||47!==WF()););return"/*"+ZF(t,jF-1)+"*"+IF(47===e?e:HF())}function nU(e){for(;!KF(WF());)HF();return ZF(e,jF)}function rU(e){return YF(iU("",null,null,null,[""],e=QF(e),0,[0],e))}function iU(e,t,n,r,i,a,o,u,s){for(var c=0,l=0,f=o,h=0,d=0,p=0,v=1,m=1,y=1,g=0,k="",b=i,w=a,_=r,x=k;m;)switch(p=g,g=HF()){case 40:if(108!=p&&58==RF(x,f-1)){-1!=NF(x+=CF(XF(g),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:x+=XF(g);break;case 9:case 10:case 13:case 32:x+=JF(p);break;case 92:x+=$F(GF()-1,7);continue;case 47:switch(WF()){case 42:case 47:PF(oU(tU(HF(),GF()),t,n,s),s);break;default:x+="/"}break;case 123*v:u[c++]=OF(x)*y;case 125*v:case 59:case 0:switch(g){case 0:case 125:m=0;case 59+l:-1==y&&(x=CF(x,/\f/g,"")),d>0&&OF(x)-f&&PF(d>32?uU(x+";",r,n,f-1,s):uU(CF(x," ","")+";",r,n,f-2,s),s);break;case 59:x+=";";default:if(PF(_=aU(x,t,n,c,l,i,u,k,b=[],w=[],f,a),a),123===g)if(0===l)iU(x,t,_,_,b,a,f,u,w);else switch(99===h&&110===RF(x,3)?100:h){case 100:case 108:case 109:case 115:iU(e,_,_,r&&PF(aU(e,_,_,0,0,i,u,k,i,b=[],f,w),w),i,w,f,u,r?b:w);break;default:iU(x,_,_,_,[""],w,0,u,w)}}c=l=d=0,v=y=1,k=x="",f=o;break;case 58:f=1+OF(x),d=p;default:if(v<1)if(123==g)--v;else if(125==g&&0==v++&&125==qF())continue;switch(x+=IF(g),g*v){case 38:y=l>0?1:(x+="\f",-1);break;case 44:u[c++]=(OF(x)-1)*y,y=1;break;case 64:45===WF()&&(x+=XF(HF())),h=WF(),l=f=OF(k=x+=nU(GF())),g++;break;case 45:45===p&&2==OF(x)&&(v=0)}}return a}function aU(e,t,n,r,i,a,o,u,s,c,l,f){for(var h=i-1,d=0===i?a:[""],p=function(e){return e.length}(d),v=0,m=0,y=0;v<r;++v)for(var g=0,k=AF(e,h+1,h=EF(m=o[v])),b=e;g<p;++g)(b=TF(m>0?d[g]+" "+k:CF(k,/&\f/g,d[g])))&&(s[y++]=b);return BF(e,t,n,0===i?bF:u,s,c,l,f)}function oU(e,t,n,r){return BF(e,t,n,kF,IF(zF),AF(e,2,-2),0,r)}function uU(e,t,n,r,i){return BF(e,t,n,wF,AF(e,0,r),AF(e,r+1,-1),r,i)}var sU,cU="data-ant-cssinjs-cache-path",lU="_FILE_STYLE__";var fU=!0;function hU(e){return function(){if(!sU&&(sU={},DM())){var e=document.createElement("div");e.className=cU,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);var t=getComputedStyle(e).content||"";(t=t.replace(/^"/,"").replace(/"$/,"")).split(";").forEach((function(e){var t=k(e.split(":"),2),n=t[0],r=t[1];sU[n]=r}));var n,r=document.querySelector("style[".concat(cU,"]"));r&&(fU=!1,null===(n=r.parentNode)||void 0===n||n.removeChild(r)),document.body.removeChild(e)}}(),!!sU[e]}var dU=DM(),pU="_multi_value_";function vU(e){return DF(rU(e),LF).replace(/\{%%%\:[^;];}/g,";")}var mU=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{root:!0,parentSelectors:[]},i=r.root,a=r.injectHash,o=r.parentSelectors,u=n.hashId,s=n.layer,c=(n.path,n.hashPriority),l=n.transformers,f=void 0===l?[]:l,h=(n.linters,""),d={};function p(t){var r=t.getName(u);if(!d[r]){var i=k(e(t.style,n,{root:!1,parentSelectors:o}),1)[0];d[r]="@keyframes ".concat(t.getName(u)).concat(i)}}var v=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.forEach((function(t){Array.isArray(t)?e(t,n):t&&n.push(t)})),n}(Array.isArray(t)?t:[t]);if(v.forEach((function(t){var r="string"!==typeof t||i?t:{};if("string"===typeof r)h+="".concat(r,"\n");else if(r._keyframe)p(r);else{var s=f.reduce((function(e,t){var n;return(null===t||void 0===t||null===(n=t.visit)||void 0===n?void 0:n.call(t,e))||e}),r);Object.keys(s).forEach((function(t){var r=s[t];if("object"!==(0,kr.Z)(r)||!r||"animationName"===t&&r._keyframe||function(e){return"object"===(0,kr.Z)(e)&&e&&("_skip_check_"in e||pU in e)}(r)){var l,f=function(e,t){var n=e.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())})),r=t;gF[e]||"number"!==typeof r||0===r||(r="".concat(r,"px")),"animationName"===e&&null!==t&&void 0!==t&&t._keyframe&&(p(t),r=t.getName(u)),h+="".concat(n,":").concat(r,";")},v=null!==(l=null===r||void 0===r?void 0:r.value)&&void 0!==l?l:r;"object"===(0,kr.Z)(r)&&null!==r&&void 0!==r&&r[pU]&&Array.isArray(v)?v.forEach((function(e){f(t,e)})):f(t,v)}else{var m=!1,y=t.trim(),g=!1;(i||a)&&u?y.startsWith("@")?m=!0:y=function(e,t,n){if(!t)return e;var r=".".concat(t),i="low"===n?":where(".concat(r,")"):r,a=e.split(",").map((function(e){var t,n=e.trim().split(/\s+/),r=n[0]||"",a=(null===(t=r.match(/^\w+/))||void 0===t?void 0:t[0])||"";return[r="".concat(a).concat(i).concat(r.slice(a.length))].concat(w(n.slice(1))).join(" ")}));return a.join(",")}(t,u,c):!i||u||"&"!==y&&""!==y||(y="",g=!0);var b=k(e(r,n,{root:g,injectHash:m,parentSelectors:[].concat(w(o),[y])}),2),_=b[0],x=b[1];d=(0,an.Z)((0,an.Z)({},d),x),h+="".concat(y).concat(_)}}))}})),i){if(s&&(void 0===tF&&(tF=eF("@layer ".concat(JM," { .").concat(JM,' { content: "').concat($M,'"!important; } }'),(function(e){e.className=JM}))),tF)){var m=s.split(","),y=m[m.length-1].trim();h="@layer ".concat(y," {").concat(h,"}"),m.length>1&&(h="@layer ".concat(s,"{%%%:%}").concat(h))}}else h="{".concat(h,"}");return[h,d]};function yU(){return null}function gU(e,n){var r=e.token,i=e.path,a=e.hashId,o=e.layer,u=e.nonce,s=e.clientOnly,c=e.order,l=void 0===c?0:c,f=t.useContext(PM),h=f.autoClear,d=(f.mock,f.defaultCache),p=f.hashPriority,v=f.container,m=f.ssrInline,y=f.transformers,g=f.linters,b=f.cache,x=r._tokenKey,S=[x].concat(w(i)),E=dU;var I=lF("style",S,(function(){var e=S.join("|");if(hU(e)){var t=function(e){var t=sU[e],n=null;if(t&&DM())if(fU)n=lU;else{var r=document.querySelector("style[".concat(NM,'="').concat(sU[e],'"]'));r?n=r.innerHTML:delete sU[e]}return[n,t]}(e),r=k(t,2),u=r[0],c=r[1];if(u)return[u,x,c,{},s,l]}var f=n(),h=k(mU(f,{hashId:a,hashPriority:p,layer:o,path:i.join("-"),transformers:y,linters:g}),2),d=h[0],v=h[1],m=vU(d),b=function(e,t){return gM("".concat(e.join("%")).concat(t))}(S,m);return[m,x,b,v,s,l]}),(function(e,t){var n=k(e,3)[2];(t||h)&&dU&&HM(n,{mark:NM})}),(function(e){var t=k(e,4),n=t[0],r=(t[1],t[2]),i=t[3];if(E&&n!==lU){var a={mark:NM,prepend:"queue",attachTo:v,priority:l},o="function"===typeof u?u():u;o&&(a.csp={nonce:o});var s=WM(n,r,a);s[RM]=b.instanceId,s.setAttribute(CM,x),Object.keys(i).forEach((function(e){WM(vU(i[e]),"_effect-".concat(e),a)}))}})),T=k(I,3),C=T[0],N=T[1],R=T[2];return function(e){var n,r;m&&!E&&d?n=t.createElement("style",_({},(r={},(0,Nr.Z)(r,CM,N),(0,Nr.Z)(r,NM,R),r),{dangerouslySetInnerHTML:{__html:C}})):n=t.createElement(yU,null);return t.createElement(t.Fragment,null,n,e)}}function kU(e){return e.notSplit=!0,e}kU(["borderTop","borderBottom"]),kU(["borderTop"]),kU(["borderBottom"]),kU(["borderLeft","borderRight"]),kU(["borderLeft"]),kU(["borderRight"]);function bU(e){var n=t.useRef(!1),r=k(t.useState(e),2),i=r[0],a=r[1];return t.useEffect((function(){return n.current=!1,function(){n.current=!0}}),[]),[i,function(e,t){t&&n.current||a(e)}]}var wU=n(468);function _U(e,t){"function"===typeof e?e(t):"object"===(0,kr.Z)(e)&&e&&"current"in e&&(e.current=t)}function xU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return e}));return r.length<=1?r[0]:function(e){t.forEach((function(t){_U(t,e)}))}}function SU(e){var t,n,r=(0,wU.isMemo)(e)?e.type.type:e.type;return!!("function"!==typeof r||null!==(t=r.prototype)&&void 0!==t&&t.render)&&!!("function"!==typeof e||null!==(n=e.prototype)&&void 0!==n&&n.render)}"undefined"===typeof Reflect?Object.keys:Reflect.ownKeys;var EU=function(e){var t;return{a:(t={color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:"color ".concat(e.motionDurationSlow),"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}},(0,Nr.Z)(t,"&:active,\n  &:hover",{textDecoration:e.linkHoverDecoration,outline:0}),(0,Nr.Z)(t,"&:focus",{textDecoration:e.linkFocusDecoration,outline:0}),(0,Nr.Z)(t,"&[disabled]",{color:e.colorTextDisabled,cursor:"not-allowed"}),t)}},IU=function(e,t){var n=e.fontFamily,r=e.fontSize,i='[class^="'.concat(t,'"], [class*=" ').concat(t,'"]');return(0,Nr.Z)({},i,(0,Nr.Z)({fontFamily:n,fontSize:r,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}},i,{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}))},TU=function(e){return{outline:"".concat(e.lineWidthFocus,"px solid ").concat(e.colorPrimaryBorder),outlineOffset:1,transition:"outline-offset 0s, outline 0s"}},CU="5.8.4";function NU(e,t){(function(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function RU(e){return Math.min(1,Math.max(0,e))}function AU(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function OU(e){return e<=1?"".concat(100*Number(e),"%"):e}function PU(e){return 1===e.length?"0"+e:String(e)}function DU(e,t,n){e=NU(e,255),t=NU(t,255),n=NU(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),a=0,o=0,u=(r+i)/2;if(r===i)o=0,a=0;else{var s=r-i;switch(o=u>.5?s/(2-r-i):s/(r+i),r){case e:a=(t-n)/s+(t<n?6:0);break;case t:a=(n-e)/s+2;break;case n:a=(e-t)/s+4}a/=6}return{h:a,s:o,l:u}}function LU(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function MU(e,t,n){e=NU(e,255),t=NU(t,255),n=NU(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),a=0,o=r,u=r-i,s=0===r?0:u/r;if(r===i)a=0;else{switch(r){case e:a=(t-n)/u+(t<n?6:0);break;case t:a=(n-e)/u+2;break;case n:a=(e-t)/u+4}a/=6}return{h:a,s:s,v:o}}function FU(e,t,n,r){var i=[PU(Math.round(e).toString(16)),PU(Math.round(t).toString(16)),PU(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function UU(e){return Math.round(255*parseFloat(e)).toString(16)}function jU(e){return zU(e)/255}function zU(e){return parseInt(e,16)}var VU={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function BU(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,a=null,o=!1,u=!1;return"string"===typeof e&&(e=function(e){if(e=e.trim().toLowerCase(),0===e.length)return!1;var t=!1;if(VU[e])e=VU[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=GU.rgb.exec(e);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=GU.rgba.exec(e),n)return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=GU.hsl.exec(e),n)return{h:n[1],s:n[2],l:n[3]};if(n=GU.hsla.exec(e),n)return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=GU.hsv.exec(e),n)return{h:n[1],s:n[2],v:n[3]};if(n=GU.hsva.exec(e),n)return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=GU.hex8.exec(e),n)return{r:zU(n[1]),g:zU(n[2]),b:zU(n[3]),a:jU(n[4]),format:t?"name":"hex8"};if(n=GU.hex6.exec(e),n)return{r:zU(n[1]),g:zU(n[2]),b:zU(n[3]),format:t?"name":"hex"};if(n=GU.hex4.exec(e),n)return{r:zU(n[1]+n[1]),g:zU(n[2]+n[2]),b:zU(n[3]+n[3]),a:jU(n[4]+n[4]),format:t?"name":"hex8"};if(n=GU.hex3.exec(e),n)return{r:zU(n[1]+n[1]),g:zU(n[2]+n[2]),b:zU(n[3]+n[3]),format:t?"name":"hex"};return!1}(e)),"object"===typeof e&&(ZU(e.r)&&ZU(e.g)&&ZU(e.b)?(t=function(e,t,n){return{r:255*NU(e,255),g:255*NU(t,255),b:255*NU(n,255)}}(e.r,e.g,e.b),o=!0,u="%"===String(e.r).substr(-1)?"prgb":"rgb"):ZU(e.h)&&ZU(e.s)&&ZU(e.v)?(r=OU(e.s),i=OU(e.v),t=function(e,t,n){e=6*NU(e,360),t=NU(t,100),n=NU(n,100);var r=Math.floor(e),i=e-r,a=n*(1-t),o=n*(1-i*t),u=n*(1-(1-i)*t),s=r%6;return{r:255*[n,o,a,a,u,n][s],g:255*[u,n,n,o,a,a][s],b:255*[a,a,u,n,n,o][s]}}(e.h,r,i),o=!0,u="hsv"):ZU(e.h)&&ZU(e.s)&&ZU(e.l)&&(r=OU(e.s),a=OU(e.l),t=function(e,t,n){var r,i,a;if(e=NU(e,360),t=NU(t,100),n=NU(n,100),0===t)i=n,a=n,r=n;else{var o=n<.5?n*(1+t):n+t-n*t,u=2*n-o;r=LU(u,o,e+1/3),i=LU(u,o,e),a=LU(u,o,e-1/3)}return{r:255*r,g:255*i,b:255*a}}(e.h,r,a),o=!0,u="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=AU(n),{ok:o,format:e.format||u,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var qU="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),HU="[\\s|\\(]+(".concat(qU,")[,|\\s]+(").concat(qU,")[,|\\s]+(").concat(qU,")\\s*\\)?"),WU="[\\s|\\(]+(".concat(qU,")[,|\\s]+(").concat(qU,")[,|\\s]+(").concat(qU,")[,|\\s]+(").concat(qU,")\\s*\\)?"),GU={CSS_UNIT:new RegExp(qU),rgb:new RegExp("rgb"+HU),rgba:new RegExp("rgba"+WU),hsl:new RegExp("hsl"+HU),hsla:new RegExp("hsla"+WU),hsv:new RegExp("hsv"+HU),hsva:new RegExp("hsva"+WU),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function ZU(e){return Boolean(GU.CSS_UNIT.exec(String(e)))}var KU=2,QU=.16,YU=.05,XU=.05,JU=.15,$U=5,ej=4,tj=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function nj(e){var t=MU(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function rj(e){var t=e.r,n=e.g,r=e.b;return"#".concat(FU(t,n,r,!1))}function ij(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-KU*t:Math.round(e.h)+KU*t:n?Math.round(e.h)+KU*t:Math.round(e.h)-KU*t)<0?r+=360:r>=360&&(r-=360),r}function aj(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-QU*t:t===ej?e.s+QU:e.s+YU*t)>1&&(r=1),n&&t===$U&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function oj(e,t,n){var r;return(r=n?e.v+XU*t:e.v-JU*t)>1&&(r=1),Number(r.toFixed(2))}function uj(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=BU(e),i=$U;i>0;i-=1){var a=nj(r),o=rj(BU({h:ij(a,i,!0),s:aj(a,i,!0),v:oj(a,i,!0)}));n.push(o)}n.push(rj(r));for(var u=1;u<=ej;u+=1){var s=nj(r),c=rj(BU({h:ij(s,u),s:aj(s,u),v:oj(s,u)}));n.push(c)}return"dark"===t.theme?tj.map((function(e){var r=e.index,i=e.opacity,a=rj(function(e,t,n){var r=n/100;return{r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b}}(BU(t.backgroundColor||"#141414"),BU(n[r]),100*i));return a})):n}var sj={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},cj={},lj={};Object.keys(sj).forEach((function(e){cj[e]=uj(sj[e]),cj[e].primary=cj[e][5],lj[e]=uj(sj[e],{theme:"dark",backgroundColor:"#141414"}),lj[e].primary=lj[e][5]}));cj.red,cj.volcano,cj.gold,cj.orange,cj.yellow,cj.lime,cj.green,cj.cyan;var fj=cj.blue,hj=(cj.geekblue,cj.purple,cj.magenta,cj.grey,cj.grey,function(e){var t=e.controlHeight;return{controlHeightSM:.75*t,controlHeightXS:.5*t,controlHeightLG:1.25*t}});var dj={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},pj=Object.assign(Object.assign({},dj),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,\n'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n'Noto Color Emoji'",fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),vj=function(){function e(t,n){var r;if(void 0===t&&(t=""),void 0===n&&(n={}),t instanceof e)return t;"number"===typeof t&&(t=function(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}(t)),this.originalInput=t;var i=BU(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(r=n.format)&&void 0!==r?r:i.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,r=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=AU(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){return 0===this.toHsl().s},e.prototype.toHsv=function(){var e=MU(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=MU(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=DU(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=DU(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),FU(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),function(e,t,n,r,i){var a=[PU(Math.round(e).toString(16)),PU(Math.round(t).toString(16)),PU(Math.round(n).toString(16)),PU(UU(r))];return i&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toHexShortString=function(e){return void 0===e&&(e=!1),1===this.a?this.toHexString(e):this.toHex8String(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*NU(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*NU(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+FU(this.r,this.g,this.b,!1),t=0,n=Object.entries(VU);t<n.length;t++){var r=n[t],i=r[0];if(e===r[1])return i}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!==e&&void 0!==e?e:this.format;var n=!1,r=this.a<1&&this.a>=0;return t||!r||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=RU(n.l),new e(n)},e.prototype.brighten=function(t){void 0===t&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),new e(n)},e.prototype.darken=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=RU(n.l),new e(n)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=RU(n.s),new e(n)},e.prototype.saturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=RU(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new e(n)},e.prototype.mix=function(t,n){void 0===n&&(n=50);var r=this.toRgb(),i=new e(t).toRgb(),a=n/100;return new e({r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a})},e.prototype.analogous=function(t,n){void 0===t&&(t=6),void 0===n&&(n=30);var r=this.toHsl(),i=360/n,a=[this];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,a.push(new e(r));return a},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var n=this.toHsv(),r=n.h,i=n.s,a=n.v,o=[],u=1/t;t--;)o.push(new e({h:r,s:i,v:a})),a=(a+u)%1;return o},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),r=new e(t).toRgb(),i=n.a+r.a*(1-n.a);return new e({r:(n.r*n.a+r.r*r.a*(1-n.a))/i,g:(n.g*n.a+r.g*r.a*(1-n.a))/i,b:(n.b*n.a+r.b*r.a*(1-n.a))/i,a:i})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),r=n.h,i=[this],a=360/t,o=1;o<t;o++)i.push(new e({h:(r+o*a)%360,s:n.s,l:n.l}));return i},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();var mj=function(e){var t=e,n=e,r=e,i=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?n=4:e<8&&e>=7?n=5:e<14&&e>=8?n=6:e<16&&e>=14?n=7:e>=16&&(n=8),e<6&&e>=2?r=1:e>=6&&(r=2),e>4&&e<8?i=4:e>=8&&(i=6),{borderRadius:e>16?16:e,borderRadiusXS:r,borderRadiusSM:n,borderRadiusLG:t,borderRadiusOuter:i}};var yj=function(e,t){return new vj(e).setAlpha(t).toRgbString()},gj=function(e,t){return new vj(e).darken(t).toHexString()},kj=function(e){var t=uj(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},bj=function(e,t){var n=e||"#fff",r=t||"#000";return{colorBgBase:n,colorTextBase:r,colorText:yj(r,.88),colorTextSecondary:yj(r,.65),colorTextTertiary:yj(r,.45),colorTextQuaternary:yj(r,.25),colorFill:yj(r,.15),colorFillSecondary:yj(r,.06),colorFillTertiary:yj(r,.04),colorFillQuaternary:yj(r,.02),colorBgLayout:gj(n,4),colorBgContainer:gj(n,0),colorBgElevated:gj(n,0),colorBgSpotlight:yj(r,.85),colorBorder:gj(n,15),colorBorderSecondary:gj(n,6)}};var wj=function(e){var t=function(e){var t=new Array(10).fill(null).map((function(t,n){var r=n-1,i=e*Math.pow(2.71828,r/5),a=n>1?Math.floor(i):Math.ceil(i);return 2*Math.floor(a/2)}));return t[1]=e,t.map((function(e){return{size:e,lineHeight:(e+8)/e}}))}(e),n=t.map((function(e){return e.size})),r=t.map((function(e){return e.lineHeight}));return{fontSizeSM:n[0],fontSize:n[1],fontSizeLG:n[2],fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:r[1],lineHeightLG:r[2],lineHeightSM:r[0],lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}};var _j=function(e){var t=Array.isArray(e)?e:[e];return QM.has(t)||QM.set(t,new KM(t)),QM.get(t)}((function(e){var t=Object.keys(dj).map((function(t){var n=uj(e[t]);return new Array(10).fill(1).reduce((function(e,r,i){return e["".concat(t,"-").concat(i+1)]=n[i],e["".concat(t).concat(i+1)]=n[i],e}),{})})).reduce((function(e,t){return e=Object.assign(Object.assign({},e),t)}),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),function(e,t){var n=t.generateColorPalettes,r=t.generateNeutralColorPalettes,i=e.colorSuccess,a=e.colorWarning,o=e.colorError,u=e.colorInfo,s=e.colorPrimary,c=e.colorBgBase,l=e.colorTextBase,f=n(s),h=n(i),d=n(a),p=n(o),v=n(u),m=r(c,l),y=n(e.colorLink||e.colorInfo);return Object.assign(Object.assign({},m),{colorPrimaryBg:f[1],colorPrimaryBgHover:f[2],colorPrimaryBorder:f[3],colorPrimaryBorderHover:f[4],colorPrimaryHover:f[5],colorPrimary:f[6],colorPrimaryActive:f[7],colorPrimaryTextHover:f[8],colorPrimaryText:f[9],colorPrimaryTextActive:f[10],colorSuccessBg:h[1],colorSuccessBgHover:h[2],colorSuccessBorder:h[3],colorSuccessBorderHover:h[4],colorSuccessHover:h[4],colorSuccess:h[6],colorSuccessActive:h[7],colorSuccessTextHover:h[8],colorSuccessText:h[9],colorSuccessTextActive:h[10],colorErrorBg:p[1],colorErrorBgHover:p[2],colorErrorBorder:p[3],colorErrorBorderHover:p[4],colorErrorHover:p[5],colorError:p[6],colorErrorActive:p[7],colorErrorTextHover:p[8],colorErrorText:p[9],colorErrorTextActive:p[10],colorWarningBg:d[1],colorWarningBgHover:d[2],colorWarningBorder:d[3],colorWarningBorderHover:d[4],colorWarningHover:d[4],colorWarning:d[6],colorWarningActive:d[7],colorWarningTextHover:d[8],colorWarningText:d[9],colorWarningTextActive:d[10],colorInfoBg:v[1],colorInfoBgHover:v[2],colorInfoBorder:v[3],colorInfoBorderHover:v[4],colorInfoHover:v[4],colorInfo:v[6],colorInfoActive:v[7],colorInfoTextHover:v[8],colorInfoText:v[9],colorInfoTextActive:v[10],colorLinkHover:y[4],colorLink:y[6],colorLinkActive:y[7],colorBgMask:new vj("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}(e,{generateColorPalettes:kj,generateNeutralColorPalettes:bj})),wj(e.fontSize)),function(e){var t=e.sizeUnit,n=e.sizeStep;return{sizeXXL:t*(n+8),sizeXL:t*(n+4),sizeLG:t*(n+2),sizeMD:t*(n+1),sizeMS:t*n,size:t*n,sizeSM:t*(n-1),sizeXS:t*(n-2),sizeXXS:t*(n-3)}}(e)),hj(e)),function(e){var t=e.motionUnit,n=e.motionBase,r=e.borderRadius,i=e.lineWidth;return Object.assign({motionDurationFast:"".concat((n+t).toFixed(1),"s"),motionDurationMid:"".concat((n+2*t).toFixed(1),"s"),motionDurationSlow:"".concat((n+3*t).toFixed(1),"s"),lineWidthBold:i+1},mj(r))}(e))})),xj={token:pj,hashed:!0},Sj=t.createContext(xj);function Ej(e){return e>=0&&e<=255}var Ij=function(e,t){var n=new vj(e).toRgb(),r=n.r,i=n.g,a=n.b;if(n.a<1)return e;for(var o=new vj(t).toRgb(),u=o.r,s=o.g,c=o.b,l=.01;l<=1;l+=.01){var f=Math.round((r-u*(1-l))/l),h=Math.round((i-s*(1-l))/l),d=Math.round((a-c*(1-l))/l);if(Ej(f)&&Ej(h)&&Ej(d))return new vj({r:f,g:h,b:d,a:Math.round(100*l)/100}).toRgbString()}return new vj({r:r,g:i,b:a,a:1}).toRgbString()},Tj=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Cj(e){var t=e.override,n=Tj(e,["override"]),r=Object.assign({},t);Object.keys(pj).forEach((function(e){delete r[e]}));var i=Object.assign(Object.assign({},n),r),a=1200,o=1600;if(!1===i.motion){var u="0s";i.motionDurationFast=u,i.motionDurationMid=u,i.motionDurationSlow=u}return Object.assign(Object.assign(Object.assign({},i),{colorFillContent:i.colorFillSecondary,colorFillContentHover:i.colorFill,colorFillAlter:i.colorFillQuaternary,colorBgContainerDisabled:i.colorFillTertiary,colorBorderBg:i.colorBgContainer,colorSplit:Ij(i.colorBorderSecondary,i.colorBgContainer),colorTextPlaceholder:i.colorTextQuaternary,colorTextDisabled:i.colorTextQuaternary,colorTextHeading:i.colorText,colorTextLabel:i.colorTextSecondary,colorTextDescription:i.colorTextTertiary,colorTextLightSolid:i.colorWhite,colorHighlight:i.colorError,colorBgTextHover:i.colorFillSecondary,colorBgTextActive:i.colorFill,colorIcon:i.colorTextTertiary,colorIconHover:i.colorText,colorErrorOutline:Ij(i.colorErrorBg,i.colorBgContainer),colorWarningOutline:Ij(i.colorWarningBg,i.colorBgContainer),fontSizeIcon:i.fontSizeSM,lineWidthFocus:4*i.lineWidth,lineWidth:i.lineWidth,controlOutlineWidth:2*i.lineWidth,controlInteractiveSize:i.controlHeight/2,controlItemBgHover:i.colorFillTertiary,controlItemBgActive:i.colorPrimaryBg,controlItemBgActiveHover:i.colorPrimaryBgHover,controlItemBgActiveDisabled:i.colorFill,controlTmpOutline:i.colorFillQuaternary,controlOutline:Ij(i.colorPrimaryBg,i.colorBgContainer),lineType:i.lineType,borderRadius:i.borderRadius,borderRadiusXS:i.borderRadiusXS,borderRadiusSM:i.borderRadiusSM,borderRadiusLG:i.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:i.sizeXXS,paddingXS:i.sizeXS,paddingSM:i.sizeSM,padding:i.size,paddingMD:i.sizeMD,paddingLG:i.sizeLG,paddingXL:i.sizeXL,paddingContentHorizontalLG:i.sizeLG,paddingContentVerticalLG:i.sizeMS,paddingContentHorizontal:i.sizeMS,paddingContentVertical:i.sizeSM,paddingContentHorizontalSM:i.size,paddingContentVerticalSM:i.sizeXS,marginXXS:i.sizeXXS,marginXS:i.sizeXS,marginSM:i.sizeSM,margin:i.size,marginMD:i.sizeMD,marginLG:i.sizeLG,marginXL:i.sizeXL,marginXXL:i.sizeXXL,boxShadow:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowSecondary:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowTertiary:"\n      0 1px 2px 0 rgba(0, 0, 0, 0.03),\n      0 1px 6px -1px rgba(0, 0, 0, 0.02),\n      0 2px 4px 0 rgba(0, 0, 0, 0.02)\n    ",screenXS:480,screenXSMin:480,screenXSMax:575,screenSM:576,screenSMMin:576,screenSMMax:767,screenMD:768,screenMDMin:768,screenMDMax:991,screenLG:992,screenLGMin:992,screenLGMax:1199,screenXL:a,screenXLMin:a,screenXLMax:1599,screenXXL:o,screenXXLMin:o,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:"\n      0 1px 2px -2px ".concat(new vj("rgba(0, 0, 0, 0.16)").toRgbString(),",\n      0 3px 6px 0 ").concat(new vj("rgba(0, 0, 0, 0.12)").toRgbString(),",\n      0 5px 12px 4px ").concat(new vj("rgba(0, 0, 0, 0.09)").toRgbString(),"\n    "),boxShadowDrawerRight:"\n      -6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      -3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      -9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerLeft:"\n      6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerUp:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerDown:"\n      0 -6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 -3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 -9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}var Nj=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Rj=function e(t,n,r){var i=r.getDerivativeToken(t),a=n.override,o=Nj(n,["override"]),u=Object.assign(Object.assign({},i),{override:a});return u=Cj(u),o&&Object.entries(o).forEach((function(t){var n=k(t,2),r=n[0],i=n[1],a=i.theme,o=Nj(i,["theme"]),s=o;a&&(s=e(Object.assign(Object.assign({},u),o),{override:o},a)),u[r]=s})),u};function Aj(){var e=t.useContext(Sj),n=e.token,r=e.hashed,i=e.theme,a=e.components,o="".concat(CU,"-").concat(r||""),u=i||_j,s=k(yF(u,[pj,n],{salt:o,override:Object.assign({override:n},a),getComputedToken:Rj,formatToken:Cj}),2),c=s[0],l=s[1];return[u,c,r?l:""]}var Oj="undefined"!==typeof CSSINJS_STATISTIC,Pj=!0;function Dj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!Oj)return Object.assign.apply(Object,[{}].concat(t));Pj=!1;var r={};return t.forEach((function(e){Object.keys(e).forEach((function(t){Object.defineProperty(r,t,{configurable:!0,enumerable:!0,get:function(){return e[t]}})}))})),Pj=!0,r}var Lj={};function Mj(){}function Fj(e,n,r,i){return function(a){var o=k(Aj(),3),u=o[0],s=o[1],c=o[2],l=(0,t.useContext)(yM),f=l.getPrefixCls,h=l.iconPrefixCls,d=l.csp,p=f(),v={theme:u,token:s,hashId:c,nonce:function(){return null===d||void 0===d?void 0:d.nonce},clientOnly:null===i||void 0===i?void 0:i.clientOnly,order:-999};return gU(Object.assign(Object.assign({},v),{clientOnly:!1,path:["Shared",p]}),(function(){return[{"&":EU(s)}]})),[gU(Object.assign(Object.assign({},v),{path:[e,a,h]}),(function(){var t=function(e){var t,n=e,r=Mj;return Oj&&(t=new Set,n=new Proxy(e,{get:function(e,n){return Pj&&t.add(n),e[n]}}),r=function(e,n){Lj[e]={global:Array.from(t),component:n}}),{token:n,keys:t,flush:r}}(s),o=t.token,u=t.flush,l=Object.assign({},s[e]);(null===i||void 0===i?void 0:i.deprecatedTokens)&&i.deprecatedTokens.forEach((function(e){var t,n=k(e,2),r=n[0],i=n[1];((null===l||void 0===l?void 0:l[r])||(null===l||void 0===l?void 0:l[i]))&&(null!==(t=l[i])&&void 0!==t||(l[i]=null===l||void 0===l?void 0:l[r]))}));var f="function"===typeof r?r(Dj(o,null!==l&&void 0!==l?l:{})):r,d=Object.assign(Object.assign({},f),l),v=Dj(o,{componentCls:".".concat(a),prefixCls:a,iconCls:".".concat(h),antCls:".".concat(p)},d),m=n(v,{hashId:c,prefixCls:a,rootPrefixCls:p,iconPrefixCls:h,overrideComponentToken:l});return u(e,d),[!1===(null===i||void 0===i?void 0:i.resetStyle)?null:IU(s,a),m]})),c]}}var Uj=function(e){var t,n=e.componentCls,r=e.colorBgContainer,i=e.colorBgBody,a=e.colorText;return(0,Nr.Z)({},"".concat(n,"-sider-light"),(t={background:r},(0,Nr.Z)(t,"".concat(n,"-sider-trigger"),{color:a,background:r}),(0,Nr.Z)(t,"".concat(n,"-sider-zero-width-trigger"),{color:a,background:r,border:"1px solid ".concat(i),borderInlineStart:0}),t))},jj=function(e){var t,n,r=e.antCls,i=e.componentCls,a=e.colorText,o=e.colorTextLightSolid,u=e.colorBgHeader,s=e.colorBgBody,c=e.colorBgTrigger,l=e.layoutHeaderHeight,f=e.layoutHeaderPaddingInline,h=e.layoutHeaderColor,d=e.layoutFooterPadding,p=e.layoutTriggerHeight,v=e.layoutZeroTriggerSize,m=e.motionDurationMid,y=e.motionDurationSlow,g=e.fontSize,k=e.borderRadius;return n={},(0,Nr.Z)(n,i,Object.assign(Object.assign((t={display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:s,"&, *":{boxSizing:"border-box"}},(0,Nr.Z)(t,"&".concat(i,"-has-sider"),(0,Nr.Z)({flexDirection:"row"},"> ".concat(i,", > ").concat(i,"-content"),{width:0})),(0,Nr.Z)(t,"".concat(i,"-header, &").concat(i,"-footer"),{flex:"0 0 auto"}),(0,Nr.Z)(t,"".concat(i,"-sider"),{position:"relative",minWidth:0,background:u,transition:"all ".concat(m,", background 0s"),"&-children":(0,Nr.Z)({height:"100%",marginTop:-.1,paddingTop:.1},"".concat(r,"-menu").concat(r,"-menu-inline-collapsed"),{width:"auto"}),"&-has-trigger":{paddingBottom:p},"&-right":{order:1},"&-trigger":{position:"fixed",bottom:0,zIndex:1,height:p,color:o,lineHeight:"".concat(p,"px"),textAlign:"center",background:c,cursor:"pointer",transition:"all ".concat(m)},"&-zero-width":{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:l,insetInlineEnd:-v,zIndex:1,width:v,height:v,color:o,fontSize:e.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:u,borderStartStartRadius:0,borderStartEndRadius:k,borderEndEndRadius:k,borderEndStartRadius:0,cursor:"pointer",transition:"background ".concat(y," ease"),"&::after":{position:"absolute",inset:0,background:"transparent",transition:"all ".concat(y),content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:-v,borderStartStartRadius:k,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:k}}}}),t),Uj(e)),{"&-rtl":{direction:"rtl"}})),(0,Nr.Z)(n,"".concat(i,"-header"),(0,Nr.Z)({height:l,paddingInline:f,color:h,lineHeight:"".concat(l,"px"),background:u},"".concat(r,"-menu"),{lineHeight:"inherit"})),(0,Nr.Z)(n,"".concat(i,"-footer"),{padding:d,color:a,fontSize:g,background:s}),(0,Nr.Z)(n,"".concat(i,"-content"),{flex:"auto",minHeight:0}),n},zj=Fj("Layout",(function(e){var t=e.colorText,n=e.controlHeightSM,r=e.controlHeight,i=e.controlHeightLG,a=e.marginXXS,o=1.25*i,u=Dj(e,{layoutHeaderHeight:2*r,layoutHeaderPaddingInline:o,layoutHeaderColor:t,layoutFooterPadding:"".concat(n,"px ").concat(o,"px"),layoutTriggerHeight:i+2*a,layoutZeroTriggerSize:i});return[jj(u)]}),(function(e){return{colorBgHeader:"#001529",colorBgBody:e.colorBgLayout,colorBgTrigger:"#002140"}})),Vj=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Bj=t.createContext({siderHook:{addSider:function(){return null},removeSider:function(){return null}}});function qj(e){var n=e.suffixCls,r=e.tagName;e.displayName;return function(e){var i=t.forwardRef((function(i,a){return t.createElement(e,Object.assign({ref:a,suffixCls:n,tagName:r},i))}));return i}}var Hj=t.forwardRef((function(e,n){var r=e.prefixCls,i=e.suffixCls,a=e.className,o=e.tagName,u=Vj(e,["prefixCls","suffixCls","className","tagName"]),s=(0,t.useContext(yM).getPrefixCls)("layout",r),c=k(zj(s),2),l=c[0],f=c[1],h=i?"".concat(s,"-").concat(i):s;return l(t.createElement(o,Object.assign({className:vM()(r||h,a,f),ref:n},u)))})),Wj=t.forwardRef((function(e,n){var r,i=t.useContext(yM).direction,a=k(t.useState([]),2),o=a[0],u=a[1],s=e.prefixCls,c=e.className,l=e.rootClassName,f=e.children,h=e.hasSider,d=e.tagName,p=e.style,v=mM(Vj(e,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),["suffixCls"]),m=t.useContext(yM),y=m.getPrefixCls,g=m.layout,b=y("layout",s),_=k(zj(b),2),x=_[0],S=_[1],E=vM()(b,(r={},(0,Nr.Z)(r,"".concat(b,"-has-sider"),"boolean"===typeof h?h:o.length>0),(0,Nr.Z)(r,"".concat(b,"-rtl"),"rtl"===i),r),null===g||void 0===g?void 0:g.className,c,l,S),I=t.useMemo((function(){return{siderHook:{addSider:function(e){u((function(t){return[].concat(w(t),[e])}))},removeSider:function(e){u((function(t){return t.filter((function(t){return t!==e}))}))}}}}),[]);return x(t.createElement(Bj.Provider,{value:I},t.createElement(d,Object.assign({ref:n,className:E,style:Object.assign(Object.assign({},null===g||void 0===g?void 0:g.style),p)},v),f)))})),Gj=qj({tagName:"div",displayName:"Layout"})(Wj),Zj=qj({suffixCls:"header",tagName:"header",displayName:"Header"})(Hj),Kj=qj({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(Hj),Qj=qj({suffixCls:"content",tagName:"main",displayName:"Content"})(Hj),Yj=Gj,Xj={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};function Jj(e,t){if(null==e)return{};var n,r,i=x(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var $j=(0,t.createContext)({}),ez=n(449),tz=n.n(ez);function nz(e){var t;return null===e||void 0===e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}function rz(e){return function(e){return nz(e)instanceof ShadowRoot}(e)?nz(e):null}function iz(e){return"object"===(0,kr.Z)(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===(0,kr.Z)(e.icon)||"function"===typeof e.icon)}function az(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else delete t[n],t[tz()(n)]=r;return t}),{})}function oz(e,n,r){return r?t.createElement(e.tag,(0,an.Z)((0,an.Z)({key:n},az(e.attrs)),r),(e.children||[]).map((function(t,r){return oz(t,"".concat(n,"-").concat(e.tag,"-").concat(r))}))):t.createElement(e.tag,(0,an.Z)({key:n},az(e.attrs)),(e.children||[]).map((function(t,r){return oz(t,"".concat(n,"-").concat(e.tag,"-").concat(r))})))}function uz(e){return uj(e)[0]}function sz(e){return e?Array.isArray(e)?e:[e]:[]}var cz=["icon","className","onClick","style","primaryColor","secondaryColor"],lz={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var fz=function(e){var n,r,i=e.icon,a=e.className,o=e.onClick,u=e.style,s=e.primaryColor,c=e.secondaryColor,l=Jj(e,cz),f=t.useRef(),h=lz;if(s&&(h={primaryColor:s,secondaryColor:c||uz(s)}),function(e){var n=(0,t.useContext)($j),r=n.csp,i=n.prefixCls,a="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n";i&&(a=a.replace(/anticon/g,i)),(0,t.useEffect)((function(){var t=rz(e.current);WM(a,"@ant-design-icons",{prepend:!0,csp:r,attachTo:t})}),[])}(f),n=iz(i),r="icon should be icon definiton, but got ".concat(i),EM(n,"[@ant-design/icons] ".concat(r)),!iz(i))return null;var d=i;return d&&"function"===typeof d.icon&&(d=(0,an.Z)((0,an.Z)({},d),{},{icon:d.icon(h.primaryColor,h.secondaryColor)})),oz(d.icon,"svg-".concat(d.name),(0,an.Z)((0,an.Z)({className:a,onClick:o,style:u,"data-icon":d.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l),{},{ref:f}))};fz.displayName="IconReact",fz.getTwoToneColors=function(){return(0,an.Z)({},lz)},fz.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;lz.primaryColor=t,lz.secondaryColor=n||uz(t),lz.calculated=!!n};var hz=fz;function dz(e){var t=k(sz(e),2),n=t[0],r=t[1];return hz.setTwoToneColors({primaryColor:n,secondaryColor:r})}var pz=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];dz(fj.primary);var vz=t.forwardRef((function(e,n){var r,i=e.className,a=e.icon,o=e.spin,u=e.rotate,s=e.tabIndex,c=e.onClick,l=e.twoToneColor,f=Jj(e,pz),h=t.useContext($j),d=h.prefixCls,p=void 0===d?"anticon":d,v=h.rootClassName,m=vM()(v,p,(r={},(0,Nr.Z)(r,"".concat(p,"-").concat(a.name),!!a.name),(0,Nr.Z)(r,"".concat(p,"-spin"),!!o||"loading"===a.name),r),i),y=s;void 0===y&&c&&(y=-1);var g=u?{msTransform:"rotate(".concat(u,"deg)"),transform:"rotate(".concat(u,"deg)")}:void 0,b=k(sz(l),2),w=b[0],x=b[1];return t.createElement("span",_({role:"img","aria-label":a.name},f,{ref:n,tabIndex:y,onClick:c,className:m}),t.createElement(hz,{icon:a,primaryColor:w,secondaryColor:x,style:g}))}));vz.displayName="AntdIcon",vz.getTwoToneColor=function(){var e=hz.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},vz.setTwoToneColor=dz;var mz=vz,yz=function(e,n){return t.createElement(mz,_({},e,{ref:n,icon:Xj}))};var gz=t.forwardRef(yz),kz={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},bz=function(e,n){return t.createElement(mz,_({},e,{ref:n,icon:kz}))};var wz=t.forwardRef(bz),_z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},xz=function(e,n){return t.createElement(mz,_({},e,{ref:n,icon:_z}))};var Sz=t.forwardRef(xz),Ez=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},Iz=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Tz={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},Cz=t.createContext({}),Nz=function(){var e=0;return function(){return e+=1,"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(e)}}(),Rz=t.forwardRef((function(e,n){var r=e.prefixCls,i=e.className,a=e.trigger,o=e.children,u=e.defaultCollapsed,s=void 0!==u&&u,c=e.theme,l=void 0===c?"dark":c,f=e.style,h=void 0===f?{}:f,d=e.collapsible,p=void 0!==d&&d,v=e.reverseArrow,m=void 0!==v&&v,y=e.width,g=void 0===y?200:y,b=e.collapsedWidth,w=void 0===b?80:b,_=e.zeroWidthTriggerStyle,x=e.breakpoint,S=e.onCollapse,E=e.onBreakpoint,I=Iz(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),T=(0,t.useContext)(Bj).siderHook,C=k((0,t.useState)("collapsed"in e?e.collapsed:s),2),N=C[0],R=C[1],A=k((0,t.useState)(!1),2),O=A[0],P=A[1];(0,t.useEffect)((function(){"collapsed"in e&&R(e.collapsed)}),[e.collapsed]);var D=function(t,n){"collapsed"in e||R(t),null===S||void 0===S||S(t,n)},L=(0,t.useRef)();L.current=function(e){P(e.matches),null===E||void 0===E||E(e.matches),N!==e.matches&&D(e.matches,"responsive")},(0,t.useEffect)((function(){function e(e){return L.current(e)}var t;if("undefined"!==typeof window){var n=window.matchMedia;if(n&&x&&x in Tz){t=n("(max-width: ".concat(Tz[x],")"));try{t.addEventListener("change",e)}catch(YC){t.addListener(e)}e(t)}}return function(){try{null===t||void 0===t||t.removeEventListener("change",e)}catch(YC){null===t||void 0===t||t.removeListener(e)}}}),[x]),(0,t.useEffect)((function(){var e=Nz("ant-sider-");return T.addSider(e),function(){return T.removeSider(e)}}),[]);var M=function(){D(!N,"clickTrigger")},F=(0,t.useContext)(yM).getPrefixCls,U=t.useMemo((function(){return{siderCollapsed:N}}),[N]);return t.createElement(Cz.Provider,{value:U},function(){var e,u=F("layout-sider",r),s=mM(I,["collapsed"]),c=N?w:g,f=Ez(c)?"".concat(c,"px"):String(c),d=0===parseFloat(String(w||0))?t.createElement("span",{onClick:M,className:vM()("".concat(u,"-zero-width-trigger"),"".concat(u,"-zero-width-trigger-").concat(m?"right":"left")),style:_},a||t.createElement(gz,null)):null,v={expanded:m?t.createElement(Sz,null):t.createElement(wz,null),collapsed:m?t.createElement(wz,null):t.createElement(Sz,null)}[N?"collapsed":"expanded"],y=null!==a?d||t.createElement("div",{className:"".concat(u,"-trigger"),onClick:M,style:{width:f}},a||v):null,k=Object.assign(Object.assign({},h),{flex:"0 0 ".concat(f),maxWidth:f,minWidth:f,width:f}),b=vM()(u,"".concat(u,"-").concat(l),(e={},(0,Nr.Z)(e,"".concat(u,"-collapsed"),!!N),(0,Nr.Z)(e,"".concat(u,"-has-trigger"),p&&null!==a&&!d),(0,Nr.Z)(e,"".concat(u,"-below"),!!O),(0,Nr.Z)(e,"".concat(u,"-zero-width"),0===parseFloat(f)),e),i);return t.createElement("aside",Object.assign({className:b},s,{style:k,ref:n}),t.createElement("div",{className:"".concat(u,"-children")},o),p||O&&d?y:null)}())}));var Az=Rz,Oz=Yj;Oz.Header=Zj,Oz.Footer=Kj,Oz.Content=Qj,Oz.Sider=Az;var Pz=Oz,Dz=t.isValidElement;function Lz(e,n){return function(e,n,r){return Dz(e)?t.cloneElement(e,"function"===typeof r?r(e.props||{}):r):n}(e,e,n)}var Mz=function(e){var t=e.componentCls,n=e.colorPrimary;return(0,Nr.Z)({},t,{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:"var(--wave-color, ".concat(n,")"),boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:["box-shadow 0.4s ".concat(e.motionEaseOutCirc),"opacity 2s ".concat(e.motionEaseOutCirc)].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:["box-shadow 0.3s ".concat(e.motionEaseInOut),"opacity 0.35s ".concat(e.motionEaseInOut)].join(",")}}})},Fz=Fj("Wave",(function(e){return[Mz(e)]})),Uz=function(e){return+setTimeout(e,16)},jz=function(e){return clearTimeout(e)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(Uz=function(e){return window.requestAnimationFrame(e)},jz=function(e){return window.cancelAnimationFrame(e)});var zz=0,Vz=new Map;function Bz(e){Vz.delete(e)}var qz=function(e){var t=zz+=1;return function n(r){if(0===r)Bz(t),e();else{var i=Uz((function(){n(r-1)}));Vz.set(t,i)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t};qz.cancel=function(e){var t=Vz.get(e);return Bz(t),jz(t)};var Hz=qz;function Wz(e){return function(e){return e instanceof HTMLElement||e instanceof SVGElement}(e)?e:e instanceof t.Component?u.findDOMNode(e):null}var Gz=t.createContext({});var Zz=function(e){Fr(n,e);var t=Vr(n);function n(){return Rr(this,n),t.apply(this,arguments)}return Pr(n,[{key:"render",value:function(){return this.props.children}}]),n}(t.Component),Kz=Zz,Qz="none",Yz="appear",Xz="enter",Jz="leave",$z="none",eV="prepare",tV="start",nV="active",rV="end",iV="prepared";function aV(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var oV=function(e,t){var n={animationend:aV("Animation","AnimationEnd"),transitionend:aV("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(DM(),"undefined"!==typeof window?window:{}),uV={};if(DM()){var sV=document.createElement("div");uV=sV.style}var cV={};function lV(e){if(cV[e])return cV[e];var t=oV[e];if(t)for(var n=Object.keys(t),r=n.length,i=0;i<r;i+=1){var a=n[i];if(Object.prototype.hasOwnProperty.call(t,a)&&a in uV)return cV[e]=t[a],cV[e]}return""}var fV=lV("animationend"),hV=lV("transitionend"),dV=!(!fV||!hV),pV=fV||"animationend",vV=hV||"transitionend";function mV(e,t){if(!e)return null;if("object"===(0,kr.Z)(e)){var n=t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}));return e[n]}return"".concat(e,"-").concat(t)}var yV=function(e){var n=(0,t.useRef)(),r=(0,t.useRef)(e);r.current=e;var i=t.useCallback((function(e){r.current(e)}),[]);function a(e){e&&(e.removeEventListener(vV,i),e.removeEventListener(pV,i))}return t.useEffect((function(){return function(){a(n.current)}}),[]),[function(e){n.current&&n.current!==e&&a(n.current),e&&e!==n.current&&(e.addEventListener(vV,i),e.addEventListener(pV,i),n.current=e)},a]},gV=DM()?t.useLayoutEffect:t.useEffect,kV=[eV,tV,nV,rV],bV=[eV,iV],wV=!1,_V=!0;function xV(e){return e===nV||e===rV}var SV=function(e,n,r){var i=k(bU($z),2),a=i[0],o=i[1],u=function(){var e=t.useRef(null);function n(){Hz.cancel(e.current)}return t.useEffect((function(){return function(){n()}}),[]),[function t(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var a=Hz((function(){i<=1?r({isCanceled:function(){return a!==e.current}}):t(r,i-1)}));e.current=a},n]}(),s=k(u,2),c=s[0],l=s[1];var f=n?bV:kV;return gV((function(){if(a!==$z&&a!==rV){var e=f.indexOf(a),t=f[e+1],n=r(a);n===wV?o(t,!0):t&&c((function(e){function r(){e.isCanceled()||o(t,!0)}!0===n?r():Promise.resolve(n).then(r)}))}}),[e,a]),t.useEffect((function(){return function(){l()}}),[]),[function(){o(eV,!0)},a]};var EV=function(e){var n=e;"object"===(0,kr.Z)(e)&&(n=e.transitionSupport);var r=t.forwardRef((function(e,r){var i=e.visible,a=void 0===i||i,o=e.removeOnLeave,u=void 0===o||o,s=e.forceRender,c=e.children,l=e.motionName,f=e.leavedClassName,h=e.eventProps,d=function(e,t){return!(!e.motionName||!n||!1===t)}(e,t.useContext(Gz).motion),p=(0,t.useRef)(),v=(0,t.useRef)();var m=function(e,n,r,i){var a=i.motionEnter,o=void 0===a||a,u=i.motionAppear,s=void 0===u||u,c=i.motionLeave,l=void 0===c||c,f=i.motionDeadline,h=i.motionLeaveImmediately,d=i.onAppearPrepare,p=i.onEnterPrepare,v=i.onLeavePrepare,m=i.onAppearStart,y=i.onEnterStart,g=i.onLeaveStart,b=i.onAppearActive,w=i.onEnterActive,_=i.onLeaveActive,x=i.onAppearEnd,S=i.onEnterEnd,E=i.onLeaveEnd,I=i.onVisibleChanged,T=k(bU(),2),C=T[0],N=T[1],R=k(bU(Qz),2),A=R[0],O=R[1],P=k(bU(null),2),D=P[0],L=P[1],M=(0,t.useRef)(!1),F=(0,t.useRef)(null);function U(){return r()}var j=(0,t.useRef)(!1);function z(){O(Qz,!0),L(null,!0)}function V(e){var t=U();if(!e||e.deadline||e.target===t){var n,r=j.current;A===Yz&&r?n=null===x||void 0===x?void 0:x(t,e):A===Xz&&r?n=null===S||void 0===S?void 0:S(t,e):A===Jz&&r&&(n=null===E||void 0===E?void 0:E(t,e)),A!==Qz&&r&&!1!==n&&z()}}var B=k(yV(V),1)[0],q=function(e){var t,n,r;switch(e){case Yz:return t={},(0,Nr.Z)(t,eV,d),(0,Nr.Z)(t,tV,m),(0,Nr.Z)(t,nV,b),t;case Xz:return n={},(0,Nr.Z)(n,eV,p),(0,Nr.Z)(n,tV,y),(0,Nr.Z)(n,nV,w),n;case Jz:return r={},(0,Nr.Z)(r,eV,v),(0,Nr.Z)(r,tV,g),(0,Nr.Z)(r,nV,_),r;default:return{}}},H=t.useMemo((function(){return q(A)}),[A]),W=k(SV(A,!e,(function(e){if(e===eV){var t=H[eV];return t?t(U()):wV}var n;return Z in H&&L((null===(n=H[Z])||void 0===n?void 0:n.call(H,U(),null))||null),Z===nV&&(B(U()),f>0&&(clearTimeout(F.current),F.current=setTimeout((function(){V({deadline:!0})}),f))),Z===iV&&z(),_V})),2),G=W[0],Z=W[1],K=xV(Z);j.current=K,gV((function(){N(n);var t,r=M.current;M.current=!0,!r&&n&&s&&(t=Yz),r&&n&&o&&(t=Xz),(r&&!n&&l||!r&&h&&!n&&l)&&(t=Jz);var i=q(t);t&&(e||i[eV])?(O(t),G()):O(Qz)}),[n]),(0,t.useEffect)((function(){(A===Yz&&!s||A===Xz&&!o||A===Jz&&!l)&&O(Qz)}),[s,o,l]),(0,t.useEffect)((function(){return function(){M.current=!1,clearTimeout(F.current)}}),[]);var Q=t.useRef(!1);(0,t.useEffect)((function(){C&&(Q.current=!0),void 0!==C&&A===Qz&&((Q.current||C)&&(null===I||void 0===I||I(C)),Q.current=!0)}),[C,A]);var Y=D;return H[eV]&&Z===tV&&(Y=(0,an.Z)({transition:"none"},Y)),[A,Z,Y,null!==C&&void 0!==C?C:n]}(d,a,(function(){try{return p.current instanceof HTMLElement?p.current:Wz(v.current)}catch(e){return null}}),e),y=k(m,4),g=y[0],b=y[1],w=y[2],_=y[3],x=t.useRef(_);_&&(x.current=!0);var S,E=t.useCallback((function(e){p.current=e,_U(r,e)}),[r]),I=(0,an.Z)((0,an.Z)({},h),{},{visible:a});if(c)if(g===Qz)S=_?c((0,an.Z)({},I),E):!u&&x.current&&f?c((0,an.Z)((0,an.Z)({},I),{},{className:f}),E):s||!u&&!f?c((0,an.Z)((0,an.Z)({},I),{},{style:{display:"none"}}),E):null;else{var T,C;b===eV?C="prepare":xV(b)?C="active":b===tV&&(C="start");var N=mV(l,"".concat(g,"-").concat(C));S=c((0,an.Z)((0,an.Z)({},I),{},{className:vM()(mV(l,g),(T={},(0,Nr.Z)(T,N,N&&C),(0,Nr.Z)(T,l,"string"===typeof l),T)),style:w}),E)}else S=null;t.isValidElement(S)&&SU(S)&&(S.ref||(S=t.cloneElement(S,{ref:E})));return t.createElement(Kz,{ref:v},S)}));return r.displayName="CSSMotion",r}(dV),IV="add",TV="keep",CV="remove",NV="removed";function RV(e){var t;return t=e&&"object"===(0,kr.Z)(e)&&"key"in e?e:{key:e},(0,an.Z)((0,an.Z)({},t),{},{key:String(t.key)})}function AV(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(RV)}var OV=["component","children","onVisibleChanged","onAllRemoved"],PV=["status"],DV=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:EV,r=function(e){Fr(i,e);var r=Vr(i);function i(){var e;Rr(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n)),(0,Nr.Z)(Lr(e),"state",{keyEntities:[]}),(0,Nr.Z)(Lr(e),"removeKey",(function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:(0,an.Z)((0,an.Z)({},e),{},{status:NV})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==NV})).length})),e}return Pr(i,[{key:"render",value:function(){var e=this,r=this.state.keyEntities,i=this.props,a=i.component,o=i.children,u=i.onVisibleChanged,s=i.onAllRemoved,c=Jj(i,OV),l=a||t.Fragment,f={};return DV.forEach((function(e){f[e]=c[e],delete c[e]})),delete c.keys,t.createElement(l,c,r.map((function(r){var i=r.status,a=Jj(r,PV),c=i===IV||i===TV;return t.createElement(n,_({},f,{key:a.key,visible:c,eventProps:a,onVisibleChanged:function(t){(null===u||void 0===u||u(t,{key:a.key}),t)||0===e.removeKey(a.key)&&s&&s()}}),o)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,i=AV(n),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,i=t.length,a=AV(e),o=AV(t);a.forEach((function(e){for(var t=!1,a=r;a<i;a+=1){var u=o[a];if(u.key===e.key){r<a&&(n=n.concat(o.slice(r,a).map((function(e){return(0,an.Z)((0,an.Z)({},e),{},{status:IV})}))),r=a),n.push((0,an.Z)((0,an.Z)({},u),{},{status:TV})),r+=1,t=!0;break}}t||n.push((0,an.Z)((0,an.Z)({},e),{},{status:CV}))})),r<i&&(n=n.concat(o.slice(r).map((function(e){return(0,an.Z)((0,an.Z)({},e),{},{status:IV})}))));var u={};return n.forEach((function(e){var t=e.key;u[t]=(u[t]||0)+1})),Object.keys(u).filter((function(e){return u[e]>1})).forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==CV}))).forEach((function(t){t.key===e&&(t.status=TV)}))})),n}(r,i);return{keyEntities:a.filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==NV||e.status!==CV}))}}}]),i}(t.Component);(0,Nr.Z)(r,"defaultProps",{component:"div"})}(dV);var LV,MV=EV,FV=(0,an.Z)({},s),UV=FV.version,jV=FV.render,zV=FV.unmountComponentAtNode;try{Number((UV||"").split(".")[0])>=18&&(LV=FV.createRoot)}catch(dq){}function VV(e){var t=FV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&"object"===(0,kr.Z)(t)&&(t.usingClientEntryPoint=e)}var BV="__rc_react_root__";function qV(e,t){LV?function(e,t){VV(!0);var n=t[BV]||LV(t);VV(!1),n.render(e),t[BV]=n}(e,t):function(e,t){jV(e,t)}(e,t)}function HV(e){return WV.apply(this,arguments)}function WV(){return(WV=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then((function(){var e;null===(e=t[BV])||void 0===e||e.unmount(),delete t[BV]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GV(e){zV(e)}function ZV(){return(ZV=Cr(br().mark((function e(t){return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===LV){e.next=2;break}return e.abrupt("return",HV(t));case 2:GV(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function KV(e){return e&&"#fff"!==e&&"#ffffff"!==e&&"rgb(255, 255, 255)"!==e&&"rgba(255, 255, 255, 1)"!==e&&function(e){var t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return!(t&&t[1]&&t[2]&&t[3])||!(t[1]===t[2]&&t[2]===t[3])}(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&"transparent"!==e}var QV="ant-wave-target";function YV(e){return Number.isNaN(e)?0:e}var XV=function(e){var n=e.className,r=e.target,i=e.component,a=t.useRef(null),o=k(t.useState(null),2),u=o[0],s=o[1],c=k(t.useState([]),2),l=c[0],f=c[1],h=k(t.useState(0),2),d=h[0],p=h[1],v=k(t.useState(0),2),m=v[0],y=v[1],g=k(t.useState(0),2),b=g[0],w=g[1],_=k(t.useState(0),2),x=_[0],S=_[1],E=k(t.useState(!1),2),I=E[0],T=E[1],C={left:d,top:m,width:b,height:x,borderRadius:l.map((function(e){return"".concat(e,"px")})).join(" ")};function N(){var e=getComputedStyle(r);s(function(e){var t=getComputedStyle(e),n=t.borderTopColor,r=t.borderColor,i=t.backgroundColor;return KV(n)?n:KV(r)?r:KV(i)?i:null}(r));var t="static"===e.position,n=e.borderLeftWidth,i=e.borderTopWidth;p(t?r.offsetLeft:YV(-parseFloat(n))),y(t?r.offsetTop:YV(-parseFloat(i))),w(r.offsetWidth),S(r.offsetHeight);var a=e.borderTopLeftRadius,o=e.borderTopRightRadius,u=e.borderBottomLeftRadius,c=e.borderBottomRightRadius;f([a,o,c,u].map((function(e){return YV(parseFloat(e))})))}if(u&&(C["--wave-color"]=u),t.useEffect((function(){if(r){var e,t=Hz((function(){N(),T(!0)}));return"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(N)).observe(r),function(){Hz.cancel(t),null===e||void 0===e||e.disconnect()}}}),[]),!I)return null;var R=("Checkbox"===i||"Radio"===i)&&(null===r||void 0===r?void 0:r.classList.contains(QV));return t.createElement(MV,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:function(e,t){var n;if(t.deadline||"opacity"===t.propertyName){var r=null===(n=a.current)||void 0===n?void 0:n.parentElement;(function(e){return ZV.apply(this,arguments)})(r).then((function(){null===r||void 0===r||r.remove()}))}return!1}},(function(e){var r=e.className;return t.createElement("div",{ref:a,className:vM()(n,{"wave-quick":R},r),style:C})}))},JV=function(e,n){var r;if("Checkbox"!==n.component||(null===(r=e.querySelector("input"))||void 0===r?void 0:r.checked)){var i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.top="0px",null===e||void 0===e||e.insertBefore(i,null===e||void 0===e?void 0:e.firstChild),qV(t.createElement(XV,Object.assign({},n,{target:e})),i)}};function $V(e,n,r){var i=t.useContext(yM).wave,a=k(Aj(),3),o=a[1],u=a[2],s=function(e){var n=t.useRef();n.current=e;var r=t.useCallback((function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return null===(e=n.current)||void 0===e?void 0:e.call.apply(e,[n].concat(r))}),[]);return r}((function(t){var a=e.current;if(!(null===i||void 0===i?void 0:i.disabled)&&a){var s=a.querySelector(".".concat(QV))||a;((i||{}).showEffect||JV)(s,{className:n,token:o,component:r,event:t,hashId:u})}})),c=t.useRef();return function(e){Hz.cancel(c.current),c.current=Hz((function(){s(e)}))}}var eB=function(e){var n=e.children,r=e.disabled,i=e.component,a=(0,t.useContext)(yM).getPrefixCls,o=(0,t.useRef)(null),u=a("wave"),s=k(Fz(u),2)[1],c=$V(o,vM()(u,s),i);return t.useEffect((function(){var e=o.current;if(e&&1===e.nodeType&&!r){var t=function(t){!function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),a=i.width,o=i.height;if(a||o)return!0}}return!1}(t.target)||!e.getAttribute||e.getAttribute("disabled")||e.disabled||e.className.includes("disabled")||e.className.includes("-leave")||c(t)};return e.addEventListener("click",t,!0),function(){e.removeEventListener("click",t,!0)}}}),[r]),t.isValidElement(n)?Lz(n,{ref:SU(n)?xU(n.ref,o):o}):null!==n&&void 0!==n?n:null},tB=t.createContext(!1),nB=tB,rB=t.createContext(void 0),iB=rB,aB=function(e){var n=t.useContext(iB);return t.useMemo((function(){return e?"string"===typeof e?null!==e&&void 0!==e?e:n:e instanceof Function?e(n):n:n}),[e,n])};var oB=t.createContext(null),uB=(0,t.forwardRef)((function(e,n){var r=e.className,i=e.style,a=e.children,o=e.prefixCls,u=vM()("".concat(o,"-icon"),r);return t.createElement("span",{ref:n,className:u,style:i},a)})),sB=uB,cB={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},lB=function(e,n){return t.createElement(mz,_({},e,{ref:n,icon:cB}))};var fB=t.forwardRef(lB),hB=(0,t.forwardRef)((function(e,n){var r=e.prefixCls,i=e.className,a=e.style,o=e.iconClassName,u=vM()("".concat(r,"-loading-icon"),i);return t.createElement(sB,{prefixCls:r,className:u,style:a,ref:n},t.createElement(fB,{className:o}))})),dB=function(){return{width:0,opacity:0,transform:"scale(0)"}},pB=function(e){return{width:e.scrollWidth,opacity:1,transform:"scale(1)"}},vB=function(e){var n=e.prefixCls,r=e.loading,i=e.existIcon,a=e.className,o=e.style,u=!!r;return i?t.createElement(hB,{prefixCls:n,className:a,style:o}):t.createElement(MV,{visible:u,motionName:"".concat(n,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:dB,onAppearActive:pB,onEnterStart:dB,onEnterActive:pB,onLeaveStart:pB,onLeaveActive:dB},(function(e,r){var i=e.className,u=e.style;return t.createElement(hB,{prefixCls:n,className:a,style:Object.assign(Object.assign({},o),u),ref:r,iconClassName:i})}))},mB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},yB=t.createContext(void 0),gB=function(e){var n,r=t.useContext(yM),i=r.getPrefixCls,a=r.direction,o=e.prefixCls,u=e.size,s=e.className,c=mB(e,["prefixCls","size","className"]),l=i("btn-group",o),f=k(Aj(),3)[2],h="";switch(u){case"large":h="lg";break;case"small":h="sm"}var d=vM()(l,(n={},(0,Nr.Z)(n,"".concat(l,"-").concat(h),h),(0,Nr.Z)(n,"".concat(l,"-rtl"),"rtl"===a),n),s,f);return t.createElement(yB.Provider,{value:u},t.createElement("div",Object.assign({},c,{className:d})))},kB=/^[\u4e00-\u9fa5]{2}$/,bB=kB.test.bind(kB);function wB(e){return"string"===typeof e}function _B(e){return"text"===e||"link"===e}function xB(e,n){if(null!==e&&void 0!==e){var r=n?" ":"";return"string"!==typeof e&&"number"!==typeof e&&wB(e.type)&&bB(e.props.children)?Lz(e,{children:e.props.children.split("").join(r)}):wB(e)?bB(e)?t.createElement("span",null,e.split("").join(r)):t.createElement("span",null,e):function(e){return e&&Dz(e)&&e.type===t.Fragment}(e)?t.createElement("span",null,e):e}}function SB(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{focus:!0},n=e.componentCls,r="".concat(n,"-compact");return(0,Nr.Z)({},r,Object.assign(Object.assign({},function(e,t,n){var r,i=n.focusElCls,a=n.focus,o=n.borderElCls?"> *":"",u=["hover",a?"focus":null,"active"].filter(Boolean).map((function(e){return"&:".concat(e," ").concat(o)})).join(",");return r={},(0,Nr.Z)(r,"&-item:not(".concat(t,"-last-item)"),{marginInlineEnd:-e.lineWidth}),(0,Nr.Z)(r,"&-item",Object.assign(Object.assign((0,Nr.Z)({},u,{zIndex:2}),i?(0,Nr.Z)({},"&".concat(i),{zIndex:2}):{}),(0,Nr.Z)({},"&[disabled] ".concat(o),{zIndex:0}))),r}(e,r,t)),function(e,t,n){var r,i=n.borderElCls,a=i?"> ".concat(i):"";return r={},(0,Nr.Z)(r,"&-item:not(".concat(t,"-first-item):not(").concat(t,"-last-item) ").concat(a),{borderRadius:0}),(0,Nr.Z)(r,"&-item:not(".concat(t,"-last-item)").concat(t,"-first-item"),(0,Nr.Z)({},"& ".concat(a,", &").concat(e,"-sm ").concat(a,", &").concat(e,"-lg ").concat(a),{borderStartEndRadius:0,borderEndEndRadius:0})),(0,Nr.Z)(r,"&-item:not(".concat(t,"-first-item)").concat(t,"-last-item"),(0,Nr.Z)({},"& ".concat(a,", &").concat(e,"-sm ").concat(a,", &").concat(e,"-lg ").concat(a),{borderStartStartRadius:0,borderEndStartRadius:0})),r}(n,r,t)))}function EB(e){var t="".concat(e.componentCls,"-compact-vertical");return(0,Nr.Z)({},t,Object.assign(Object.assign({},function(e,t){var n;return n={},(0,Nr.Z)(n,"&-item:not(".concat(t,"-last-item)"),{marginBottom:-e.lineWidth}),(0,Nr.Z)(n,"&-item",{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}),n}(e,t)),function(e,t){var n;return n={},(0,Nr.Z)(n,"&-item:not(".concat(t,"-first-item):not(").concat(t,"-last-item)"),{borderRadius:0}),(0,Nr.Z)(n,"&-item".concat(t,"-first-item:not(").concat(t,"-last-item)"),(0,Nr.Z)({},"&, &".concat(e,"-sm, &").concat(e,"-lg"),{borderEndEndRadius:0,borderEndStartRadius:0})),(0,Nr.Z)(n,"&-item".concat(t,"-last-item:not(").concat(t,"-first-item)"),(0,Nr.Z)({},"&, &".concat(e,"-sm, &").concat(e,"-lg"),{borderStartStartRadius:0,borderStartEndRadius:0})),n}(e.componentCls,t)))}var IB=function(e,t){return(0,Nr.Z)({},"> span, > ".concat(e),{"&:not(:last-child)":(0,Nr.Z)({},"&, & > ".concat(e),{"&:not(:disabled)":{borderInlineEndColor:t}}),"&:not(:first-child)":(0,Nr.Z)({},"&, & > ".concat(e),{"&:not(:disabled)":{borderInlineStartColor:t}})})},TB=function(e){var t,n,r=e.componentCls,i=e.fontSize,a=e.lineWidth,o=e.colorPrimaryHover,u=e.colorErrorHover;return(0,Nr.Z)({},"".concat(r,"-group"),[(n={position:"relative",display:"inline-flex"},(0,Nr.Z)(n,"> span, > ".concat(r),{"&:not(:last-child)":(0,Nr.Z)({},"&, & > ".concat(r),{borderStartEndRadius:0,borderEndEndRadius:0}),"&:not(:first-child)":(0,Nr.Z)({marginInlineStart:-a},"&, & > ".concat(r),{borderStartStartRadius:0,borderEndStartRadius:0})}),(0,Nr.Z)(n,r,(t={position:"relative",zIndex:1},(0,Nr.Z)(t,"&:hover,\n          &:focus,\n          &:active",{zIndex:2}),(0,Nr.Z)(t,"&[disabled]",{zIndex:0}),t)),(0,Nr.Z)(n,"".concat(r,"-icon-only"),{fontSize:i}),n),IB("".concat(r,"-primary"),o),IB("".concat(r,"-danger"),u)])},CB=function(e){var t,n=e.componentCls,r=e.iconCls,i=e.buttonFontWeight;return(0,Nr.Z)({},n,(t={outline:"none",position:"relative",display:"inline-block",fontWeight:i,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:"".concat(e.lineWidth,"px ").concat(e.lineType," transparent"),cursor:"pointer",transition:"all ".concat(e.motionDurationMid," ").concat(e.motionEaseInOut),userSelect:"none",touchAction:"manipulation",lineHeight:e.lineHeight,color:e.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"}},(0,Nr.Z)(t,"".concat(n,"-icon"),{lineHeight:0}),(0,Nr.Z)(t,"> ".concat(r," + span, > span + ").concat(r),{marginInlineStart:e.marginXS}),(0,Nr.Z)(t,"&:not(".concat(n,"-icon-only) > ").concat(n,"-icon"),(0,Nr.Z)({},"&".concat(n,"-loading-icon, &:not(:last-child)"),{marginInlineEnd:e.marginXS})),(0,Nr.Z)(t,"> a",{color:"currentColor"}),(0,Nr.Z)(t,"&:not(:disabled)",Object.assign({},function(e){return{"&:focus-visible":Object.assign({},TU(e))}}(e))),(0,Nr.Z)(t,"&-icon-only".concat(n,"-compact-item"),{flex:"none"}),(0,Nr.Z)(t,"&-compact-item".concat(n,"-primary"),(0,Nr.Z)({},"&:not([disabled]) + ".concat(n,"-compact-item").concat(n,"-primary:not([disabled])"),{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:e.lineWidth,height:"calc(100% + ".concat(2*e.lineWidth,"px)"),backgroundColor:e.colorPrimaryHover,content:'""'}})),(0,Nr.Z)(t,"&-compact-vertical-item",(0,Nr.Z)({},"&".concat(n,"-primary"),(0,Nr.Z)({},"&:not([disabled]) + ".concat(n,"-compact-vertical-item").concat(n,"-primary:not([disabled])"),{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:"calc(100% + ".concat(2*e.lineWidth,"px)"),height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}))),t))},NB=function(e,t,n){return(0,Nr.Z)({},"&:not(:disabled):not(".concat(e,"-disabled)"),{"&:hover":t,"&:active":n})},RB=function(e){return{minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}},AB=function(e){return{borderRadius:e.controlHeight,paddingInlineStart:e.controlHeight/2,paddingInlineEnd:e.controlHeight/2}},OB=function(e,t,n,r,i,a,o){return(0,Nr.Z)({},"&".concat(e,"-background-ghost"),Object.assign(Object.assign({color:t||void 0,backgroundColor:"transparent",borderColor:n||void 0,boxShadow:"none"},NB(e,Object.assign({backgroundColor:"transparent"},a),Object.assign({backgroundColor:"transparent"},o))),{"&:disabled":{cursor:"not-allowed",color:r||void 0,borderColor:i||void 0}}))},PB=function(e){return(0,Nr.Z)({},"&:disabled, &".concat(e.componentCls,"-disabled"),Object.assign({},function(e){return{cursor:"not-allowed",borderColor:e.colorBorder,color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,boxShadow:"none"}}(e)))},DB=function(e){return Object.assign({},PB(e))},LB=function(e){return(0,Nr.Z)({},"&:disabled, &".concat(e.componentCls,"-disabled"),{cursor:"not-allowed",color:e.colorTextDisabled})},MB=function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},DB(e)),{backgroundColor:e.colorBgContainer,borderColor:e.colorBorder,boxShadow:"0 ".concat(e.controlOutlineWidth,"px 0 ").concat(e.controlTmpOutline)}),NB(e.componentCls,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),OB(e.componentCls,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)),(0,Nr.Z)({},"&".concat(e.componentCls,"-dangerous"),Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},NB(e.componentCls,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),OB(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),PB(e))))},FB=function(e){var t,n=e.componentCls;return t={},(0,Nr.Z)(t,"".concat(n,"-default"),MB(e)),(0,Nr.Z)(t,"".concat(n,"-primary"),function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},DB(e)),{color:e.colorTextLightSolid,backgroundColor:e.colorPrimary,boxShadow:"0 ".concat(e.controlOutlineWidth,"px 0 ").concat(e.controlOutline)}),NB(e.componentCls,{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryHover},{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryActive})),OB(e.componentCls,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),(0,Nr.Z)({},"&".concat(e.componentCls,"-dangerous"),Object.assign(Object.assign(Object.assign({backgroundColor:e.colorError,boxShadow:"0 ".concat(e.controlOutlineWidth,"px 0 ").concat(e.colorErrorOutline)},NB(e.componentCls,{backgroundColor:e.colorErrorHover},{backgroundColor:e.colorErrorActive})),OB(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),PB(e))))}(e)),(0,Nr.Z)(t,"".concat(n,"-dashed"),function(e){return Object.assign(Object.assign({},MB(e)),{borderStyle:"dashed"})}(e)),(0,Nr.Z)(t,"".concat(n,"-link"),function(e){return Object.assign(Object.assign(Object.assign({color:e.colorLink},NB(e.componentCls,{color:e.colorLinkHover},{color:e.colorLinkActive})),LB(e)),(0,Nr.Z)({},"&".concat(e.componentCls,"-dangerous"),Object.assign(Object.assign({color:e.colorError},NB(e.componentCls,{color:e.colorErrorHover},{color:e.colorErrorActive})),LB(e))))}(e)),(0,Nr.Z)(t,"".concat(n,"-text"),function(e){return Object.assign(Object.assign(Object.assign({},NB(e.componentCls,{color:e.colorText,backgroundColor:e.colorBgTextHover},{color:e.colorText,backgroundColor:e.colorBgTextActive})),LB(e)),(0,Nr.Z)({},"&".concat(e.componentCls,"-dangerous"),Object.assign(Object.assign({color:e.colorError},LB(e)),NB(e.componentCls,{color:e.colorErrorHover,backgroundColor:e.colorErrorBg},{color:e.colorErrorHover,backgroundColor:e.colorErrorBg}))))}(e)),(0,Nr.Z)(t,"".concat(n,"-ghost"),OB(e.componentCls,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)),t},UB=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=e.componentCls,a=e.controlHeight,o=e.fontSize,u=e.lineHeight,s=e.lineWidth,c=e.borderRadius,l=e.buttonPaddingHorizontal,f=e.iconCls,h=Math.max(0,(a-o*u)/2-s),d=l-s,p="".concat(i,"-icon-only");return[(0,Nr.Z)({},"".concat(i).concat(r),(n={fontSize:o,height:a,padding:"".concat(h,"px ").concat(d,"px"),borderRadius:c},(0,Nr.Z)(n,"&".concat(p),(t={width:a,paddingInlineStart:0,paddingInlineEnd:0},(0,Nr.Z)(t,"&".concat(i,"-round"),{width:"auto"}),(0,Nr.Z)(t,f,{fontSize:e.buttonIconOnlyFontSize}),t)),(0,Nr.Z)(n,"&".concat(i,"-loading"),{opacity:e.opacityLoading,cursor:"default"}),(0,Nr.Z)(n,"".concat(i,"-loading-icon"),{transition:"width ".concat(e.motionDurationSlow," ").concat(e.motionEaseInOut,", opacity ").concat(e.motionDurationSlow," ").concat(e.motionEaseInOut)}),n)),(0,Nr.Z)({},"".concat(i).concat(i,"-circle").concat(r),RB(e)),(0,Nr.Z)({},"".concat(i).concat(i,"-round").concat(r),AB(e))]},jB=function(e){return UB(e)},zB=function(e){var t=Dj(e,{controlHeight:e.controlHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:8,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.fontSizeLG-2});return UB(t,"".concat(e.componentCls,"-sm"))},VB=function(e){var t=Dj(e,{controlHeight:e.controlHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.fontSizeLG+2});return UB(t,"".concat(e.componentCls,"-lg"))},BB=function(e){var t=e.componentCls;return(0,Nr.Z)({},t,(0,Nr.Z)({},"&".concat(t,"-block"),{width:"100%"}))},qB=Fj("Button",(function(e){var t=Dj(e,{colorOutlineDefault:e.controlTmpOutline,buttonPaddingHorizontal:e.paddingContentHorizontal,buttonIconOnlyFontSize:e.fontSizeLG,buttonFontWeight:400});return[CB(t),zB(t),jB(t),VB(t),BB(t),FB(t),TB(t),SB(e),EB(e)]})),HB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};var WB=function(e,n){var r,i,a,o=e.loading,u=void 0!==o&&o,s=e.prefixCls,c=e.type,l=void 0===c?"default":c,f=e.danger,h=e.shape,d=void 0===h?"default":h,p=e.size,v=e.styles,m=e.disabled,y=e.className,g=e.rootClassName,b=e.children,w=e.icon,_=e.ghost,x=void 0!==_&&_,S=e.block,E=void 0!==S&&S,I=e.htmlType,T=void 0===I?"button":I,C=e.classNames,N=e.style,R=void 0===N?{}:N,A=HB(e,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","ghost","block","htmlType","classNames","style"]),O=(0,t.useContext)(yM),P=O.getPrefixCls,D=O.autoInsertSpaceInButton,L=O.direction,M=O.button,F=P("btn",s),U=k(qB(F),2),j=U[0],z=U[1],V=(0,t.useContext)(nB),B=null!==m&&void 0!==m?m:V,q=(0,t.useContext)(yB),H=(0,t.useMemo)((function(){return function(e){if("object"===typeof e&&e){var t=null===e||void 0===e?void 0:e.delay;return{loading:!1,delay:Number.isNaN(t)||"number"!==typeof t?0:t}}return{loading:!!e,delay:0}}(u)}),[u]),W=k((0,t.useState)(H.loading),2),G=W[0],Z=W[1],K=k((0,t.useState)(!1),2),Q=K[0],Y=K[1],X=xU(n,(0,t.createRef)()),J=1===t.Children.count(b)&&!w&&!_B(l);(0,t.useEffect)((function(){var e=null;return H.delay>0?e=setTimeout((function(){e=null,Z(!0)}),H.delay):Z(H.loading),function(){e&&(clearTimeout(e),e=null)}}),[H]),(0,t.useEffect)((function(){if(X&&X.current&&!1!==D){var e=X.current.textContent;J&&bB(e)?Q||Y(!0):Q&&Y(!1)}}),[X]);var $=function(t){var n=e.onClick;G||B?t.preventDefault():null===n||void 0===n||n(t)},ee=!1!==D,te=function(e,n){var r=t.useContext(oB),i=t.useMemo((function(){var t;if(!r)return"";var i=r.compactDirection,a=r.isFirstItem,o=r.isLastItem,u="vertical"===i?"-vertical-":"-";return vM()("".concat(e,"-compact").concat(u,"item"),(t={},(0,Nr.Z)(t,"".concat(e,"-compact").concat(u,"first-item"),a),(0,Nr.Z)(t,"".concat(e,"-compact").concat(u,"last-item"),o),(0,Nr.Z)(t,"".concat(e,"-compact").concat(u,"item-rtl"),"rtl"===n),t))}),[e,n,r]);return{compactSize:null===r||void 0===r?void 0:r.compactSize,compactDirection:null===r||void 0===r?void 0:r.compactDirection,compactItemClassnames:i}}(F,L),ne=te.compactSize,re=te.compactItemClassnames,ie={large:"lg",small:"sm",middle:void 0},ae=aB((function(e){var t,n;return null!==(n=null!==(t=null!==p&&void 0!==p?p:ne)&&void 0!==t?t:q)&&void 0!==n?n:e})),oe=ae&&ie[ae]||"",ue=G?"loading":w,se=mM(A,["navigate"]),ce=vM()(F,z,(r={},(0,Nr.Z)(r,"".concat(F,"-").concat(d),"default"!==d&&d),(0,Nr.Z)(r,"".concat(F,"-").concat(l),l),(0,Nr.Z)(r,"".concat(F,"-").concat(oe),oe),(0,Nr.Z)(r,"".concat(F,"-icon-only"),!b&&0!==b&&!!ue),(0,Nr.Z)(r,"".concat(F,"-background-ghost"),x&&!_B(l)),(0,Nr.Z)(r,"".concat(F,"-loading"),G),(0,Nr.Z)(r,"".concat(F,"-two-chinese-chars"),Q&&ee&&!G),(0,Nr.Z)(r,"".concat(F,"-block"),E),(0,Nr.Z)(r,"".concat(F,"-dangerous"),!!f),(0,Nr.Z)(r,"".concat(F,"-rtl"),"rtl"===L),r),re,y,g,null===M||void 0===M?void 0:M.className),le=Object.assign(Object.assign({},null===M||void 0===M?void 0:M.style),R),fe=vM()(null===C||void 0===C?void 0:C.icon,null===(i=null===M||void 0===M?void 0:M.classNames)||void 0===i?void 0:i.icon),he=Object.assign(Object.assign({},(null===v||void 0===v?void 0:v.icon)||{}),(null===(a=null===M||void 0===M?void 0:M.styles)||void 0===a?void 0:a.icon)||{}),de=w&&!G?t.createElement(sB,{prefixCls:F,className:fe,style:he},w):t.createElement(vB,{existIcon:!!w,prefixCls:F,loading:!!G}),pe=b||0===b?function(e,n){var r=!1,i=[];return t.Children.forEach(e,(function(e){var t=typeof e,n="string"===t||"number"===t;if(r&&n){var a=i.length-1,o=i[a];i[a]="".concat(o).concat(e)}else i.push(e);r=n})),t.Children.map(i,(function(e){return xB(e,n)}))}(b,J&&ee):null;if(void 0!==se.href)return j(t.createElement("a",Object.assign({},se,{className:vM()(ce,(0,Nr.Z)({},"".concat(F,"-disabled"),B)),style:le,onClick:$,ref:X}),de,pe));var ve=t.createElement("button",Object.assign({},A,{type:T,className:ce,style:le,onClick:$,disabled:B,ref:X}),de,pe);return _B(l)||(ve=t.createElement(eB,{component:"Button",disabled:!!G},ve)),j(ve)},GB=(0,t.forwardRef)(WB);GB.Group=gB,GB.__ANT_BUTTON=!0;var ZB=GB;function KB(){return KB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KB.apply(this,arguments)}function QB(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var YB=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],XB=["aria-current","caseSensitive","className","end","style","to","children"];var JB=r.startTransition;function $B(e){var n,r=e.basename,i=e.children,a=e.future,o=e.window,u=t.useRef();null==u.current&&(u.current=(void 0===(n={window:o,v5Compat:!0})&&(n={}),OD((function(e,t){var n=e.location;return ND("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:RD(t)}),null,n)));var s=u.current,c=k(t.useState({action:s.action,location:s.location}),2),l=c[0],f=c[1],h=(a||{}).v7_startTransition,d=t.useCallback((function(e){h&&JB?JB((function(){return f(e)})):f(e)}),[f,h]);return t.useLayoutEffect((function(){return s.listen(d)}),[s,d]),t.createElement(AL,{basename:r,children:i,location:l.location,navigationType:l.action,navigator:s})}var eq="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,tq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nq=t.forwardRef((function(e,n){var r,i=e.onClick,a=e.relative,o=e.reloadDocument,u=e.replace,s=e.state,c=e.target,l=e.to,f=e.preventScrollReset,h=QB(e,YB),d=t.useContext(cL).basename,p=!1;if("string"===typeof l&&tq.test(l)&&(r=l,eq))try{var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),y=ZD(m.pathname,d);m.origin===v.origin&&null!=y?l=y+m.search+m.hash:p=!0}catch(dq){}var g=function(e,n){var r=(void 0===n?{}:n).relative;dL()||ID(!1);var i=t.useContext(cL),a=i.basename,o=i.navigator,u=yL(e,{relative:r}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:XD([a,c])),o.createHref({pathname:f,search:l,hash:s})}(l,{relative:a}),k=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=r.preventScrollReset,s=r.relative,c=mL(),l=pL(),f=yL(e,{relative:s});return t.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:RD(l)===RD(f);c(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,f,a,o,i,e,u,s])}(l,{replace:u,state:s,target:c,preventScrollReset:f,relative:a});return t.createElement("a",KB({},h,{href:r||g,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:n,target:c}))}));var rq=t.forwardRef((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.caseSensitive,o=void 0!==a&&a,u=e.className,s=void 0===u?"":u,c=e.end,l=void 0!==c&&c,f=e.style,h=e.to,d=e.children,p=QB(e,XB),v=yL(h,{relative:p.relative}),m=pL(),y=t.useContext(uL),g=t.useContext(cL).navigator,k=g.encodeLocation?g.encodeLocation(v).pathname:v.pathname,b=m.pathname,w=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;o||(b=b.toLowerCase(),w=w?w.toLowerCase():null,k=k.toLowerCase());var _,x=b===k||!l&&b.startsWith(k)&&"/"===b.charAt(k.length),S=null!=w&&(w===k||!l&&w.startsWith(k)&&"/"===w.charAt(k.length)),E=x?i:void 0;_="function"===typeof s?s({isActive:x,isPending:S}):[s,x?"active":null,S?"pending":null].filter(Boolean).join(" ");var I="function"===typeof f?f({isActive:x,isPending:S}):f;return t.createElement(nq,KB({},p,{"aria-current":E,className:_,ref:n,style:I,to:h}),"function"===typeof d?d({isActive:x,isPending:S}):d)}));var iq,aq;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(iq||(iq={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(aq||(aq={}));var oq=Pz.Header;var uq=function(e){return e.userState.userId},sq=H((function(e){return{user:uq(e)}}),(function(e){return{signOut:function(){return e({type:on})}}}))((function(e){var t=e.user,n=e.signOut;return(0,UL.jsx)(oq,{className:"Header",children:t?(0,UL.jsxs)(UL.Fragment,{children:[(0,UL.jsxs)("div",{className:"wrapper_buttons_nav",children:[(0,UL.jsx)(ZB,{className:"Button",children:(0,UL.jsx)(rq,{to:"/main",className:"NavLink",children:"Home"})}),(0,UL.jsx)(ZB,{className:"Button",children:(0,UL.jsx)(rq,{to:"/chat",className:"NavLink",children:"Chat"})}),(0,UL.jsx)(ZB,{className:"Button",children:(0,UL.jsx)(rq,{to:"/quiz",className:"NavLink",children:"Quiz"})})]}),(0,UL.jsx)(ZB,{className:"Button",onClick:n,children:"LogOut"})]}):null})}));var cq=function(){return(0,UL.jsxs)($B,{children:[(0,UL.jsx)(sq,{}),(0,UL.jsx)(dM,{})]})},lq=rn(),fq=(0,K.MT)(gr,(0,Q.Uo)((0,K.md)(lq)));lq.run(_D);i.createRoot(document.getElementById("root")).render((0,UL.jsx)(t.StrictMode,{children:(0,UL.jsx)(W,{store:fq,children:(0,UL.jsx)(cq,{})})}))}()}();
//# sourceMappingURL=main.eafccb87.js.map